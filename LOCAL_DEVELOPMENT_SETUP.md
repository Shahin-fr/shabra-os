# راهنمای راه‌اندازی محیط لوکال

این راهنما به شما کمک می‌کند تا بدون تغییر در وب‌سایت ورسل، روی لوکال هاست وارد شوید.

## 🚀 راه‌اندازی سریع

### مرحله 1: نصب وابستگی‌ها
```bash
npm install
```

### مرحله 2: راه‌اندازی خودکار
```bash
npm run setup:local
```

### مرحله 3: اجرای سرور توسعه
```bash
npm run dev
```

### مرحله 4: ورود به سیستم
- آدرس: http://localhost:3000/login
- ایمیل: admin@shabra.com
- رمز عبور: admin123

## 📋 اطلاعات ورود

| نقش | ایمیل | رمز عبور |
|-----|-------|----------|
| مدیر | admin@shabra.com | admin123 |
| مدیر پروژه | manager@shabra.com | manager123 |
| کاربر عادی | user@shabra.com | user123 |

## 🔧 تنظیمات خودکار

### دیتابیس
- **لوکال**: SQLite (فایل `dev.db`)
- **ورسل**: PostgreSQL (بدون تغییر)

### احراز هویت
- **لوکال**: تنظیمات توسعه با کاربران پیش‌فرض
- **ورسل**: تنظیمات تولید (بدون تغییر)

### متغیرهای محیطی
- فایل `.env.local` برای لوکال
- متغیرهای ورسل بدون تغییر

## 🛠️ دستورات مفید

### مدیریت دیتابیس
```bash
# راه‌اندازی دیتابیس لوکال
npm run db:setup-local

# بازنشانی دیتابیس لوکال
npm run db:reset-local

# مشاهده دیتابیس
npm run db:studio
```

### تست احراز هویت
```bash
# تست تنظیمات احراز هویت
npm run auth:test
```

### توسعه
```bash
# اجرای سرور توسعه
npm run dev

# اجرای تست‌ها
npm run test:all

# بررسی کیفیت کد
npm run quality:check
```

## 🔍 عیب‌یابی

### مشکل: نمی‌توانم وارد شوم
1. بررسی کنید که `.env.local` وجود دارد
2. دستور `npm run setup:local` را اجرا کنید
3. مرورگر را بازنشانی کنید

### مشکل: خطای دیتابیس
1. فایل `dev.db` را حذف کنید
2. دستور `npm run db:reset-local` را اجرا کنید

### مشکل: خطای احراز هویت
1. دستور `npm run auth:test` را اجرا کنید
2. بررسی کنید که کاربران در دیتابیس وجود دارند

## 📁 ساختار فایل‌ها

```
shabra-os-11/
├── .env.local              # تنظیمات لوکال (ایجاد می‌شود)
├── dev.db                  # دیتابیس SQLite لوکال (ایجاد می‌شود)
├── scripts/
│   ├── setup-local-db.js   # راه‌اندازی دیتابیس لوکال
│   ├── setup-local-auth.js # راه‌اندازی احراز هویت لوکال
│   └── test-auth.js        # تست احراز هویت
└── prisma/
    └── schema.prisma       # تنظیمات دیتابیس
```

## ⚠️ نکات مهم

1. **فایل `.env.local` را به Git اضافه نکنید**
2. **تغییری در تنظیمات ورسل ایجاد نکنید**
3. **برای تولید، از PostgreSQL استفاده کنید**
4. **برای لوکال، از SQLite استفاده کنید**

## 🎯 مزایای این راه‌حل

- ✅ بدون تغییر در وب‌سایت ورسل
- ✅ راه‌اندازی خودکار
- ✅ دیتابیس جداگانه برای لوکال
- ✅ کاربران پیش‌فرض برای تست
- ✅ تنظیمات محیطی جداگانه
- ✅ سازگار با هر دو محیط

## 🆘 پشتیبانی

اگر مشکلی داشتید:
1. ابتدا این راهنما را کامل بخوانید
2. دستورات عیب‌یابی را اجرا کنید
3. لاگ‌های خطا را بررسی کنید
4. در صورت نیاز، از تیم پشتیبانی کمک بگیرید
