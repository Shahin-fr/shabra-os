
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quality Report - 2025-10-09T10-19-35-509Z</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .summary-card { padding: 20px; border-radius: 8px; text-align: center; }
        .summary-card.success { background: #d4edda; color: #155724; }
        .summary-card.error { background: #f8d7da; color: #721c24; }
        .summary-card.warning { background: #fff3cd; color: #856404; }
        .summary-card.info { background: #d1ecf1; color: #0c5460; }
        .check-list { margin-top: 20px; }
        .check-item { padding: 15px; margin: 10px 0; border-radius: 6px; border-left: 4px solid; }
        .check-item.success { background: #d4edda; border-color: #28a745; }
        .check-item.error { background: #f8d7da; border-color: #dc3545; }
        .check-item.warning { background: #fff3cd; border-color: #ffc107; }
        .status { font-weight: bold; }
        .duration { color: #666; font-size: 0.9em; }
        .error-details { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Code Quality Report</h1>
            <p>Generated: Invalid Date</p>
            <p>Duration: 117.39s</p>
        </div>
        
        <div class="summary">
            <div class="summary-card error">
                <h3>4/10</h3>
                <p>Checks Passed</p>
            </div>
            <div class="summary-card error">
                <h3>6</h3>
                <p>Checks Failed</p>
            </div>
            <div class="summary-card error">
                <h3>4</h3>
                <p>Critical Issues</p>
            </div>
            <div class="summary-card info">
                <h3>0</h3>
                <p>Warnings</p>
            </div>
        </div>
        
        <div class="check-list">
            <h2>Check Results</h2>
            
                <div class="check-item success">
                    <div class="status">
                        ‚úÖ Prerequisites Check
                        <span class="duration">(64ms)</span>
                    </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå TypeScript Type Checking
                        <span class="duration">(5572ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> Command failed: npm run type-check
                        </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå ESLint Code Analysis
                        <span class="duration">(17656ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> Command failed: npm run lint
                        </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå Code Formatting Check
                        <span class="duration">(7032ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> spawnSync C:\WINDOWS\system32\cmd.exe ENOBUFS
                        </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå Unit Tests
                        <span class="duration">(31008ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> Command failed: npm run test:unit
[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould handle error when handleError is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.150Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.153Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mGET /api/users[2m > [22m[2mreturns 401 when user is not authenticated
[22m[39mAPI route error: AuthenticationError: Authentication required
    at getUsers [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:35:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:142:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m401[39m,
  errorCode: [32m'INVALID_CREDENTIALS'[39m,
  isOperational: [33mtrue[39m,
  context: [90mundefined[39m,
  timestamp: [35m2025-10-09T10:20:11.155Z[39m
}
MEDIUM SEVERITY ERROR: {
  error: {
    name: [32m'AuthenticationError'[39m,
    message: [32m'Authentication required'[39m,
    statusCode: [33m401[39m,
    errorCode: [32m'INVALID_CREDENTIALS'[39m,
    isOperational: [33mtrue[39m,
    context: [90mundefined[39m,
    timestamp: [32m'2025-10-09T10:20:11.155Z'[39m,
    stack: [32m'AuthenticationError: Authentication required\n'[39m +
      [32m'    at getUsers (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:35:11)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:142:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'AUTHENTICATION'[39m,
  severity: [32m'MEDIUM'[39m,
  timestamp: [32m'2025-10-09T10:20:11.160Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mGET /api/users[2m > [22m[2mreturns 403 when user does not have required role
[22m[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.
    at getUsers [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:41:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:161:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m403[39m,
  errorCode: [32m'ACCESS_DENIED'[39m,
  isOperational: [33mtrue[39m,
  context: [90mundefined[39m,
  timestamp: [35m2025-10-09T10:20:11.178Z[39m
}
HIGH SEVERITY ERROR: {
  error: {
    name: [32m'AuthorizationError'[39m,
    message: [32m'Insufficient permissions. ADMIN or MANAGER role required.'[39m,
    statusCode: [33m403[39m,
    errorCode: [32m'ACCESS_DENIED'[39m,
    isOperational: [33mtrue[39m,
    context: [90mundefined[39m,
    timestamp: [32m'2025-10-09T10:20:11.178Z'[39m,
    stack: [32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n'[39m +
      [32m'    at getUsers (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:41:11)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:161:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'AUTHORIZATION'[39m,
  severity: [32m'HIGH'[39m,
  timestamp: [32m'2025-10-09T10:20:11.180Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould handle async error when handleAsyncError is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'fn is not a function'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'fn is not a function'[39m,
      stack: [32m'Error: fn is not a function\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:133:31\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:60:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.214Z'[39m,
    stack: [32m'InternalServerError: fn is not a function\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:133:31\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:60:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.214Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mPOST /api/users[2m > [22m[2mvalidates required fields
[22m[39mAPI route error: Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'
    at validateCreateDTO [90m(F:\shabra-os-v1\[39msrc\types\validation.ts:110:13[90m)[39m
    at createUser [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:90:26[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:221:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20
CRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'"[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'"[39m,
      stack: [32m"Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\n"[39m +
        [32m'    at validateCreateDTO (F:\\shabra-os-v1\\src\\types\\validation.ts:110:13)\n'[39m +
        [32m'    at createUser (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:90:26)\n'[39m +
        [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
        [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:221:24\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.217Z'[39m,
    stack: [32m"InternalServerError: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\n"[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:33:33)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:221:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.219Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mPOST /api/users[2m > [22m[2mprevents duplicate email addresses
[22m[39mAPI route error: ConflictError: User with this email already exists
    at createUser [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:98:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:244:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m409[39m,
  errorCode: [32m'RESOURCE_ALREADY_EXISTS'[39m,
  isOperational: [33mtrue[39m,
  context: { email: [32m'charlie@example.com'[39m },
  timestamp: [35m2025-10-09T10:20:11.232Z[39m
}
MEDIUM SEVERITY ERROR: {
  error: {
    name: [32m'ConflictError'[39m,
    message: [32m'User with this email already exists'[39m,
    statusCode: [33m409[39m,
    errorCode: [32m'RESOURCE_ALREADY_EXISTS'[39m,
    isOperational: [33mtrue[39m,
    context: { email: [32m'charlie@example.com'[39m },
    timestamp: [32m'2025-10-09T10:20:11.232Z'[39m,
    stack: [32m'ConflictError: User with this email already exists\n'[39m +
      [32m'    at createUser (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:98:11)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:244:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'CONFLICT'[39m,
  severity: [32m'MEDIUM'[39m,
  timestamp: [32m'2025-10-09T10:20:11.233Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mPOST /api/users[2m > [22m[2mreturns 401 when user is not authenticated
[22m[39mAPI route error: AuthenticationError: Authentication required
    at createUser [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:79:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:264:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m401[39m,
  errorCode: [32m'INVALID_CREDENTIALS'[39m,
  isOperational: [33mtrue[39m,
  context: [90mundefined[39m,
  timestamp: [35m2025-10-09T10:20:11.240Z[39m
}
MEDIUM SEVERITY ERROR: {
  error: {
    name: [32m'AuthenticationError'[39m,
    message: [32m'Authentication required'[39m,
    statusCode: [33m401[39m,
    errorCode: [32m'INVALID_CREDENTIALS'[39m,
    isOperational: [33mtrue[39m,
    context: [90mundefined[39m,
    timestamp: [32m'2025-10-09T10:20:11.240Z'[39m,
    stack: [32m'AuthenticationError: Authentication required\n'[39m +
      [32m'    at createUser (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:79:11)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:264:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'AUTHENTICATION'[39m,
  severity: [32m'MEDIUM'[39m,
  timestamp: [32m'2025-10-09T10:20:11.242Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/api/users/route.test.ts[2m > [22m[2mUsers API Route[2m > [22m[2mPOST /api/users[2m > [22m[2mreturns 403 when user does not have required role
[22m[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.
    at createUser [90m(F:\shabra-os-v1\[39msrc\app\api\users\route.ts:85:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\app\api\users\route.test.ts:290:24
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m403[39m,
  errorCode: [32m'ACCESS_DENIED'[39m,
  isOperational: [33mtrue[39m,
  context: [90mundefined[39m,
  timestamp: [35m2025-10-09T10:20:11.258Z[39m
}
HIGH SEVERITY ERROR: {
  error: {
    name: [32m'AuthorizationError'[39m,
    message: [32m'Insufficient permissions. ADMIN or MANAGER role required.'[39m,
    statusCode: [33m403[39m,
    errorCode: [32m'ACCESS_DENIED'[39m,
    isOperational: [33mtrue[39m,
    context: [90mundefined[39m,
    timestamp: [32m'2025-10-09T10:20:11.258Z'[39m,
    stack: [32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n'[39m +
      [32m'    at createUser (F:\\shabra-os-v1\\src\\app\\api\\users\\route.ts:85:11)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\app\\api\\users\\route.test.ts:290:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'AUTHORIZATION'[39m,
  severity: [32m'HIGH'[39m,
  timestamp: [32m'2025-10-09T10:20:11.259Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould clear error when clearError is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.279Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.279Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould clear all errors when clearAllErrors is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.306Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.307Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}
CRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.313Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.313Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould retry error when retryError is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:11.347Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:11.347Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/app/(main)/login/page.test.tsx[2m > [22m[2mLoginPage[2m > [22m[2mrenders login form with all required elements
[22m[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Received `false` for a non-boolean attribute `layout`.

If you want to write it to the DOM, pass a string instead: layout="false" or layout={value.toString()}.

If you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.
React does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Unknown event handler property `onAnimationComplete`. It will be ignored.
Unknown event handler property `onHoverStart`. It will be ignored.
Unknown event handler property `onHoverEnd`. It will be ignored.

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould retry all errors when retryAllErrors is called
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:12.429Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:12.429Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}
CRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:12.437Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:12.437Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould filter errors by type
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:13.478Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:13.479Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}
CRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:13.483Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:13.483Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould filter errors by severity
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:13.507Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:13.508Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/hooks/useErrorHandling.test.tsx[2m > [22m[2museErrorHandling[2m > [22m[2mshould identify retryable errors
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Test error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Test error'[39m,
      stack: [32m'Error: Test error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:26\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
        [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
        [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
        [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
        [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n'[39m +
        [32m'    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n'[39m +
        [32m'    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n'[39m +
        [32m'    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:13.542Z'[39m,
    stack: [32m'InternalServerError: Test error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:174:17\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\contexts\\ErrorContext.tsx:303:5\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.ts:66:5\n'[39m +
      [32m'    at onClick (F:\\shabra-os-v1\\src\\hooks\\useErrorHandling.test.tsx:56:30)\n'[39m +
      [32m'    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n'[39m +
      [32m'    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:13.542Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/performance/__tests__/simple-monitor.test.ts[2m > [22m[2mSimplePerformanceMonitor[2m > [22m[2mError Handling[2m > [22m[2mshould handle PerformanceObserver errors gracefully
[22m[39mLCP monitoring not supported
FID monitoring not supported
CLS monitoring not supported
FCP monitoring not supported

[90mstderr[2m | src/lib/performance/__tests__/simple-monitor.test.ts[2m > [22m[2mSimplePerformanceMonitor[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing performance.memory gracefully
[22m[39mTTFB monitoring failed

[90mstderr[2m | src/middleware.advanced-security.test.ts[2m > [22m[2mAdvanced Security Middleware[2m > [22m[2mError Handling[2m > [22m[2mshould handle token validation errors gracefully
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Token validation failed'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Token validation failed'[39m,
      stack: [32m'Error: Token validation failed\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\middleware.advanced-security.test.ts:337:38\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
        [32m'    at new Promise (<anonymous>)\n'[39m +
        [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
        [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
        [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:14.778Z'[39m,
    stack: [32m'InternalServerError: Token validation failed\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at middlewareHandler (F:\\shabra-os-v1\\src\\middleware.ts:238:25)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:16:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\middleware.advanced-security.test.ts:339:7\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:14.782Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/middleware.advanced-security.test.ts[2m > [22m[2mAdvanced Security Middleware[2m > [22m[2mError Handling[2m > [22m[2mshould handle token validation errors gracefully
[22m[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function
    at ErrorHandler.createErrorResponse [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-handler.ts:376:25[90m)[39m
    at ErrorHandler.handleError [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-handler.ts:99:27[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Function.logError [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:194:7[90m)[39m
    at middlewareHandler [90m(F:\shabra-os-v1\[39msrc\middleware.ts:238:7[90m)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:16:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\middleware.advanced-security.test.ts:339:7
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstderr[2m | src/middleware.advanced-security.test.ts[2m > [22m[2mAdvanced Security Middleware[2m > [22m[2mError Handling[2m > [22m[2mshould handle session validation errors for page routes
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Session validation failed'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Session validation failed'[39m,
      stack: [32m'Error: Session validation failed\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\middleware.advanced-security.test.ts:352:38\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
        [32m'    at new Promise (<anonymous>)\n'[39m +
        [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
        [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
        [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:14.796Z'[39m,
    stack: [32m'InternalServerError: Session validation failed\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at Function.logError (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:194:26)\n'[39m +
      [32m'    at middlewareHandler (F:\\shabra-os-v1\\src\\middleware.ts:341:23)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at Module.<anonymous> (F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:16:14)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\middleware.advanced-security.test.ts:354:22\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:14.797Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/middleware.advanced-security.test.ts[2m > [22m[2mAdvanced Security Middleware[2m > [22m[2mError Handling[2m > [22m[2mshould handle session validation errors for page routes
[22m[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function
    at ErrorHandler.createErrorResponse [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-handler.ts:376:25[90m)[39m
    at ErrorHandler.handleError [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-handler.ts:99:27[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Function.logError [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:194:7[90m)[39m
    at middlewareHandler [90m(F:\shabra-os-v1\[39msrc\middleware.ts:341:5[90m)[39m
    at Module.<anonymous> [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:16:14[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\middleware.advanced-security.test.ts:354:22
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstderr[2m | src/components/storyboard/StorySlot.test.tsx[2m > [22m[2mStorySlot[2m > [22m[2mrenders story slot with story content when story exists
[22m[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Received `false` for a non-boolean attribute `layout`.

If you want to write it to the DOM, pass a string instead: layout="false" or layout={value.toString()}.

If you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.
React does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Unknown event handler property `onAnimationComplete`. It will be ignored.
Unknown event handler property `onHoverStart`. It will be ignored.
Unknown event handler property `onHoverEnd`. It will be ignored.

[90mstderr[2m | src/components/storyboard/CreateStoryDialog.test.tsx[2m > [22m[2mCreateStoryDialog[2m > [22m[2mrenders the dialog when open
[22m[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Received `false` for a non-boolean attribute `layout`.

If you want to write it to the DOM, pass a string instead: layout="false" or layout={value.toString()}.

If you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.
React does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
Unknown event handler property `onAnimationComplete`. It will be ignored.
Unknown event handler property `onHoverStart`. It will be ignored.
Unknown event handler property `onHoverEnd`. It will be ignored.

[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould render error UI when child throws an error
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould show error details in development mode
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould hide error details in production mode
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould call onError callback when error occurs
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould retry when retry button is clicked
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

Error: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould disable retry button when max retries reached
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould reset when resetKeys change
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould render custom fallback when provided
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mshould report error when report button is clicked
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/errors/ErrorBoundary.test.tsx[2m > [22m[2mwithErrorBoundary HOC[2m > [22m[2mshould wrap component with error boundary
[22m[39mError: Test error
    at ThrowError [90m(F:\shabra-os-v1\[39msrc\components\errors\ErrorBoundary.test.tsx:16:11[90m)[39m
    at Object.react-stack-bottom-frame [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m
    at renderWithHooks [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:5529:22[90m)[39m
    at updateFunctionComponent [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:8897:19[90m)[39m
    at beginWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:10522:18[90m)[39m
    at runWithFiberInDEV [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:1522:13[90m)[39m
    at performUnitOfWork [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:15140:22[90m)[39m
    at workLoopSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14956:41[90m)[39m
    at renderRootSync [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14936:11[90m)[39m
    at performWorkOnRoot [90m(F:\shabra-os-v1\[39mnode_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:14462:44[90m)[39m {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.


[90mstderr[2m | src/components/__tests__/Accessibility.test.tsx[2m > [22m[2mAccessibility Tests[2m > [22m[2mModal Component[2m > [22m[2mshould have proper ARIA attributes
[22m[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.

If you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/dialog
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | src/components/__tests__/Accessibility.test.tsx[2m > [22m[2mAccessibility Tests[2m > [22m[2mModal Component[2m > [22m[2mshould trap focus when open
[22m[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.

If you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/dialog
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | src/components/__tests__/Accessibility.test.tsx[2m > [22m[2mAccessibility Tests[2m > [22m[2mModal Component[2m > [22m[2mshould close on Escape key
[22m[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.

If you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/dialog
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[90mstderr[2m | src/app/api/wiki/route.test.ts[2m > [22m[2mWiki API Route[2m > [22m[2mGET /api/wiki[2m > [22m[2mhandles database errors gracefully
[22m[39m[WIKI API] Database query failed: DatabaseError [AppError]: Database error
    at [90mF:\shabra-os-v1\[39msrc\app\api\wiki\route.test.ts:338:9
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  statusCode: [33m500[39m,
  code: [32m'DATABASE_ERROR'[39m,
  isOperational: [33mtrue[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Handler[2m > [22m[2mError Normalization[2m > [22m[2mshould normalize generic Error
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Generic error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Generic error'[39m,
      stack: [32m'Error: Generic error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:453:21\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
        [32m'    at new Promise (<anonymous>)\n'[39m +
        [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
        [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
        [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n'[39m +
        [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:23.256Z'[39m,
    stack: [32m'InternalServerError: Generic error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:454:43\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
      [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:23.258Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Handler[2m > [22m[2mError Normalization[2m > [22m[2mshould normalize Prisma errors
[22m[39mMEDIUM SEVERITY ERROR: {
  error: {
    name: [32m'ConflictError'[39m,
    message: [32m'Resource already exists'[39m,
    statusCode: [33m409[39m,
    errorCode: [32m'DUPLICATE_ENTRY'[39m,
    isOperational: [33mtrue[39m,
    context: { prismaCode: [32m'P2002'[39m, target: [36m[Array][39m },
    timestamp: [32m'2025-10-09T10:20:23.266Z'[39m,
    stack: [32m'ConflictError: Resource already exists\n'[39m +
      [32m'    at ErrorHandler.handlePrismaError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:218:16)\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:165:19)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:469:43\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
      [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)'[39m
  },
  category: [32m'CONFLICT'[39m,
  severity: [32m'MEDIUM'[39m,
  timestamp: [32m'2025-10-09T10:20:23.267Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Handler[2m > [22m[2mError Normalization[2m > [22m[2mshould normalize network errors
[22m[39mCRITICAL ERROR: {
  error: {
    name: [32m'NetworkError'[39m,
    message: [32m'Network request failed'[39m,
    statusCode: [33m502[39m,
    errorCode: [32m'NETWORK_ERROR'[39m,
    isOperational: [33mtrue[39m,
    context: {
      originalError: [32m'FetchError'[39m,
      message: [32m'Network request failed'[39m,
      stack: [90mundefined[39m
    },
    timestamp: [32m'2025-10-09T10:20:23.271Z'[39m,
    stack: [32m'NetworkError: Network request failed\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:185:14)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:482:43\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
      [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:23.272Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Handler[2m > [22m[2mError Response Creation[2m > [22m[2mshould add retry-after header for rate limit errors
[22m[39mHIGH SEVERITY ERROR: {
  error: {
    name: [32m'RateLimitError'[39m,
    message: [32m'Too many requests'[39m,
    statusCode: [33m429[39m,
    errorCode: [32m'RATE_LIMIT_EXCEEDED'[39m,
    isOperational: [33mtrue[39m,
    context: { retryAfter: [33m900[39m },
    timestamp: [32m'2025-10-09T10:20:23.281Z'[39m,
    stack: [32m'RateLimitError: Too many requests\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:527:21\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
      [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n'[39m +
      [32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'[39m
  },
  category: [32m'RATE_LIMIT'[39m,
  severity: [32m'HIGH'[39m,
  timestamp: [32m'2025-10-09T10:20:23.282Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mSuccess Responses[2m > [22m[2mshould create success response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:571:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mSuccess Responses[2m > [22m[2mshould create paginated response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:605:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create validation error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:627:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create authentication error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:643:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create authorization error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:658:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create not found error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:673:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create conflict error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:688:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create rate limit error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:704:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create internal server error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:719:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mAPI Responses[2m > [22m[2mError Responses[2m > [22m[2mshould create service unavailable error response
[22m[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.
    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:734:29

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Middleware[2m > [22m[2mAPI Error Handling[2m > [22m[2mshould handle API errors
[22m[39mAPI route error: ValidationError: Invalid input
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:854:15
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:20
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:866:30
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  statusCode: [33m400[39m,
  errorCode: [32m'VALIDATION_FAILED'[39m,
  isOperational: [33mtrue[39m,
  context: { field: [90mundefined[39m },
  timestamp: [35m2025-10-09T10:20:23.347Z[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Middleware[2m > [22m[2mAPI Error Handling[2m > [22m[2mshould handle unknown errors
[22m[39mAPI route error: Error: Unknown error
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:872:15
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:30:20
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:884:30
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
CRITICAL ERROR: {
  error: {
    name: [32m'InternalServerError'[39m,
    message: [32m'Unknown error'[39m,
    statusCode: [33m500[39m,
    errorCode: [32m'INTERNAL_SERVER_ERROR'[39m,
    isOperational: [33mfalse[39m,
    context: {
      originalError: [32m'Error'[39m,
      message: [32m'Unknown error'[39m,
      stack: [32m'Error: Unknown error\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:872:15\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:30:20\n'[39m +
        [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:884:30\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
        [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
        [32m'    at new Promise (<anonymous>)\n'[39m +
        [32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n'[39m +
        [32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n'[39m +
        [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'[39m
    },
    timestamp: [32m'2025-10-09T10:20:23.352Z'[39m,
    stack: [32m'InternalServerError: Unknown error\n'[39m +
      [32m'    at ErrorHandler.normalizeError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:200:12)\n'[39m +
      [32m'    at ErrorHandler.handleError (F:\\shabra-os-v1\\src\\lib\\errors\\error-handler.ts:76:26)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-middleware.ts:33:33\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n'[39m +
      [32m'    at F:\\shabra-os-v1\\src\\lib\\errors\\error-handling.test.ts:884:24\n'[39m +
      [32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  },
  category: [32m'INTERNAL'[39m,
  severity: [32m'CRITICAL'[39m,
  timestamp: [32m'2025-10-09T10:20:23.352Z'[39m,
  requestId: [90mundefined[39m,
  userId: [90mundefined[39m
}

[90mstderr[2m | src/lib/errors/error-handling.test.ts[2m > [22m[2mError Middleware[2m > [22m[2mError Recovery[2m > [22m[2mshould use fallback when primary operation fails
[22m[39mPrimary operation failed, using fallback: Error: Primary failed
    at primary [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:907:15[90m)[39m
    at Function.withFallback [90m(F:\shabra-os-v1\[39msrc\lib\errors\error-middleware.ts:267:20[90m)[39m
    at [90mF:\shabra-os-v1\[39msrc\lib\errors\error-handling.test.ts:911:42
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
    at runSuite [90m(file:///F:/shabra-os-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | src/components/storyboard/StoryCard.test.tsx[2m > [22m[2mStoryCard[2m > [22m[2mhandles delete with empty id gracefully
[22m[39mError: Not implemented: window.confirm
    at module.exports (F:\shabra-os-v1\node_modules\jsdom\lib\jsdom\browser\not-implemented.js:9:17)
    at F:\shabra-os-v1\node_modules\jsdom\lib\jsdom\browser\Window.js:960:7
    at handleDelete (F:\shabra-os-v1\src\components\storyboard\StoryCard.tsx:43:9)
    at executeDispatch (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16368:9)
    at runWithFiberInDEV (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
    at processDispatchQueue (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16418:19)
    at F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:17016:9
    at batchedUpdates$1 (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:3262:40)
    at dispatchEventForPluginEventSystem (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16572:7)
    at dispatchEvent (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:20658:11) [90mundefined[39m

[90mstderr[2m | src/components/storyboard/StoryCard.test.tsx[2m > [22m[2mStoryCard[2m > [22m[2mhandles delete with whitespace id gracefully
[22m[39mError: Not implemented: window.confirm
    at module.exports (F:\shabra-os-v1\node_modules\jsdom\lib\jsdom\browser\not-implemented.js:9:17)
    at F:\shabra-os-v1\node_modules\jsdom\lib\jsdom\browser\Window.js:960:7
    at handleDelete (F:\shabra-os-v1\src\components\storyboard\StoryCard.tsx:43:9)
    at executeDispatch (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16368:9)
    at runWithFiberInDEV (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
    at processDispatchQueue (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16418:19)
    at F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:17016:9
    at batchedUpdates$1 (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:3262:40)
    at dispatchEventForPluginEventSystem (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:16572:7)
    at dispatchEvent (F:\shabra-os-v1\node_modules\react-dom\cjs\react-dom-client.development.js:20658:11) [90mundefined[39m

[90mstderr[2m | src/lib/validation/__tests__/component-props.test.ts[2m > [22m[2mvalidateComponentProps[2m > [22m[2mshould throw error in development for invalid props
[22m[39m[TestComponent] Invalid props: [ [32m'title: Title is required'[39m ]


[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 113 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mBrute Force Protection[2m > [22mshould implement brute force protection for auth endpoints
[31m[1mAssertionError[22m: expected { next: true, headers: Map{ ‚Ä¶(8) } } to deeply equal ObjectContaining {"status": 429}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "status": 429,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "X-Frame-Options" => "DENY",[39m
[31m+     "X-Content-Type-Options" => "nosniff",[39m
[31m+     "Referrer-Policy" => "strict-origin-when-cross-origin",[39m
[31m+     "X-XSS-Protection" => "1; mode=block",[39m
[31m+     "X-DNS-Prefetch-Control" => "off",[39m
[31m+     "Permissions-Policy" => "camera=(), microphone=(), geolocation=(), interest-cohort=()",[39m
[31m+     "Strict-Transport-Security" => "max-age=31536000; includeSubDomains; preload",[39m
[31m+     "Content-Security-Policy" => "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests",[39m
[31m+   },[39m
[31m+   "next": true,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m168:22[22m[39m
    [90m166| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m167| [39m
    [90m168| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ status[33m:[39m [34m429[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m169| [39m      [34mexpect[39m(result[33m.[39mheaders[33m.[39m[35mget[39m([32m'Retry-After'[39m))[33m.[39m[34mtoBe[39m([32m'900'[39m)[33m;[39m
    [90m170| [39m      [34mexpect[39m([33mAuditLogger[39m[33m.[39mlogSecurityEvent)[33m.[39m[34mtoHaveBeenCalledWith[39m(

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mBrute Force Protection[2m > [22mshould block IP after excessive brute force attempts
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ '127.0.0.1', ‚Ä¶(2) ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m190:45[22m[39m
    [90m188| [39m      [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m189| [39m
    [90m190| [39m      [34mexpect[39m(([33mIPManagement[39m [35mas[39m any)[33m.[39mblockIP)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                            [31m^[39m
    [90m191| [39m        [32m'127.0.0.1'[39m[33m,[39m
    [90m192| [39m        [32m'Excessive brute force attempts'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mBrute Force Protection[2m > [22mshould record failed attempts for auth endpoints
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ '127.0.0.1' ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m203:65[22m[39m
    [90m201| [39m      [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m202| [39m
    [90m203| [39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave‚Ä¶
    [90m   | [39m                                                                [31m^[39m
    [90m204| [39m      [34mexpect[39m(([33mAuditLogger[39m [35mas[39m any)[33m.[39mlogAuthEvent)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m205| [39m        [32m'LOGIN_FAILURE'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mBrute Force Protection[2m > [22mshould record successful attempts for auth endpoints
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ '127.0.0.1' ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m222:69[22m[39m
    [90m220| [39m      [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m221| [39m
    [90m222| [39m      expect((BruteForceProtection as any).recordSuccessfulAttempt).to‚Ä¶
    [90m   | [39m                                                                    [31m^[39m
    [90m223| [39m      [34mexpect[39m(([33mAuditLogger[39m [35mas[39m any)[33m.[39mlogAuthEvent)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m224| [39m        [32m'LOGIN_SUCCESS'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mProgressive Delays[2m > [22mshould implement progressive delays for failed attempts
[31m[1mAssertionError[22m: expected 0 to be greater than 1000[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m301:35[22m[39m
    [90m299| [39m
    [90m300| [39m      [90m// Should have some delay (allowing for test execution time)[39m
    [90m301| [39m      [34mexpect[39m(endTime [33m-[39m startTime)[33m.[39m[34mtoBeGreaterThan[39m([34m1000[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m302| [39m    })[33m;[39m
    [90m303| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mLogin Page Protection[2m > [22mshould protect login page from brute force attacks
[31m[1mAssertionError[22m: expected { next: true, headers: Map{ ‚Ä¶(8) } } to deeply equal ObjectContaining {"redirect": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "redirect": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "X-Frame-Options" => "DENY",[39m
[31m+     "X-Content-Type-Options" => "nosniff",[39m
[31m+     "Referrer-Policy" => "strict-origin-when-cross-origin",[39m
[31m+     "X-XSS-Protection" => "1; mode=block",[39m
[31m+     "X-DNS-Prefetch-Control" => "off",[39m
[31m+     "Permissions-Policy" => "camera=(), microphone=(), geolocation=(), interest-cohort=()",[39m
[31m+     "Strict-Transport-Security" => "max-age=31536000; includeSubDomains; preload",[39m
[31m+     "Content-Security-Policy" => "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests",[39m
[31m+   },[39m
[31m+   "next": true,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m316:22[22m[39m
    [90m314| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m315| [39m
    [90m316| [39m      expect(result).toEqual(expect.objectContaining({ redirect: true ‚Ä¶
    [90m   | [39m                     [31m^[39m
    [90m317| [39m      [34mexpect[39m(result[33m.[39murl)[33m.[39m[34mtoContain[39m([32m'error=Too many attempts'[39m)[33m;[39m
    [90m318| [39m    })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mLogin Page Protection[2m > [22mshould redirect to login with error message for locked accounts
[31m[1mAssertionError[22m: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m330:26[22m[39m
    [90m328| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m329| [39m
    [90m330| [39m      expect(result.url).toContain('error=Too many attempts. Please tr‚Ä¶
    [90m   | [39m                         [31m^[39m
    [90m331| [39m    })[33m;[39m
    [90m332| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.advanced-security.test.ts[2m > [22mAdvanced Security Middleware[2m > [22mError Handling[2m > [22mshould handle token validation errors gracefully
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ '127.0.0.1' ][90m

Number of calls: [1m0[22m
[31m[39m
[36m [2m‚ùØ[22m src/middleware.advanced-security.test.ts:[2m341:65[22m[39m
    [90m339| [39m      [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m340| [39m
    [90m341| [39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave‚Ä¶
    [90m   | [39m                                                                [31m^[39m
    [90m342| [39m      [34mexpect[39m(([33mAuditLogger[39m [35mas[39m any)[33m.[39mlogAuthEvent)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m343| [39m        [32m'LOGIN_FAILURE'[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mAuthentication and Authorization[2m > [22mredirects to login for protected pages when not authenticated
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"redirect": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "redirect": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m247:22[22m[39m
    [90m245| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m246| [39m
    [90m247| [39m      expect(result).toEqual(expect.objectContaining({ redirect: true ‚Ä¶
    [90m   | [39m                     [31m^[39m
    [90m248| [39m    })[33m;[39m
    [90m249| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mAuthentication and Authorization[2m > [22mallows access to protected pages when authenticated
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m260:22[22m[39m
    [90m258| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m259| [39m
    [90m260| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m261| [39m    })[33m;[39m
    [90m262| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mAuthentication and Authorization[2m > [22mreturns 401 for protected API routes when not authenticated
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"status": 401}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "status": 401,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m269:22[22m[39m
    [90m267| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m268| [39m
    [90m269| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(
    [90m   | [39m                     [31m^[39m
    [90m270| [39m        expect[33m.[39m[34mobjectContaining[39m({
    [90m271| [39m          status[33m:[39m [34m401[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mAuthentication and Authorization[2m > [22mallows access to protected API routes when authenticated
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m286:22[22m[39m
    [90m284| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m285| [39m
    [90m286| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m287| [39m    })[33m;[39m
    [90m288| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mAuthentication and Authorization[2m > [22mvalidates session token format
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"status": 401}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "status": 401,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m301:20[22m[39m
    [90m299| [39m    [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m300| [39m
    [90m301| [39m    [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(
    [90m   | [39m                   [31m^[39m
    [90m302| [39m      expect[33m.[39m[34mobjectContaining[39m({
    [90m303| [39m        status[33m:[39m [34m401[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mallows requests from trusted origins
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m320:22[22m[39m
    [90m318| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m319| [39m
    [90m320| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m321| [39m    })[33m;[39m
    [90m322| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mOpen Redirect Protection[2m > [22mvalidates callback URL origin to prevent open redirects
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"redirect": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "redirect": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m352:22[22m[39m
    [90m350| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m351| [39m
    [90m352| [39m      expect(result).toEqual(expect.objectContaining({ redirect: true ‚Ä¶
    [90m   | [39m                     [31m^[39m
    [90m353| [39m      [90m// Should not include the malicious callback URL[39m
    [90m354| [39m      [34mexpect[39m(result[33m.[39murl)[33m.[39mnot[33m.[39m[34mtoContain[39m([32m'malicious.com'[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mOpen Redirect Protection[2m > [22mincludes valid callback URLs
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"redirect": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "redirect": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m365:22[22m[39m
    [90m363| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m364| [39m
    [90m365| [39m      expect(result).toEqual(expect.objectContaining({ redirect: true ‚Ä¶
    [90m   | [39m                     [31m^[39m
    [90m366| [39m      [34mexpect[39m(result[33m.[39murl)[33m.[39m[34mtoContain[39m([32m'callbackUrl='[39m)[33m;[39m
    [90m367| [39m    })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mError Handling[2m > [22mhandles token validation errors gracefully
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"redirect": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "redirect": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m377:22[22m[39m
    [90m375| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m376| [39m
    [90m377| [39m      expect(result).toEqual(expect.objectContaining({ redirect: true ‚Ä¶
    [90m   | [39m                     [31m^[39m
    [90m378| [39m    })[33m;[39m
    [90m379| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mError Handling[2m > [22mhandles API token validation errors with 401
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"status": 401}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "status": 401,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m391:22[22m[39m
    [90m389| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m390| [39m
    [90m391| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(
    [90m   | [39m                     [31m^[39m
    [90m392| [39m        expect[33m.[39m[34mobjectContaining[39m({
    [90m393| [39m          status[33m:[39m [34m401[39m[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mPublic Routes[2m > [22mallows access to login page without authentication
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m405:22[22m[39m
    [90m403| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m404| [39m
    [90m405| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m406| [39m    })[33m;[39m
    [90m407| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mPublic Routes[2m > [22mallows access to register page without authentication
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m413:22[22m[39m
    [90m411| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m412| [39m
    [90m413| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m414| [39m    })[33m;[39m
    [90m415| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mPublic Routes[2m > [22mallows access to docs page without authentication
[31m[1mAssertionError[22m: expected { status: 429, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {[39m
[31m+     "Retry-After" => "900",[39m
[31m+   },[39m
[31m+   "message": "Too Many Requests",[39m
[31m+   "status": 429,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m421:22[22m[39m
    [90m419| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m420| [39m
    [90m421| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m422| [39m    })[33m;[39m
    [90m423| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/middleware.security.test.ts[2m > [22mSecurity Middleware[2m > [22mCORS and Origin Validation[2m > [22mPublic Routes[2m > [22mallows access to health check API without authentication
[31m[1mAssertionError[22m: expected { status: 403, ‚Ä¶(2) } to deeply equal ObjectContaining {"next": true}[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- ObjectContaining {[39m
[32m-   "next": true,[39m
[31m+ {[39m
[31m+   "headers": Map {},[39m
[31m+   "message": "Forbidden",[39m
[31m+   "status": 403,[39m
[2m  }[22m

[36m [2m‚ùØ[22m src/middleware.security.test.ts:[2m429:22[22m[39m
    [90m427| [39m      [35mconst[39m result [33m=[39m [35mawait[39m [34mmiddleware[39m(mockRequest)[33m;[39m
    [90m428| [39m
    [90m429| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ next[33m:[39m [35mtrue[39m }))[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m430| [39m    })[33m;[39m
    [90m431| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/contexts/ErrorContext.test.tsx[2m > [22museErrorHandler hook[2m > [22mshould clear error when clearError is called
[31m[1mError[22m: [2mexpect([22m[31melement[31m[2m).toHaveTextContent()[22m

Expected element to have text content:
[32m  0[31m
Received:
[31m  1[31m[39m
[36m [2m‚ùØ[22m src/contexts/ErrorContext.test.tsx:[2m219:47[22m[39m
    [90m217| [39m    [90m// Clear the error[39m
    [90m218| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByText[39m([32m'Clear Error'[39m))[33m;[39m
    [90m219| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByTestId[39m([32m'error-count'[39m))[33m.[39m[34mtoHaveTextContent[39m([32m'0'[39m)[33m;[39m
    [90m   | [39m                                              [31m^[39m
    [90m220| [39m  })[33m;[39m
    [90m221| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould handle error when handleError is called
[31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m131:39[22m[39m
    [90m129| [39m    })[33m;[39m
    [90m130| [39m
    [90m131| [39m    [34mexpect[39m(errorReporter[33m.[39mreportError)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                      [31m^[39m
    [90m132| [39m    [34mexpect[39m(errorRecoveryManager[33m.[39mattemptRecovery)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m133| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould handle async error when handleAsyncError is called
[31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m153:39[22m[39m
    [90m151| [39m    })[33m;[39m
    [90m152| [39m
    [90m153| [39m    [34mexpect[39m(errorReporter[33m.[39mreportError)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                      [31m^[39m
    [90m154| [39m  })[33m;[39m
    [90m155| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould clear error when clearError is called
[31m[1mError[22m: [2mexpect([22m[31melement[31m[2m).toHaveTextContent()[22m

Expected element to have text content:
[32m  0[31m
Received:
[31m  1[31m[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m169:47[22m[39m
    [90m167| [39m    [90m// Clear the error[39m
    [90m168| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByText[39m([32m'Clear Error'[39m))[33m;[39m
    [90m169| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByTestId[39m([32m'error-count'[39m))[33m.[39m[34mtoHaveTextContent[39m([32m'0'[39m)[33m;[39m
    [90m   | [39m                                              [31m^[39m
    [90m170| [39m  })[33m;[39m
    [90m171| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould clear all errors when clearAllErrors is called
[31m[1mError[22m: [2mexpect([22m[31melement[31m[2m).toHaveTextContent()[22m

Expected element to have text content:
[32m  0[31m
Received:
[31m  2[31m[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m186:47[22m[39m
    [90m184| [39m    [90m// Clear all errors[39m
    [90m185| [39m    fireEvent[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByText[39m([32m'Clear All Errors'[39m))[33m;[39m
    [90m186| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByTestId[39m([32m'error-count'[39m))[33m.[39m[34mtoHaveTextContent[39m([32m'0'[39m)[33m;[39m
    [90m   | [39m                                              [31m^[39m
    [90m187| [39m  })[33m;[39m
    [90m188| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould retry error when retryError is called
[31m[1mAssertionError[22m: expected "spy" to be called at least once

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"error-count"[31m
        [36m>[31m
          [0m1[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"critical-error-count"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"retryable-error-count"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"is-online"[31m
        [36m>[31m
          [0mtrue[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"has-critical-errors"[31m
        [36m>[31m
          [0mfalse[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"has-retryable-errors"[31m
        [36m>[31m
          [0mfalse[0m
        [36m</div>[31m
        [36m<button>[31m
          [0mHandle Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mHandle Async Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mClear Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mClear All Errors[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mRetry Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mRetry All Errors[0m
        [36m</button>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"network-errors"[31m
        [36m>[31m
          [0m1[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"critical-errors"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"retryable-errors"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m206:40[22m[39m
    [90m204| [39m
    [90m205| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m206| [39m      [34mexpect[39m(errorReporter[33m.[39mtrackRetry)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m207| [39m    })[33m;[39m
    [90m208| [39m  })[33m;[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useErrorHandling.test.tsx[2m > [22museErrorHandling[2m > [22mshould retry all errors when retryAllErrors is called
[31m[1mAssertionError[22m: expected "spy" to be called at least once

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"error-count"[31m
        [36m>[31m
          [0m2[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"critical-error-count"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"retryable-error-count"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"is-online"[31m
        [36m>[31m
          [0mtrue[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"has-critical-errors"[31m
        [36m>[31m
          [0mfalse[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"has-retryable-errors"[31m
        [36m>[31m
          [0mfalse[0m
        [36m</div>[31m
        [36m<button>[31m
          [0mHandle Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mHandle Async Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mClear Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mClear All Errors[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mRetry Error[0m
        [36m</button>[31m
        [36m<button>[31m
          [0mRetry All Errors[0m
        [36m</button>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"network-errors"[31m
        [36m>[31m
          [0m2[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"critical-errors"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
        [36m<div[31m
          [33mdata-testid[31m=[32m"retryable-errors"[31m
        [36m>[31m
          [0m0[0m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m
[36m [2m‚ùØ[22m src/hooks/useErrorHandling.test.tsx:[2m228:40[22m[39m
    [90m226| [39m
    [90m227| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m228| [39m      [34mexpect[39m(errorReporter[33m.[39mtrackRetry)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m229| [39m    })[33m;[39m
    [90m230| [39m  })[33m;[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/lib/advanced-security.test.ts[2m > [22mAdvanced Security Features[2m > [22mAudit Logging[2m > [22mshould retrieve audit logs with filters
[31m[1mAssertionError[22m: expected [] to deeply equal [ Array(2) ][39m

[32m- Expected[39m
[31m+ Received[39m

[32m- [[39m
[32m-   {[39m
[32m-     "eventType": "LOGIN_SUCCESS",[39m
[32m-     "id": "1",[39m
[32m-     "riskLevel": "LOW",[39m
[32m-     "timestamp": 2025-10-09T10:20:14.461Z,[39m
[32m-     "userId": "user123",[39m
[32m-   },[39m
[32m-   {[39m
[32m-     "eventType": "LOGIN_FAILURE",[39m
[32m-     "id": "2",[39m
[32m-     "riskLevel": "MEDIUM",[39m
[32m-     "timestamp": 2025-10-09T10:20:14.461Z,[39m
[32m-     "userId": "user456",[39m
[32m-   },[39m
[32m- ][39m
[31m+ [][39m

[36m [2m‚ùØ[22m src/lib/advanced-security.test.ts:[2m261:20[22m[39m
    [90m259| [39m      })[33m;[39m
    [90m260| [39m      
    [90m261| [39m      [34mexpect[39m(logs)[33m.[39m[34mtoEqual[39m(mockLogs)[33m;[39m
    [90m   | [39m                   [31m^[39m
    [90m262| [39m      [34mexpect[39m(prisma[33m.[39mauditLog[33m.[39mfindMany)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m263| [39m        where[33m:[39m {

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/lib/advanced-security.test.ts[2m > [22mAdvanced Security Features[2m > [22mIntegration Tests[2m > [22mshould handle complete brute force attack scenario
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2m‚ùØ[22m src/lib/advanced-security.test.ts:[2m357:35[22m[39m
    [90m355| [39m        
    [90m356| [39m        [35mif[39m (i [33m<[39m [33mBRUTE_FORCE_CONFIG[39m[33m.[39mmaxAttempts) {
    [90m357| [39m          [34mexpect[39m(result[33m.[39misLocked)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m358| [39m        } [35melse[39m {
    [90m359| [39m          [34mexpect[39m(result[33m.[39misLocked)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mgetStoriesByDay[2m > [22mshould return stories for a valid date
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mgetStoriesByDay[2m > [22mshould throw error for invalid date format
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mgetStoryById[2m > [22mshould return story with related data for valid ID
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mgetStoryById[2m > [22mshould throw error when story not found
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mcreateStory[2m > [22mshould create story with valid data
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mcreateStory[2m > [22mshould handle old project ID conversion
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mupdateStory[2m > [22mshould update story with valid data
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mupdateStory[2m > [22mshould throw error when story not found for update
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mdeleteStory[2m > [22mshould delete story with valid ID
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mdeleteStory[2m > [22mshould throw error when story not found for deletion
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mreorderStories[2m > [22mshould reorder stories successfully
[41m[1m FAIL [22m[49m src/services/story.service.test.ts[2m > [22mStoryService[2m > [22mreorderStories[2m > [22mshould throw error when some stories not found
[31m[1mTypeError[22m: mockProjectIdResolver.resolve.mockResolvedValue is not a function[39m
[36m [2m‚ùØ[22m src/services/story.service.test.ts:[2m64:35[22m[39m
    [90m 62| [39m    vi[33m.[39m[34mclearAllMocks[39m()[33m;[39m
    [90m 63| [39m    [90m// Set up default mock for ProjectIdResolver[39m
    [90m 64| [39m    mockProjectIdResolver.resolve.mockResolvedValue('cmf5o9m110001u35c‚Ä¶
    [90m   | [39m                                  [31m^[39m
    [90m 65| [39m  })[33m;[39m
    [90m 66| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/(main)/login/page.test.tsx[2m > [22mLoginPage[2m > [22mrenders login form with all required elements
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: Ÿàÿ±ŸàÿØ ÿ®Ÿá ÿ¥ÿ®ÿ±ÿß OS. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33manimate[39m=[32m"[object Object]"[39m
      [33mclass[39m=[32m"w-full max-w-md p-4"[39m
      [33minitial[39m=[32m"[object Object]"[39m
      [33mstyle[39m=[32m"will-change: transform, opacity;"[39m
      [33mtransition[39m=[32m"[object Object]"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white/10 backdrop-blur-2xl border border-white/20 shadow-lg text-card-foreground flex flex-col gap-6 rounded-xl py-6 w-full max-w-md"[39m
        [33mdata-slot[39m=[32m"card"[39m
        [33mstyle[39m=[32m"background: rgba(255, 255, 255, 0.95); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15),
              0 8px 25px rgba(255, 10, 84, 0.1),
              inset 0 1px 0 rgba(255, 255, 255, 0.8);"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start rtl:items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-6 text-center"[39m
          [33mdata-slot[39m=[32m"card-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-3xl font-bold text-foreground mb-3"[39m
            [33mdata-slot[39m=[32m"card-title"[39m
          [36m>[39m
            [0mŸàÿ±ŸàÿØ ÿ®Ÿá ÿ≥€åÿ≥ÿ™ŸÖ ÿπÿßŸÖŸÑ ÿ¥ÿ®ÿ±ÿß[0m
          [36m</div>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground"[39m
          [36m>[39m
            [0mÿ®ÿ±ÿß€å ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ Ÿàÿßÿ±ÿØ ÿ¥Ÿà€åÿØ[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"px-6 space-y-6"[39m
          [33mdata-slot[39m=[32m"card-content"[39m
        [36m>[39m
          [36m<form[39m
            [33mclass[39m=[32m"space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground"[39m
                [33mfor[39m=[32m"email"[39m
              [36m>[39m
                [0mÿß€åŸÖ€åŸÑ[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-full"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm"[39m
                  [33mid[39m=[32m"email"[39m
                  [33mplaceholder[39m=[32m"example@email.com"[39m
                  [33mrequired[39m=[32m""[39m
                  [33mtype[39m=[32m"email"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-full"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm"[39m
                  [33mid[39m=[32m"password"[39m
                  [33mplaceholder[39m=[32m"ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ"[39m
                  [33mrequired[39m=[32m""[39m
                  [33mtype[39m=[32m"password"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 h-10 px-4 py-2 w-full bg-[#ff0a54] hover:bg-[#ff0a54]/90 text-white shadow-lg hover:shadow-xl transition-all duration-200 min-h-[44px] min-w-[44px]"[39m
              [33mstyle[39m=[32m"box-shadow: 0 8px 25px rgba(255, 10, 84, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);"[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mŸàÿ±ŸàÿØ[0m
            [36m</button>[39m
          [36m</form>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2m‚ùØ[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2m‚ùØ[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2m‚ùØ[22m src/app/(main)/login/page.test.tsx:[2m52:19[22m[39m
    [90m 50| [39m
    [90m 51| [39m    [90m// Check for main title and description[39m
    [90m 52| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Ÿàÿ±ŸàÿØ ÿ®Ÿá ÿ¥ÿ®ÿ±ÿß OS'[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 53| [39m    [34mexpect[39m(
    [90m 54| [39m      screen[33m.[39m[34mgetByText[39m([32m'ÿ®ÿ±ÿß€å ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ Ÿàÿßÿ±ÿØ ÿ¥Ÿà€åÿØ'[39m)

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mGET /api/leave-requests[2m > [22mreturns leave requests for authenticated user
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m79:31[22m[39m
    [90m 77| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m 78| [39m
    [90m 79| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 80| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 81| [39m      [34mexpect[39m(data[33m.[39mdata)[33m.[39m[34mtoHaveLength[39m([34m1[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mGET /api/leave-requests[2m > [22mreturns 401 when user is not authenticated
[31m[1mAssertionError[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication requir[27med"[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m95:34[22m[39m
    [90m 93| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)[33m;[39m
    [90m 94| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m 95| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m 96| [39m    })[33m;[39m
    [90m 97| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mGET /api/leave-requests[2m > [22mhandles database errors gracefully
[31m[1mAssertionError[22m: expected 'An internal server error occurred' to be 'DB Error' // Object.is equality[39m

Expected: [32m"DB Error"[39m
Received: [31m"An internal server error occurred"[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m109:34[22m[39m
    [90m107| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m108| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m109| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'DB Error'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m110| [39m    })[33m;[39m
    [90m111| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mPOST /api/leave-requests[2m > [22mcreates a new leave request for authenticated user
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m133:31[22m[39m
    [90m131| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m132| [39m
    [90m133| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m134| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m135| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'leave-123'[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mPOST /api/leave-requests[2m > [22mreturns 401 when user is not authenticated
[31m[1mAssertionError[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality[39m

Expected: [32m"[7mUnauthoriz[27med"[39m
Received: [31m"[7mAuthentication requir[27med"[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m162:34[22m[39m
    [90m160| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m401[39m)[33m;[39m
    [90m161| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m162| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Unauthorized'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m163| [39m    })[33m;[39m
    [90m164| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/leave-requests/route.test.ts[2m > [22mLeave Requests API Route[2m > [22mPOST /api/leave-requests[2m > [22mprevents overlapping leave requests
[31m[1mAssertionError[22m: expected 400 to be 409 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 409[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/leave-requests/route.test.ts:[2m211:31[22m[39m
    [90m209| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m210| [39m
    [90m211| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m409[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m212| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m213| [39m      expect(data.error.message).toContain('pending or approved leave ‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mGET /api/projects[2m > [22mreturns projects with pagination when no query parameters
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m231:35[22m[39m
    [90m229| [39m      const request = new NextRequest('http://localhost:3000/api/proje‚Ä¶
    [90m230| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m231| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m232| [39m
    [90m233| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mGET /api/projects[2m > [22mreturns projects with custom page parameter
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m260:35[22m[39m
    [90m258| [39m      )[33m;[39m
    [90m259| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m260| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m261| [39m
    [90m262| [39m      [90m// Response received[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mGET /api/projects[2m > [22mcalculates pagination correctly for multiple pages
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m323:35[22m[39m
    [90m321| [39m      )[33m;[39m
    [90m322| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m323| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m324| [39m
    [90m325| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mGET /api/projects[2m > [22mhandles empty projects gracefully
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m344:35[22m[39m
    [90m342| [39m      const request = new NextRequest('http://localhost:3000/api/proje‚Ä¶
    [90m343| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m344| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m345| [39m
    [90m346| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mcreates project successfully with valid data
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m393:35[22m[39m
    [90m391| [39m
    [90m392| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m393| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m394| [39m
    [90m395| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mcreates project with empty description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m413:35[22m[39m
    [90m411| [39m
    [90m412| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m413| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m414| [39m
    [90m415| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mcreates project with null description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m431:35[22m[39m
    [90m429| [39m
    [90m430| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m431| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m432| [39m
    [90m433| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mcreates project with undefined description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m449:35[22m[39m
    [90m447| [39m
    [90m448| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m449| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m450| [39m
    [90m451| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mtrims whitespace from name and description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m467:35[22m[39m
    [90m465| [39m
    [90m466| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m467| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m468| [39m
    [90m469| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mPOST /api/projects[2m > [22mhandles JSON parsing errors gracefully
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m603:31[22m[39m
    [90m601| [39m
    [90m602| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m603| [39m      expect(response.status).toBe(500); // API doesn't handle JSON pa‚Ä¶
    [90m   | [39m                              [31m^[39m
    [90m604| [39m    })[33m;[39m
    [90m605| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[49/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mEdge Cases[2m > [22mhandles very long project names
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m650:35[22m[39m
    [90m648| [39m
    [90m649| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m650| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m651| [39m
    [90m652| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[50/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mEdge Cases[2m > [22mhandles very long project descriptions
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m666:35[22m[39m
    [90m664| [39m
    [90m665| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m666| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m667| [39m
    [90m668| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[51/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mEdge Cases[2m > [22mhandles special characters in project name and description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m687:35[22m[39m
    [90m685| [39m
    [90m686| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m687| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m688| [39m
    [90m689| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[52/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/projects/route.test.ts[2m > [22mProjects API Route[2m > [22mEdge Cases[2m > [22mhandles unicode characters in project name and description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/projects/route.test.ts:[2m709:35[22m[39m
    [90m707| [39m
    [90m708| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m709| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m710| [39m
    [90m711| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[53/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mGET /api/stories[2m > [22mfetches stories for a specific day successfully
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m112:31[22m[39m
    [90m110| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m111| [39m
    [90m112| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m113| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m114| [39m      [34mexpect[39m(data[33m.[39mdata)[33m.[39m[34mtoHaveLength[39m([34m3[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[54/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mGET /api/stories[2m > [22mreturns 400 when day parameter is missing
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m124:35[22m[39m
    [90m122| [39m
    [90m123| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m124| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m125| [39m
    [90m126| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[55/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mGET /api/stories[2m > [22mreturns 400 when day parameter has invalid format
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m138:35[22m[39m
    [90m136| [39m
    [90m137| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m138| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m139| [39m
    [90m140| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[56/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mGET /api/stories[2m > [22mreturns empty array when no stories exist for the day
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m154:35[22m[39m
    [90m152| [39m
    [90m153| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m154| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m155| [39m
    [90m156| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[57/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mGET /api/stories[2m > [22mhandles edge case dates correctly
[31m[1mAssertionError[22m: expected undefined to be 200 // Object.is equality[39m

[32m- Expected:[39m 
200

[31m+ Received:[39m 
undefined

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m187:31[22m[39m
    [90m185| [39m
    [90m186| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m187| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m188| [39m
    [90m189| [39m      expect(StoryService.getStoriesByDay).toHaveBeenCalledWith('2024-‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[58/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates a story successfully with all fields
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m235:31[22m[39m
    [90m233| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m234| [39m
    [90m235| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m236| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m237| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[59/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates a story with minimal required fields
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m293:31[22m[39m
    [90m291| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m292| [39m
    [90m293| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m294| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m295| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[60/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcalculates order automatically when not provided
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m347:31[22m[39m
    [90m345| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m346| [39m
    [90m347| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m348| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m349| [39m      expect(data.data.order).toBe(0); // API defaults to 0 when order‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[61/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates story with non-existent projectId (API allows it)
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m484:31[22m[39m
    [90m482| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m483| [39m
    [90m484| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m485| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m486| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[62/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates story with non-existent storyTypeId (API allows it)
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m518:31[22m[39m
    [90m516| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m517| [39m
    [90m518| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m519| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m520| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[63/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates story with order (API allows duplicate orders)
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m552:31[22m[39m
    [90m550| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m551| [39m
    [90m552| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m553| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m554| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[64/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mtrims whitespace from text fields
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m593:31[22m[39m
    [90m591| [39m
    [90m592| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m593| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m594| [39m
    [90m595| [39m      [34mexpect[39m([33mStoryService[39m[33m.[39mcreateStory)[33m.[39m[34mtoHaveBeenCalledWith[39m({

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[65/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mcreates story successfully (no database errors)
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m635:31[22m[39m
    [90m633| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m634| [39m
    [90m635| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m636| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m637| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mid)[33m.[39m[34mtoBe[39m(mockCreatedStory[33m.[39mid)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[66/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/route.test.ts[2m > [22mStories API Route[2m > [22mPOST /api/stories[2m > [22mhandles edge case dates correctly
[31m[1mAssertionError[22m: expected 400 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/route.test.ts:[2m673:31[22m[39m
    [90m671| [39m
    [90m672| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m673| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m674| [39m
    [90m675| [39m      [34mexpect[39m([33mStoryService[39m[33m.[39mcreateStory)[33m.[39m[34mtoHaveBeenCalledWith[39m({

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[67/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mreturns all tasks when no query parameters
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m177:35[22m[39m
    [90m175| [39m      const request = new NextRequest('http://localhost:3000/api/tasks‚Ä¶
    [90m176| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m177| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m178| [39m
    [90m179| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[68/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mfilters tasks by projectId
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m195:35[22m[39m
    [90m193| [39m      )[33m;[39m
    [90m194| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m195| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m196| [39m
    [90m197| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[69/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mfilters tasks by assignedTo user ID
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m220:35[22m[39m
    [90m218| [39m      )[33m;[39m
    [90m219| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m220| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m221| [39m
    [90m222| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[70/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mfilters tasks by assignedTo=me for current user
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m242:35[22m[39m
    [90m240| [39m      )[33m;[39m
    [90m241| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m242| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m243| [39m
    [90m244| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[71/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mcombines multiple filters correctly
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m264:35[22m[39m
    [90m262| [39m      )[33m;[39m
    [90m263| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m264| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m265| [39m
    [90m266| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[72/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mhandles empty results gracefully
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m333:35[22m[39m
    [90m331| [39m      const request = new NextRequest('http://localhost:3000/api/tasks‚Ä¶
    [90m332| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m333| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m334| [39m
    [90m335| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[73/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mGET /api/tasks[2m > [22mincludes correct project and user data in response
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m359:35[22m[39m
    [90m357| [39m      const request = new NextRequest('http://localhost:3000/api/tasks‚Ä¶
    [90m358| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m359| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m360| [39m
    [90m361| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mdata[[34m0[39m][33m.[39mproject)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[74/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task successfully with valid data
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m403:35[22m[39m
    [90m401| [39m
    [90m402| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m403| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m404| [39m
    [90m405| [39m      console[33m.[39m[34mlog[39m([32m'Response status:'[39m[33m,[39m response[33m.[39mstatus)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[75/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task with minimal required data
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m430:35[22m[39m
    [90m428| [39m
    [90m429| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m430| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m431| [39m
    [90m432| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[76/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mtrims whitespace from title and description
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m453:35[22m[39m
    [90m451| [39m
    [90m452| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m453| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m454| [39m
    [90m455| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[77/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task without projectId when not provided
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m568:35[22m[39m
    [90m566| [39m
    [90m567| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m568| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m569| [39m
    [90m570| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[78/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task with non-string projectId (converts to string)
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m589:35[22m[39m
    [90m587| [39m
    [90m588| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m589| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m590| [39m
    [90m591| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[79/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task with null projectId
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m609:35[22m[39m
    [90m607| [39m
    [90m608| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m609| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m610| [39m
    [90m611| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[80/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mreturns 404 when project does not exist
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m633:35[22m[39m
    [90m631| [39m
    [90m632| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m633| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m634| [39m
    [90m635| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[81/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task without assignee when assigneeId is not provided
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m653:35[22m[39m
    [90m651| [39m
    [90m652| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m653| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m654| [39m
    [90m655| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[82/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task with null description when description is not provided
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m672:35[22m[39m
    [90m670| [39m
    [90m671| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m672| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m673| [39m
    [90m674| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[83/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22mcreates task with empty string description converted to null
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m692:35[22m[39m
    [90m690| [39m
    [90m691| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m692| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m693| [39m
    [90m694| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[84/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mPOST /api/tasks[2m > [22msets default status and priority correctly
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m789:35[22m[39m
    [90m787| [39m
    [90m788| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m789| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m790| [39m
    [90m791| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[85/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mEdge Cases and Validation[2m > [22mhandles very long task descriptions
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m854:35[22m[39m
    [90m852| [39m
    [90m853| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m854| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m855| [39m
    [90m856| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[86/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mEdge Cases and Validation[2m > [22mhandles special characters in task data
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m877:35[22m[39m
    [90m875| [39m
    [90m876| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m877| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m878| [39m
    [90m879| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[87/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/tasks/route.test.ts[2m > [22mTasks API Route[2m > [22mEdge Cases and Validation[2m > [22mhandles unicode characters in task data
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/tasks/route.test.ts:[2m901:35[22m[39m
    [90m899| [39m
    [90m900| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m901| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m902| [39m
    [90m903| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[88/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/users/route.test.ts[2m > [22mUsers API Route[2m > [22mGET /api/users[2m > [22mreturns users list for admin users
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/users/route.test.ts:[2m103:35[22m[39m
    [90m101| [39m      const request = new NextRequest('http://localhost:3000/api/users‚Ä¶
    [90m102| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m103| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m104| [39m
    [90m105| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[89/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/users/route.test.ts[2m > [22mUsers API Route[2m > [22mGET /api/users[2m > [22mreturns users list for manager users
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/users/route.test.ts:[2m130:35[22m[39m
    [90m128| [39m      const request = new NextRequest('http://localhost:3000/api/users‚Ä¶
    [90m129| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m(request)[33m;[39m
    [90m130| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m131| [39m
    [90m132| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[90/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/users/route.test.ts[2m > [22mUsers API Route[2m > [22mPOST /api/users[2m > [22mcreates a new user successfully
[31m[1mTypeError[22m: response.json is not a function[39m
[36m [2m‚ùØ[22m src/app/api/users/route.test.ts:[2m189:35[22m[39m
    [90m187| [39m
    [90m188| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(request)[33m;[39m
    [90m189| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m190| [39m
    [90m191| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[91/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/components/ui/button/Button.test.tsx[2m > [22mButton Component[2m > [22mrenders with different sizes
[31m[1mAssertionError[22m: expected 'inline-flex items-center justify-cent‚Ä¶' to contain 'h-10'[39m

Expected: [32m"h-10"[39m
Received: [31m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-11 rounded-md px-8 min-h-[44px] min-w-[44px]"[39m

[36m [2m‚ùØ[22m src/components/ui/button/Button.test.tsx:[2m57:30[22m[39m
    [90m 55| [39m    button [33m=[39m screen[33m.[39m[34mgetByRole[39m([32m'button'[39m)[33m;[39m
    [90m 56| [39m    [90m// The large size includes h-10 and px-6 classes[39m
    [90m 57| [39m    [34mexpect[39m(button[33m.[39mclassName)[33m.[39m[34mtoContain[39m([32m'h-10'[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 58| [39m    [34mexpect[39m(button[33m.[39mclassName)[33m.[39m[34mtoContain[39m([32m'px-6'[39m)[33m;[39m
    [90m 59| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[92/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/lib/performance/__tests__/simple-monitor.test.ts[2m > [22mSimplePerformanceMonitor[2m > [22mError Handling[2m > [22mshould handle missing performance.memory gracefully
[31m[1mAssertionError[22m: expected 52428800 to be +0 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 0[39m
[31m+ 52428800[39m

[36m [2m‚ùØ[22m src/lib/performance/__tests__/simple-monitor.test.ts:[2m110:34[22m[39m
    [90m108| [39m      simplePerformanceMonitor[33m.[39m[34mstartMonitoring[39m()[33m;[39m
    [90m109| [39m      [35mconst[39m metrics [33m=[39m simplePerformanceMonitor[33m.[39m[34mgetMetrics[39m()[33m;[39m
    [90m110| [39m      [34mexpect[39m(metrics[33m.[39mmemoryUsed)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m111| [39m    })[33m;[39m
    [90m112| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[93/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/[storyId]/route.test.ts[2m > [22mIndividual Story API Route[2m > [22mPATCH /api/stories/[storyId][2m > [22mreturns 404 when story does not exist
[31m[1mAssertionError[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality[39m

Expected: [32m"[7mResource[27m not found"[39m
Received: [31m"[7mStory not found[27m not found"[39m

[36m [2m‚ùØ[22m src/app/api/stories/[storyId]/route.test.ts:[2m302:34[22m[39m
    [90m300| [39m
    [90m301| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)[33m;[39m
    [90m302| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Resource not found'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m303| [39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI‚Ä¶
    [90m304| [39m    })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[94/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/[storyId]/route.test.ts[2m > [22mIndividual Story API Route[2m > [22mPATCH /api/stories/[storyId][2m > [22mreturns 404 when storyTypeId does not exist
[31m[1mAssertionError[22m: expected 'Story type not found not found' to be 'Resource not found' // Object.is equality[39m

Expected: [32m"[7mResource[27m not found"[39m
Received: [31m"[7mStory type not found[27m not found"[39m

[36m [2m‚ùØ[22m src/app/api/stories/[storyId]/route.test.ts:[2m339:34[22m[39m
    [90m337| [39m
    [90m338| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)[33m;[39m
    [90m339| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Resource not found'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m340| [39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI‚Ä¶
    [90m341| [39m    })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[95/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/[storyId]/route.test.ts[2m > [22mIndividual Story API Route[2m > [22mPATCH /api/stories/[storyId][2m > [22mreturns 400 when title is empty string
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/[storyId]/route.test.ts:[2m364:31[22m[39m
    [90m362| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m363| [39m
    [90m364| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m365| [39m      expect(data.error.message).toBe('Validation failed: title cannot‚Ä¶
    [90m366| [39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[96/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/[storyId]/route.test.ts[2m > [22mIndividual Story API Route[2m > [22mPATCH /api/stories/[storyId][2m > [22mreturns 400 when title is only whitespace
[31m[1mAssertionError[22m: expected 400 to be 500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 500[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/app/api/stories/[storyId]/route.test.ts:[2m390:31[22m[39m
    [90m388| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m389| [39m
    [90m390| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m391| [39m      expect(data.error.message).toBe('Validation failed: title cannot‚Ä¶
    [90m392| [39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[97/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/stories/[storyId]/route.test.ts[2m > [22mIndividual Story API Route[2m > [22mDELETE /api/stories/[storyId][2m > [22mreturns 404 when story does not exist
[31m[1mAssertionError[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality[39m

Expected: [32m"[7mResource[27m not found"[39m
Received: [31m"[7mStory not found[27m not found"[39m

[36m [2m‚ùØ[22m src/app/api/stories/[storyId]/route.test.ts:[2m535:34[22m[39m
    [90m533| [39m
    [90m534| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m404[39m)[33m;[39m
    [90m535| [39m      [34mexpect[39m(data[33m.[39merror[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Resource not found'[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m536| [39m      expect(mockStoryService.deleteStory).toHaveBeenCalledWith(storyI‚Ä¶
    [90m537| [39m    })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[98/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/admin/attendance/stats/route.test.ts[2m > [22mAdmin Attendance Stats API Route[2m > [22mGET /api/admin/attendance/stats[2m > [22mreturns attendance statistics for admin users
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/admin/attendance/stats/route.test.ts:[2m106:31[22m[39m
    [90m104| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m105| [39m
    [90m106| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m107| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m108| [39m      [34mexpect[39m(data[33m.[39mdata)[33m.[39m[34mtoHaveProperty[39m([32m'today'[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[99/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/admin/attendance/stats/route.test.ts[2m > [22mAdmin Attendance Stats API Route[2m > [22mGET /api/admin/attendance/stats[2m > [22mcalculates correct today statistics
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/admin/attendance/stats/route.test.ts:[2m118:31[22m[39m
    [90m116| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m119| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m120| [39m      

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[100/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/admin/attendance/stats/route.test.ts[2m > [22mAdmin Attendance Stats API Route[2m > [22mGET /api/admin/attendance/stats[2m > [22mcalculates average clock-in time correctly
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/admin/attendance/stats/route.test.ts:[2m180:31[22m[39m
    [90m178| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m179| [39m
    [90m180| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m181| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m182| [39m      

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[101/113]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/app/api/admin/attendance/stats/route.test.ts[2m > [22mAdmin Attendance Stats API Route[2m > [22mGET /api/admin/attendance/stats[2m > [22mhandles empty attendance records
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/app/api/admin/attendance/stats/route.test.ts:[2m195:31[22m[39m
    [90m193| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m194| [39m
    [90m195| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m196| [39m      [34mexpect[39m(data[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m197| [39m      [34mexpect[39m(data[33m.[39mdata[33m.[39mtoday[33m.[39mtotalEmployeesPresent)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[102/113]‚éØ[22m[39m


                        </div>
                    
                </div>
            
                <div class="check-item success">
                    <div class="status">
                        ‚úÖ Accessibility Tests
                        <span class="duration">(4895ms)</span>
                    </div>
                    
                </div>
            
                <div class="check-item success">
                    <div class="status">
                        ‚úÖ Security Audit
                        <span class="duration">(589ms)</span>
                    </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå Console Statement Verification
                        <span class="duration">(18272ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> Command failed: npm run verify:no-console
                        </div>
                    
                </div>
            
                <div class="check-item error">
                    <div class="status">
                        ‚ùå Bundle Analysis
                        <span class="duration">(433ms)</span>
                    </div>
                    
                        <div class="error-details">
                            <strong>Error:</strong> Command failed: npm run build:analyze-bundle
'ANALYZE' is not recognized as an internal or external command,
operable program or batch file.

                        </div>
                    
                </div>
            
                <div class="check-item success">
                    <div class="status">
                        ‚úÖ Performance Monitoring
                        <span class="duration">(31770ms)</span>
                    </div>
                    
                </div>
            
        </div>
    </div>
</body>
</html>