{
  "timestamp": "2025-10-09T10-19-35-509Z",
  "duration": 117385,
  "summary": {
    "total": 10,
    "passed": 4,
    "failed": 6,
    "critical": 4,
    "warnings": 0
  },
  "checks": [
    {
      "id": "prerequisites",
      "name": "Prerequisites Check",
      "success": true,
      "duration": 64,
      "output": "Checking prerequisites...\n",
      "critical": true
    },
    {
      "id": "type-check",
      "name": "TypeScript Type Checking",
      "success": false,
      "duration": 5572,
      "error": "Command failed: npm run type-check",
      "critical": true
    },
    {
      "id": "lint",
      "name": "ESLint Code Analysis",
      "success": false,
      "duration": 17656,
      "error": "Command failed: npm run lint",
      "critical": true
    },
    {
      "id": "format-check",
      "name": "Code Formatting Check",
      "success": false,
      "duration": 7032,
      "error": "spawnSync C:\\WINDOWS\\system32\\cmd.exe ENOBUFS",
      "critical": false
    },
    {
      "id": "unit-tests",
      "name": "Unit Tests",
      "success": false,
      "duration": 31008,
      "error": "Command failed: npm run test:unit\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould handle error when handleError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.150Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.153Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 401 when user is not authenticated\n\u001b[22m\u001b[39mAPI route error: AuthenticationError: Authentication required\n    at getUsers \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:35:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:142:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m401\u001b[39m,\n  errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:20:11.155Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthenticationError'\u001b[39m,\n    message: \u001b[32m'Authentication required'\u001b[39m,\n    statusCode: \u001b[33m401\u001b[39m,\n    errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:20:11.155Z'\u001b[39m,\n    stack: \u001b[32m'AuthenticationError: Authentication required\\n'\u001b[39m +\n      \u001b[32m'    at getUsers (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:35:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:142:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHENTICATION'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.160Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 403 when user does not have required role\n\u001b[22m\u001b[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n    at getUsers \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:41:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:161:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m403\u001b[39m,\n  errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:20:11.178Z\u001b[39m\n}\nHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthorizationError'\u001b[39m,\n    message: \u001b[32m'Insufficient permissions. ADMIN or MANAGER role required.'\u001b[39m,\n    statusCode: \u001b[33m403\u001b[39m,\n    errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:20:11.178Z'\u001b[39m,\n    stack: \u001b[32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\\n'\u001b[39m +\n      \u001b[32m'    at getUsers (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:41:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:161:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHORIZATION'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.180Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould handle async error when handleAsyncError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'fn is not a function'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'fn is not a function'\u001b[39m,\n      stack: \u001b[32m'Error: fn is not a function\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:133:31\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:60:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.214Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: fn is not a function\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:133:31\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:60:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.214Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mvalidates required fields\n\u001b[22m\u001b[39mAPI route error: Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\n    at validateCreateDTO \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\types\\validation.ts:110:13\u001b[90m)\u001b[39m\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:90:26\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:221:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m\"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\"\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m\"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\"\u001b[39m,\n      stack: \u001b[32m\"Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\\n\"\u001b[39m +\n        \u001b[32m'    at validateCreateDTO (F:\\\\shabra-os-v1\\\\src\\\\types\\\\validation.ts:110:13)\\n'\u001b[39m +\n        \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:90:26)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:221:24\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.217Z'\u001b[39m,\n    stack: \u001b[32m\"InternalServerError: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\\n\"\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:33:33)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:221:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.219Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mprevents duplicate email addresses\n\u001b[22m\u001b[39mAPI route error: ConflictError: User with this email already exists\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:98:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:244:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m409\u001b[39m,\n  errorCode: \u001b[32m'RESOURCE_ALREADY_EXISTS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: { email: \u001b[32m'charlie@example.com'\u001b[39m },\n  timestamp: \u001b[35m2025-10-09T10:20:11.232Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'ConflictError'\u001b[39m,\n    message: \u001b[32m'User with this email already exists'\u001b[39m,\n    statusCode: \u001b[33m409\u001b[39m,\n    errorCode: \u001b[32m'RESOURCE_ALREADY_EXISTS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { email: \u001b[32m'charlie@example.com'\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.232Z'\u001b[39m,\n    stack: \u001b[32m'ConflictError: User with this email already exists\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:98:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:244:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'CONFLICT'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.233Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 401 when user is not authenticated\n\u001b[22m\u001b[39mAPI route error: AuthenticationError: Authentication required\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:79:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:264:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m401\u001b[39m,\n  errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:20:11.240Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthenticationError'\u001b[39m,\n    message: \u001b[32m'Authentication required'\u001b[39m,\n    statusCode: \u001b[33m401\u001b[39m,\n    errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:20:11.240Z'\u001b[39m,\n    stack: \u001b[32m'AuthenticationError: Authentication required\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:79:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:264:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHENTICATION'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.242Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 403 when user does not have required role\n\u001b[22m\u001b[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:85:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:290:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m403\u001b[39m,\n  errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:20:11.258Z\u001b[39m\n}\nHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthorizationError'\u001b[39m,\n    message: \u001b[32m'Insufficient permissions. ADMIN or MANAGER role required.'\u001b[39m,\n    statusCode: \u001b[33m403\u001b[39m,\n    errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:20:11.258Z'\u001b[39m,\n    stack: \u001b[32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:85:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:290:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHORIZATION'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.259Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould clear error when clearError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.279Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.279Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould clear all errors when clearAllErrors is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.306Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.307Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.313Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.313Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould retry error when retryError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:11.347Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:11.347Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/(main)/login/page.test.tsx\u001b[2m > \u001b[22m\u001b[2mLoginPage\u001b[2m > \u001b[22m\u001b[2mrenders login form with all required elements\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould retry all errors when retryAllErrors is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:12.429Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:12.429Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:12.437Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:12.437Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould filter errors by type\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:13.478Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:13.479Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:13.483Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:13.483Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould filter errors by severity\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:13.507Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:13.508Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould identify retryable errors\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:13.542Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:13.542Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22m\u001b[2mSimplePerformanceMonitor\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle PerformanceObserver errors gracefully\n\u001b[22m\u001b[39mLCP monitoring not supported\nFID monitoring not supported\nCLS monitoring not supported\nFCP monitoring not supported\n\n\u001b[90mstderr\u001b[2m | src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22m\u001b[2mSimplePerformanceMonitor\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle missing performance.memory gracefully\n\u001b[22m\u001b[39mTTFB monitoring failed\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle token validation errors gracefully\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Token validation failed'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Token validation failed'\u001b[39m,\n      stack: \u001b[32m'Error: Token validation failed\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:337:38\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:14.778Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Token validation failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at middlewareHandler (F:\\\\shabra-os-v1\\\\src\\\\middleware.ts:238:25)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:16:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:339:7\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:14.782Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle token validation errors gracefully\n\u001b[22m\u001b[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function\n    at ErrorHandler.createErrorResponse \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:376:25\u001b[90m)\u001b[39m\n    at ErrorHandler.handleError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:99:27\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Function.logError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:194:7\u001b[90m)\u001b[39m\n    at middlewareHandler \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\middleware.ts:238:7\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:16:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\middleware.advanced-security.test.ts:339:7\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle session validation errors for page routes\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Session validation failed'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Session validation failed'\u001b[39m,\n      stack: \u001b[32m'Error: Session validation failed\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:352:38\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:14.796Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Session validation failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at middlewareHandler (F:\\\\shabra-os-v1\\\\src\\\\middleware.ts:341:23)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:16:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:354:22\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:14.797Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle session validation errors for page routes\n\u001b[22m\u001b[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function\n    at ErrorHandler.createErrorResponse \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:376:25\u001b[90m)\u001b[39m\n    at ErrorHandler.handleError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:99:27\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Function.logError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:194:7\u001b[90m)\u001b[39m\n    at middlewareHandler \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\middleware.ts:341:5\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:16:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\middleware.advanced-security.test.ts:354:22\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StorySlot.test.tsx\u001b[2m > \u001b[22m\u001b[2mStorySlot\u001b[2m > \u001b[22m\u001b[2mrenders story slot with story content when story exists\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/CreateStoryDialog.test.tsx\u001b[2m > \u001b[22m\u001b[2mCreateStoryDialog\u001b[2m > \u001b[22m\u001b[2mrenders the dialog when open\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould render error UI when child throws an error\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould show error details in development mode\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould hide error details in production mode\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould call onError callback when error occurs\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould retry when retry button is clicked\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\nError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould disable retry button when max retries reached\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould reset when resetKeys change\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould render custom fallback when provided\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould report error when report button is clicked\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mwithErrorBoundary HOC\u001b[2m > \u001b[22m\u001b[2mshould wrap component with error boundary\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould have proper ARIA attributes\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould trap focus when open\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould close on Escape key\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/app/api/wiki/route.test.ts\u001b[2m > \u001b[22m\u001b[2mWiki API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/wiki\u001b[2m > \u001b[22m\u001b[2mhandles database errors gracefully\n\u001b[22m\u001b[39m[WIKI API] Database query failed: DatabaseError [AppError]: Database error\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\wiki\\route.test.ts:338:9\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m500\u001b[39m,\n  code: \u001b[32m'DATABASE_ERROR'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize generic Error\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Generic error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Generic error'\u001b[39m,\n      stack: \u001b[32m'Error: Generic error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:453:21\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:23.256Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Generic error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:454:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:23.258Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize Prisma errors\n\u001b[22m\u001b[39mMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'ConflictError'\u001b[39m,\n    message: \u001b[32m'Resource already exists'\u001b[39m,\n    statusCode: \u001b[33m409\u001b[39m,\n    errorCode: \u001b[32m'DUPLICATE_ENTRY'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { prismaCode: \u001b[32m'P2002'\u001b[39m, target: \u001b[36m[Array]\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:20:23.266Z'\u001b[39m,\n    stack: \u001b[32m'ConflictError: Resource already exists\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handlePrismaError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:218:16)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:165:19)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:469:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)'\u001b[39m\n  },\n  category: \u001b[32m'CONFLICT'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:23.267Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize network errors\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'NetworkError'\u001b[39m,\n    message: \u001b[32m'Network request failed'\u001b[39m,\n    statusCode: \u001b[33m502\u001b[39m,\n    errorCode: \u001b[32m'NETWORK_ERROR'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: {\n      originalError: \u001b[32m'FetchError'\u001b[39m,\n      message: \u001b[32m'Network request failed'\u001b[39m,\n      stack: \u001b[90mundefined\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:23.271Z'\u001b[39m,\n    stack: \u001b[32m'NetworkError: Network request failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:185:14)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:482:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:23.272Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Response Creation\u001b[2m > \u001b[22m\u001b[2mshould add retry-after header for rate limit errors\n\u001b[22m\u001b[39mHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'RateLimitError'\u001b[39m,\n    message: \u001b[32m'Too many requests'\u001b[39m,\n    statusCode: \u001b[33m429\u001b[39m,\n    errorCode: \u001b[32m'RATE_LIMIT_EXCEEDED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { retryAfter: \u001b[33m900\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:20:23.281Z'\u001b[39m,\n    stack: \u001b[32m'RateLimitError: Too many requests\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:527:21\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n      \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n  },\n  category: \u001b[32m'RATE_LIMIT'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:23.282Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mSuccess Responses\u001b[2m > \u001b[22m\u001b[2mshould create success response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:571:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mSuccess Responses\u001b[2m > \u001b[22m\u001b[2mshould create paginated response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:605:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create validation error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:627:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create authentication error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:643:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create authorization error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:658:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create not found error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:673:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create conflict error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:688:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create rate limit error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:704:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create internal server error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:719:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create service unavailable error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:734:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mAPI Error Handling\u001b[2m > \u001b[22m\u001b[2mshould handle API errors\n\u001b[22m\u001b[39mAPI route error: ValidationError: Invalid input\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:854:15\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:20\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:866:30\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m {\n  statusCode: \u001b[33m400\u001b[39m,\n  errorCode: \u001b[32m'VALIDATION_FAILED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: { field: \u001b[90mundefined\u001b[39m },\n  timestamp: \u001b[35m2025-10-09T10:20:23.347Z\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mAPI Error Handling\u001b[2m > \u001b[22m\u001b[2mshould handle unknown errors\n\u001b[22m\u001b[39mAPI route error: Error: Unknown error\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:872:15\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:20\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:884:30\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Unknown error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Unknown error'\u001b[39m,\n      stack: \u001b[32m'Error: Unknown error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:872:15\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:20\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:884:30\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:20:23.352Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Unknown error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:33:33\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:884:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:20:23.352Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mError Recovery\u001b[2m > \u001b[22m\u001b[2mshould use fallback when primary operation fails\n\u001b[22m\u001b[39mPrimary operation failed, using fallback: Error: Primary failed\n    at primary \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:907:15\u001b[90m)\u001b[39m\n    at Function.withFallback \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:267:20\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:911:42\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n    at runSuite \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StoryCard.test.tsx\u001b[2m > \u001b[22m\u001b[2mStoryCard\u001b[2m > \u001b[22m\u001b[2mhandles delete with empty id gracefully\n\u001b[22m\u001b[39mError: Not implemented: window.confirm\n    at module.exports (F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\not-implemented.js:9:17)\n    at F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\Window.js:960:7\n    at handleDelete (F:\\shabra-os-v1\\src\\components\\storyboard\\StoryCard.tsx:43:9)\n    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n    at dispatchEvent (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11) \u001b[90mundefined\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StoryCard.test.tsx\u001b[2m > \u001b[22m\u001b[2mStoryCard\u001b[2m > \u001b[22m\u001b[2mhandles delete with whitespace id gracefully\n\u001b[22m\u001b[39mError: Not implemented: window.confirm\n    at module.exports (F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\not-implemented.js:9:17)\n    at F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\Window.js:960:7\n    at handleDelete (F:\\shabra-os-v1\\src\\components\\storyboard\\StoryCard.tsx:43:9)\n    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n    at dispatchEvent (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11) \u001b[90mundefined\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/lib/validation/__tests__/component-props.test.ts\u001b[2m > \u001b[22m\u001b[2mvalidateComponentProps\u001b[2m > \u001b[22m\u001b[2mshould throw error in development for invalid props\n\u001b[22m\u001b[39m[TestComponent] Invalid props: [ \u001b[32m'title: Title is required'\u001b[39m ]\n\n\n\u001b[31m\u001b[39m\u001b[1m\u001b[41m Failed Tests 113 \u001b[49m\u001b[22m\u001b[31m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould implement brute force protection for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { next: true, headers: Map{ (8) } } to deeply equal ObjectContaining {\"status\": 429}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 429,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"X-Frame-Options\" => \"DENY\",\u001b[39m\n\u001b[31m+     \"X-Content-Type-Options\" => \"nosniff\",\u001b[39m\n\u001b[31m+     \"Referrer-Policy\" => \"strict-origin-when-cross-origin\",\u001b[39m\n\u001b[31m+     \"X-XSS-Protection\" => \"1; mode=block\",\u001b[39m\n\u001b[31m+     \"X-DNS-Prefetch-Control\" => \"off\",\u001b[39m\n\u001b[31m+     \"Permissions-Policy\" => \"camera=(), microphone=(), geolocation=(), interest-cohort=()\",\u001b[39m\n\u001b[31m+     \"Strict-Transport-Security\" => \"max-age=31536000; includeSubDomains; preload\",\u001b[39m\n\u001b[31m+     \"Content-Security-Policy\" => \"default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"next\": true,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m168:22\u001b[22m\u001b[39m\n    \u001b[90m166| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m167| \u001b[39m\n    \u001b[90m168| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ status\u001b[33m:\u001b[39m \u001b[34m429\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m169| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39mheaders\u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m'Retry-After'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'900'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m170| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mAuditLogger\u001b[39m\u001b[33m.\u001b[39mlogSecurityEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n\n\u001b[31m\u001b[2m[1/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould block IP after excessive brute force attempts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1', (2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m190:45\u001b[22m\u001b[39m\n    \u001b[90m188| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m189| \u001b[39m\n    \u001b[90m190| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mIPManagement\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mblockIP)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m   | \u001b[39m                                            \u001b[31m^\u001b[39m\n    \u001b[90m191| \u001b[39m        \u001b[32m'127.0.0.1'\u001b[39m\u001b[33m,\u001b[39m\n    \u001b[90m192| \u001b[39m        \u001b[32m'Excessive brute force attempts'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[2/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould record failed attempts for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m203:65\u001b[22m\u001b[39m\n    \u001b[90m201| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m202| \u001b[39m\n    \u001b[90m203| \u001b[39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave\n    \u001b[90m   | \u001b[39m                                                                \u001b[31m^\u001b[39m\n    \u001b[90m204| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m205| \u001b[39m        \u001b[32m'LOGIN_FAILURE'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[3/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould record successful attempts for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m222:69\u001b[22m\u001b[39m\n    \u001b[90m220| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m221| \u001b[39m\n    \u001b[90m222| \u001b[39m      expect((BruteForceProtection as any).recordSuccessfulAttempt).to\n    \u001b[90m   | \u001b[39m                                                                    \u001b[31m^\u001b[39m\n    \u001b[90m223| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m224| \u001b[39m        \u001b[32m'LOGIN_SUCCESS'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[4/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mProgressive Delays\u001b[2m > \u001b[22mshould implement progressive delays for failed attempts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 0 to be greater than 1000\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m301:35\u001b[22m\u001b[39m\n    \u001b[90m299| \u001b[39m\n    \u001b[90m300| \u001b[39m      \u001b[90m// Should have some delay (allowing for test execution time)\u001b[39m\n    \u001b[90m301| \u001b[39m      \u001b[34mexpect\u001b[39m(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39m\u001b[34mtoBeGreaterThan\u001b[39m(\u001b[34m1000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m302| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m303| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[5/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mLogin Page Protection\u001b[2m > \u001b[22mshould protect login page from brute force attacks\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { next: true, headers: Map{ (8) } } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"X-Frame-Options\" => \"DENY\",\u001b[39m\n\u001b[31m+     \"X-Content-Type-Options\" => \"nosniff\",\u001b[39m\n\u001b[31m+     \"Referrer-Policy\" => \"strict-origin-when-cross-origin\",\u001b[39m\n\u001b[31m+     \"X-XSS-Protection\" => \"1; mode=block\",\u001b[39m\n\u001b[31m+     \"X-DNS-Prefetch-Control\" => \"off\",\u001b[39m\n\u001b[31m+     \"Permissions-Policy\" => \"camera=(), microphone=(), geolocation=(), interest-cohort=()\",\u001b[39m\n\u001b[31m+     \"Strict-Transport-Security\" => \"max-age=31536000; includeSubDomains; preload\",\u001b[39m\n\u001b[31m+     \"Content-Security-Policy\" => \"default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"next\": true,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m316:22\u001b[22m\u001b[39m\n    \u001b[90m314| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m315| \u001b[39m\n    \u001b[90m316| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m317| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'error=Too many attempts'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m318| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[6/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mLogin Page Protection\u001b[2m > \u001b[22mshould redirect to login with error message for locked accounts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m330:26\u001b[22m\u001b[39m\n    \u001b[90m328| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m329| \u001b[39m\n    \u001b[90m330| \u001b[39m      expect(result.url).toContain('error=Too many attempts. Please tr\n    \u001b[90m   | \u001b[39m                         \u001b[31m^\u001b[39m\n    \u001b[90m331| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m332| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[7/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould handle token validation errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m341:65\u001b[22m\u001b[39m\n    \u001b[90m339| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m340| \u001b[39m\n    \u001b[90m341| \u001b[39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave\n    \u001b[90m   | \u001b[39m                                                                \u001b[31m^\u001b[39m\n    \u001b[90m342| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m343| \u001b[39m        \u001b[32m'LOGIN_FAILURE'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[8/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mredirects to login for protected pages when not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m247:22\u001b[22m\u001b[39m\n    \u001b[90m245| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m246| \u001b[39m\n    \u001b[90m247| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m248| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m249| \u001b[39m\n\n\u001b[31m\u001b[2m[9/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mallows access to protected pages when authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m260:22\u001b[22m\u001b[39m\n    \u001b[90m258| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m259| \u001b[39m\n    \u001b[90m260| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m261| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m262| \u001b[39m\n\n\u001b[31m\u001b[2m[10/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mreturns 401 for protected API routes when not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m269:22\u001b[22m\u001b[39m\n    \u001b[90m267| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m268| \u001b[39m\n    \u001b[90m269| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m270| \u001b[39m        expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m271| \u001b[39m          status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[11/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mallows access to protected API routes when authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m286:22\u001b[22m\u001b[39m\n    \u001b[90m284| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m285| \u001b[39m\n    \u001b[90m286| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m287| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m288| \u001b[39m\n\n\u001b[31m\u001b[2m[12/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mvalidates session token format\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m301:20\u001b[22m\u001b[39m\n    \u001b[90m299| \u001b[39m    \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m300| \u001b[39m\n    \u001b[90m301| \u001b[39m    \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                   \u001b[31m^\u001b[39m\n    \u001b[90m302| \u001b[39m      expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m303| \u001b[39m        status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[13/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mallows requests from trusted origins\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m320:22\u001b[22m\u001b[39m\n    \u001b[90m318| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m319| \u001b[39m\n    \u001b[90m320| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m321| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m322| \u001b[39m\n\n\u001b[31m\u001b[2m[14/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mOpen Redirect Protection\u001b[2m > \u001b[22mvalidates callback URL origin to prevent open redirects\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m352:22\u001b[22m\u001b[39m\n    \u001b[90m350| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m351| \u001b[39m\n    \u001b[90m352| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m353| \u001b[39m      \u001b[90m// Should not include the malicious callback URL\u001b[39m\n    \u001b[90m354| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'malicious.com'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[15/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mOpen Redirect Protection\u001b[2m > \u001b[22mincludes valid callback URLs\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m365:22\u001b[22m\u001b[39m\n    \u001b[90m363| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m364| \u001b[39m\n    \u001b[90m365| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m366| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'callbackUrl='\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m367| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[16/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mhandles token validation errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m377:22\u001b[22m\u001b[39m\n    \u001b[90m375| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m376| \u001b[39m\n    \u001b[90m377| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m378| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m379| \u001b[39m\n\n\u001b[31m\u001b[2m[17/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mhandles API token validation errors with 401\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m391:22\u001b[22m\u001b[39m\n    \u001b[90m389| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m390| \u001b[39m\n    \u001b[90m391| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m392| \u001b[39m        expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m393| \u001b[39m          status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[18/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to login page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m405:22\u001b[22m\u001b[39m\n    \u001b[90m403| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m404| \u001b[39m\n    \u001b[90m405| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m406| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m407| \u001b[39m\n\n\u001b[31m\u001b[2m[19/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to register page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m413:22\u001b[22m\u001b[39m\n    \u001b[90m411| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m412| \u001b[39m\n    \u001b[90m413| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m414| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m415| \u001b[39m\n\n\u001b[31m\u001b[2m[20/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to docs page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m421:22\u001b[22m\u001b[39m\n    \u001b[90m419| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m420| \u001b[39m\n    \u001b[90m421| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m422| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m423| \u001b[39m\n\n\u001b[31m\u001b[2m[21/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to health check API without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 403, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {},\u001b[39m\n\u001b[31m+   \"message\": \"Forbidden\",\u001b[39m\n\u001b[31m+   \"status\": 403,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m429:22\u001b[22m\u001b[39m\n    \u001b[90m427| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m428| \u001b[39m\n    \u001b[90m429| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m430| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m431| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[22/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/contexts/ErrorContext.test.tsx\u001b[2m > \u001b[22museErrorHandler hook\u001b[2m > \u001b[22mshould clear error when clearError is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  1\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/contexts/ErrorContext.test.tsx:\u001b[2m219:47\u001b[22m\u001b[39m\n    \u001b[90m217| \u001b[39m    \u001b[90m// Clear the error\u001b[39m\n    \u001b[90m218| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear Error'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m219| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m220| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m221| \u001b[39m\n\n\u001b[31m\u001b[2m[23/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould handle error when handleError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m131:39\u001b[22m\u001b[39m\n    \u001b[90m129| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m130| \u001b[39m\n    \u001b[90m131| \u001b[39m    \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mreportError)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                      \u001b[31m^\u001b[39m\n    \u001b[90m132| \u001b[39m    \u001b[34mexpect\u001b[39m(errorRecoveryManager\u001b[33m.\u001b[39mattemptRecovery)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m133| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[24/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould handle async error when handleAsyncError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m153:39\u001b[22m\u001b[39m\n    \u001b[90m151| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m152| \u001b[39m\n    \u001b[90m153| \u001b[39m    \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mreportError)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                      \u001b[31m^\u001b[39m\n    \u001b[90m154| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m155| \u001b[39m\n\n\u001b[31m\u001b[2m[25/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould clear error when clearError is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  1\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m169:47\u001b[22m\u001b[39m\n    \u001b[90m167| \u001b[39m    \u001b[90m// Clear the error\u001b[39m\n    \u001b[90m168| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear Error'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m169| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m170| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m171| \u001b[39m\n\n\u001b[31m\u001b[2m[26/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould clear all errors when clearAllErrors is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  2\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m186:47\u001b[22m\u001b[39m\n    \u001b[90m184| \u001b[39m    \u001b[90m// Clear all errors\u001b[39m\n    \u001b[90m185| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear All Errors'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m186| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m187| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m188| \u001b[39m\n\n\u001b[31m\u001b[2m[27/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould retry error when retryError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m1\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"is-online\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mtrue\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Async Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"network-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m1\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m206:40\u001b[22m\u001b[39m\n    \u001b[90m204| \u001b[39m\n    \u001b[90m205| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mwaitFor\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m206| \u001b[39m      \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mtrackRetry)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                       \u001b[31m^\u001b[39m\n    \u001b[90m207| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m208| \u001b[39m  })\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:\u001b[2m47:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m124:77\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m118:16\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m[28/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould retry all errors when retryAllErrors is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m2\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"is-online\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mtrue\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Async Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"network-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m2\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m228:40\u001b[22m\u001b[39m\n    \u001b[90m226| \u001b[39m\n    \u001b[90m227| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mwaitFor\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m228| \u001b[39m      \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mtrackRetry)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                       \u001b[31m^\u001b[39m\n    \u001b[90m229| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m230| \u001b[39m  })\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:\u001b[2m47:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m124:77\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m118:16\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m[29/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Features\u001b[2m > \u001b[22mAudit Logging\u001b[2m > \u001b[22mshould retrieve audit logs with filters\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected [] to deeply equal [ Array(2) ]\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- [\u001b[39m\n\u001b[32m-   {\u001b[39m\n\u001b[32m-     \"eventType\": \"LOGIN_SUCCESS\",\u001b[39m\n\u001b[32m-     \"id\": \"1\",\u001b[39m\n\u001b[32m-     \"riskLevel\": \"LOW\",\u001b[39m\n\u001b[32m-     \"timestamp\": 2025-10-09T10:20:14.461Z,\u001b[39m\n\u001b[32m-     \"userId\": \"user123\",\u001b[39m\n\u001b[32m-   },\u001b[39m\n\u001b[32m-   {\u001b[39m\n\u001b[32m-     \"eventType\": \"LOGIN_FAILURE\",\u001b[39m\n\u001b[32m-     \"id\": \"2\",\u001b[39m\n\u001b[32m-     \"riskLevel\": \"MEDIUM\",\u001b[39m\n\u001b[32m-     \"timestamp\": 2025-10-09T10:20:14.461Z,\u001b[39m\n\u001b[32m-     \"userId\": \"user456\",\u001b[39m\n\u001b[32m-   },\u001b[39m\n\u001b[32m- ]\u001b[39m\n\u001b[31m+ []\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/advanced-security.test.ts:\u001b[2m261:20\u001b[22m\u001b[39m\n    \u001b[90m259| \u001b[39m      })\u001b[33m;\u001b[39m\n    \u001b[90m260| \u001b[39m      \n    \u001b[90m261| \u001b[39m      \u001b[34mexpect\u001b[39m(logs)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(mockLogs)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                   \u001b[31m^\u001b[39m\n    \u001b[90m262| \u001b[39m      \u001b[34mexpect\u001b[39m(prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n    \u001b[90m263| \u001b[39m        where\u001b[33m:\u001b[39m {\n\n\u001b[31m\u001b[2m[30/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Features\u001b[2m > \u001b[22mIntegration Tests\u001b[2m > \u001b[22mshould handle complete brute force attack scenario\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected true to be false // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- false\u001b[39m\n\u001b[31m+ true\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/advanced-security.test.ts:\u001b[2m357:35\u001b[22m\u001b[39m\n    \u001b[90m355| \u001b[39m        \n    \u001b[90m356| \u001b[39m        \u001b[35mif\u001b[39m (i \u001b[33m<\u001b[39m \u001b[33mBRUTE_FORCE_CONFIG\u001b[39m\u001b[33m.\u001b[39mmaxAttempts) {\n    \u001b[90m357| \u001b[39m          \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39misLocked)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m358| \u001b[39m        } \u001b[35melse\u001b[39m {\n    \u001b[90m359| \u001b[39m          \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39misLocked)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[31/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoriesByDay\u001b[2m > \u001b[22mshould return stories for a valid date\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoriesByDay\u001b[2m > \u001b[22mshould throw error for invalid date format\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoryById\u001b[2m > \u001b[22mshould return story with related data for valid ID\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoryById\u001b[2m > \u001b[22mshould throw error when story not found\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mcreateStory\u001b[2m > \u001b[22mshould create story with valid data\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mcreateStory\u001b[2m > \u001b[22mshould handle old project ID conversion\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mupdateStory\u001b[2m > \u001b[22mshould update story with valid data\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mupdateStory\u001b[2m > \u001b[22mshould throw error when story not found for update\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mdeleteStory\u001b[2m > \u001b[22mshould delete story with valid ID\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mdeleteStory\u001b[2m > \u001b[22mshould throw error when story not found for deletion\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mreorderStories\u001b[2m > \u001b[22mshould reorder stories successfully\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mreorderStories\u001b[2m > \u001b[22mshould throw error when some stories not found\n\u001b[31m\u001b[1mTypeError\u001b[22m: mockProjectIdResolver.resolve.mockResolvedValue is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/services/story.service.test.ts:\u001b[2m64:35\u001b[22m\u001b[39m\n    \u001b[90m 62| \u001b[39m    vi\u001b[33m.\u001b[39m\u001b[34mclearAllMocks\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m 63| \u001b[39m    \u001b[90m// Set up default mock for ProjectIdResolver\u001b[39m\n    \u001b[90m 64| \u001b[39m    mockProjectIdResolver.resolve.mockResolvedValue('cmf5o9m110001u35c\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m 65| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m 66| \u001b[39m\n\n\u001b[31m\u001b[2m[32/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/(main)/login/page.test.tsx\u001b[2m > \u001b[22mLoginPage\u001b[2m > \u001b[22mrenders login form with all required elements\n\u001b[31m\u001b[1mTestingLibraryElementError\u001b[22m\u001b[39m: Unable to find an element with the text:    OS. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\nIgnored nodes: comments, script, style\n\u001b[36m<body>\u001b[39m\n  \u001b[36m<div>\u001b[39m\n    \u001b[36m<div\u001b[39m\n      \u001b[33manimate\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n      \u001b[33mclass\u001b[39m=\u001b[32m\"w-full max-w-md p-4\"\u001b[39m\n      \u001b[33minitial\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n      \u001b[33mstyle\u001b[39m=\u001b[32m\"will-change: transform, opacity;\"\u001b[39m\n      \u001b[33mtransition\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<div\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white/10 backdrop-blur-2xl border border-white/20 shadow-lg text-card-foreground flex flex-col gap-6 rounded-xl py-6 w-full max-w-md\"\u001b[39m\n        \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card\"\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"background: rgba(255, 255, 255, 0.95); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15),\n              0 8px 25px rgba(255, 10, 84, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.8);\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start rtl:items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-6 text-center\"\u001b[39m\n          \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-header\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"text-3xl font-bold text-foreground mb-3\"\u001b[39m\n            \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-title\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0m    \u001b[0m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<p\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"text-muted-foreground\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0m      \u001b[0m\n          \u001b[36m</p>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"px-6 space-y-6\"\u001b[39m\n          \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-content\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-4\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<label\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground\"\u001b[39m\n                \u001b[33mfor\u001b[39m=\u001b[32m\"email\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m\u001b[0m\n              \u001b[36m</label>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"email\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"example@email.com\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"email\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<label\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground\"\u001b[39m\n                \u001b[33mfor\u001b[39m=\u001b[32m\"password\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m \u001b[0m\n              \u001b[36m</label>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"     \"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-busy\u001b[39m=\u001b[32m\"false\"\u001b[39m\n              \u001b[33maria-disabled\u001b[39m=\u001b[32m\"false\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 h-10 px-4 py-2 w-full bg-[#ff0a54] hover:bg-[#ff0a54]/90 text-white shadow-lg hover:shadow-xl transition-all duration-200 min-h-[44px] min-w-[44px]\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"box-shadow: 0 8px 25px rgba(255, 10, 84, 0.3),\n                    inset 0 1px 0 rgba(255, 255, 255, 0.6);\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</form>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</div>\u001b[39m\n\u001b[36m</body>\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:\u001b[2m37:19\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m76:38\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m52:17\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m95:19\u001b[22m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/(main)/login/page.test.tsx:\u001b[2m52:19\u001b[22m\u001b[39m\n    \u001b[90m 50| \u001b[39m\n    \u001b[90m 51| \u001b[39m    \u001b[90m// Check for main title and description\u001b[39m\n    \u001b[90m 52| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'   OS'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoBeInTheDocument\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                  \u001b[31m^\u001b[39m\n    \u001b[90m 53| \u001b[39m    \u001b[34mexpect\u001b[39m(\n    \u001b[90m 54| \u001b[39m      screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'      '\u001b[39m)\n\n\u001b[31m\u001b[2m[33/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mreturns leave requests for authenticated user\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m79:31\u001b[22m\u001b[39m\n    \u001b[90m 77| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m 78| \u001b[39m\n    \u001b[90m 79| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m 80| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 81| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveLength\u001b[39m(\u001b[34m1\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[34/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mreturns 401 when user is not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mUnauthoriz\u001b[27med\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mAuthentication requir\u001b[27med\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m95:34\u001b[22m\u001b[39m\n    \u001b[90m 93| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m401\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 94| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 95| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Unauthorized'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m 96| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m 97| \u001b[39m\n\n\u001b[31m\u001b[2m[35/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mhandles database errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'An internal server error occurred' to be 'DB Error' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"DB Error\"\u001b[39m\nReceived: \u001b[31m\"An internal server error occurred\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m109:34\u001b[22m\u001b[39m\n    \u001b[90m107| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m108| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m109| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'DB Error'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m110| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m111| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[36/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mcreates a new leave request for authenticated user\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m133:31\u001b[22m\u001b[39m\n    \u001b[90m131| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m132| \u001b[39m\n    \u001b[90m133| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m134| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m135| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'leave-123'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[37/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mreturns 401 when user is not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mUnauthoriz\u001b[27med\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mAuthentication requir\u001b[27med\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m162:34\u001b[22m\u001b[39m\n    \u001b[90m160| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m401\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m161| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m162| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Unauthorized'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m163| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m164| \u001b[39m\n\n\u001b[31m\u001b[2m[38/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mprevents overlapping leave requests\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 409 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 409\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m211:31\u001b[22m\u001b[39m\n    \u001b[90m209| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m210| \u001b[39m\n    \u001b[90m211| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m409\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m212| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m213| \u001b[39m      expect(data.error.message).toContain('pending or approved leave \n\n\u001b[31m\u001b[2m[39/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mreturns projects with pagination when no query parameters\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m231:35\u001b[22m\u001b[39m\n    \u001b[90m229| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/proje\n    \u001b[90m230| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m231| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m232| \u001b[39m\n    \u001b[90m233| \u001b[39m\n\n\u001b[31m\u001b[2m[40/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mreturns projects with custom page parameter\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m260:35\u001b[22m\u001b[39m\n    \u001b[90m258| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m259| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m260| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m261| \u001b[39m\n    \u001b[90m262| \u001b[39m      \u001b[90m// Response received\u001b[39m\n\n\u001b[31m\u001b[2m[41/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mcalculates pagination correctly for multiple pages\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m323:35\u001b[22m\u001b[39m\n    \u001b[90m321| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m322| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m323| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m324| \u001b[39m\n    \u001b[90m325| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[42/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mhandles empty projects gracefully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m344:35\u001b[22m\u001b[39m\n    \u001b[90m342| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/proje\n    \u001b[90m343| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m344| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m345| \u001b[39m\n    \u001b[90m346| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[43/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project successfully with valid data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m393:35\u001b[22m\u001b[39m\n    \u001b[90m391| \u001b[39m\n    \u001b[90m392| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m393| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m394| \u001b[39m\n    \u001b[90m395| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[44/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with empty description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m413:35\u001b[22m\u001b[39m\n    \u001b[90m411| \u001b[39m\n    \u001b[90m412| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m413| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m414| \u001b[39m\n    \u001b[90m415| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[45/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with null description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m431:35\u001b[22m\u001b[39m\n    \u001b[90m429| \u001b[39m\n    \u001b[90m430| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m431| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m432| \u001b[39m\n    \u001b[90m433| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[46/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with undefined description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m449:35\u001b[22m\u001b[39m\n    \u001b[90m447| \u001b[39m\n    \u001b[90m448| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m449| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m450| \u001b[39m\n    \u001b[90m451| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[47/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mtrims whitespace from name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m467:35\u001b[22m\u001b[39m\n    \u001b[90m465| \u001b[39m\n    \u001b[90m466| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m467| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m468| \u001b[39m\n    \u001b[90m469| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[48/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mhandles JSON parsing errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m603:31\u001b[22m\u001b[39m\n    \u001b[90m601| \u001b[39m\n    \u001b[90m602| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m603| \u001b[39m      expect(response.status).toBe(500); // API doesn't handle JSON pa\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m604| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m605| \u001b[39m\n\n\u001b[31m\u001b[2m[49/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles very long project names\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m650:35\u001b[22m\u001b[39m\n    \u001b[90m648| \u001b[39m\n    \u001b[90m649| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m650| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m651| \u001b[39m\n    \u001b[90m652| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[50/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles very long project descriptions\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m666:35\u001b[22m\u001b[39m\n    \u001b[90m664| \u001b[39m\n    \u001b[90m665| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m666| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m667| \u001b[39m\n    \u001b[90m668| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[51/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles special characters in project name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m687:35\u001b[22m\u001b[39m\n    \u001b[90m685| \u001b[39m\n    \u001b[90m686| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m687| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m688| \u001b[39m\n    \u001b[90m689| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[52/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles unicode characters in project name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m709:35\u001b[22m\u001b[39m\n    \u001b[90m707| \u001b[39m\n    \u001b[90m708| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m709| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m710| \u001b[39m\n    \u001b[90m711| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[53/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mfetches stories for a specific day successfully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m112:31\u001b[22m\u001b[39m\n    \u001b[90m110| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m111| \u001b[39m\n    \u001b[90m112| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m113| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m114| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveLength\u001b[39m(\u001b[34m3\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[54/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns 400 when day parameter is missing\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m124:35\u001b[22m\u001b[39m\n    \u001b[90m122| \u001b[39m\n    \u001b[90m123| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m124| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m125| \u001b[39m\n    \u001b[90m126| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m400\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[55/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns 400 when day parameter has invalid format\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m138:35\u001b[22m\u001b[39m\n    \u001b[90m136| \u001b[39m\n    \u001b[90m137| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m138| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m139| \u001b[39m\n    \u001b[90m140| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m400\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[56/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns empty array when no stories exist for the day\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m154:35\u001b[22m\u001b[39m\n    \u001b[90m152| \u001b[39m\n    \u001b[90m153| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m154| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m155| \u001b[39m\n    \u001b[90m156| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[57/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mhandles edge case dates correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected undefined to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected:\u001b[39m \n200\n\n\u001b[31m+ Received:\u001b[39m \nundefined\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m187:31\u001b[22m\u001b[39m\n    \u001b[90m185| \u001b[39m\n    \u001b[90m186| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m187| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m188| \u001b[39m\n    \u001b[90m189| \u001b[39m      expect(StoryService.getStoriesByDay).toHaveBeenCalledWith('2024-\n\n\u001b[31m\u001b[2m[58/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates a story successfully with all fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m235:31\u001b[22m\u001b[39m\n    \u001b[90m233| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m234| \u001b[39m\n    \u001b[90m235| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m236| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m237| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[59/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates a story with minimal required fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m293:31\u001b[22m\u001b[39m\n    \u001b[90m291| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m292| \u001b[39m\n    \u001b[90m293| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m294| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m295| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[60/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcalculates order automatically when not provided\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m347:31\u001b[22m\u001b[39m\n    \u001b[90m345| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m346| \u001b[39m\n    \u001b[90m347| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m348| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m349| \u001b[39m      expect(data.data.order).toBe(0); // API defaults to 0 when order\n\n\u001b[31m\u001b[2m[61/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with non-existent projectId (API allows it)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m484:31\u001b[22m\u001b[39m\n    \u001b[90m482| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m483| \u001b[39m\n    \u001b[90m484| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m485| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m486| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[62/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with non-existent storyTypeId (API allows it)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m518:31\u001b[22m\u001b[39m\n    \u001b[90m516| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m517| \u001b[39m\n    \u001b[90m518| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m519| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m520| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[63/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with order (API allows duplicate orders)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m552:31\u001b[22m\u001b[39m\n    \u001b[90m550| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m551| \u001b[39m\n    \u001b[90m552| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m553| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m554| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[64/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mtrims whitespace from text fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m593:31\u001b[22m\u001b[39m\n    \u001b[90m591| \u001b[39m\n    \u001b[90m592| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m593| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m594| \u001b[39m\n    \u001b[90m595| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mStoryService\u001b[39m\u001b[33m.\u001b[39mcreateStory)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n\n\u001b[31m\u001b[2m[65/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story successfully (no database errors)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m635:31\u001b[22m\u001b[39m\n    \u001b[90m633| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m634| \u001b[39m\n    \u001b[90m635| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m636| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m637| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[66/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mhandles edge case dates correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m673:31\u001b[22m\u001b[39m\n    \u001b[90m671| \u001b[39m\n    \u001b[90m672| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m673| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m674| \u001b[39m\n    \u001b[90m675| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mStoryService\u001b[39m\u001b[33m.\u001b[39mcreateStory)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n\n\u001b[31m\u001b[2m[67/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mreturns all tasks when no query parameters\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m177:35\u001b[22m\u001b[39m\n    \u001b[90m175| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m176| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m177| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m178| \u001b[39m\n    \u001b[90m179| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[68/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by projectId\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m195:35\u001b[22m\u001b[39m\n    \u001b[90m193| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m194| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m195| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m196| \u001b[39m\n    \u001b[90m197| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[69/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by assignedTo user ID\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m220:35\u001b[22m\u001b[39m\n    \u001b[90m218| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m219| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m220| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m221| \u001b[39m\n    \u001b[90m222| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[70/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by assignedTo=me for current user\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m242:35\u001b[22m\u001b[39m\n    \u001b[90m240| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m241| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m242| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m243| \u001b[39m\n    \u001b[90m244| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[71/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mcombines multiple filters correctly\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m264:35\u001b[22m\u001b[39m\n    \u001b[90m262| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m263| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m264| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m265| \u001b[39m\n    \u001b[90m266| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[72/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mhandles empty results gracefully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m333:35\u001b[22m\u001b[39m\n    \u001b[90m331| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m332| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m333| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m334| \u001b[39m\n    \u001b[90m335| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[73/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mincludes correct project and user data in response\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m359:35\u001b[22m\u001b[39m\n    \u001b[90m357| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m358| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m359| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m360| \u001b[39m\n    \u001b[90m361| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mdata[\u001b[34m0\u001b[39m]\u001b[33m.\u001b[39mproject)\u001b[33m.\u001b[39m\u001b[34mtoBeDefined\u001b[39m()\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[74/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task successfully with valid data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m403:35\u001b[22m\u001b[39m\n    \u001b[90m401| \u001b[39m\n    \u001b[90m402| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m403| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m404| \u001b[39m\n    \u001b[90m405| \u001b[39m      console\u001b[33m.\u001b[39m\u001b[34mlog\u001b[39m(\u001b[32m'Response status:'\u001b[39m\u001b[33m,\u001b[39m response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[75/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with minimal required data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m430:35\u001b[22m\u001b[39m\n    \u001b[90m428| \u001b[39m\n    \u001b[90m429| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m430| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m431| \u001b[39m\n    \u001b[90m432| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[76/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mtrims whitespace from title and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m453:35\u001b[22m\u001b[39m\n    \u001b[90m451| \u001b[39m\n    \u001b[90m452| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m453| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m454| \u001b[39m\n    \u001b[90m455| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[77/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task without projectId when not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m568:35\u001b[22m\u001b[39m\n    \u001b[90m566| \u001b[39m\n    \u001b[90m567| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m568| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m569| \u001b[39m\n    \u001b[90m570| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[78/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with non-string projectId (converts to string)\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m589:35\u001b[22m\u001b[39m\n    \u001b[90m587| \u001b[39m\n    \u001b[90m588| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m589| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m590| \u001b[39m\n    \u001b[90m591| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[79/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with null projectId\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m609:35\u001b[22m\u001b[39m\n    \u001b[90m607| \u001b[39m\n    \u001b[90m608| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m609| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m610| \u001b[39m\n    \u001b[90m611| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[80/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mreturns 404 when project does not exist\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m633:35\u001b[22m\u001b[39m\n    \u001b[90m631| \u001b[39m\n    \u001b[90m632| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m633| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m634| \u001b[39m\n    \u001b[90m635| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[81/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task without assignee when assigneeId is not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m653:35\u001b[22m\u001b[39m\n    \u001b[90m651| \u001b[39m\n    \u001b[90m652| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m653| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m654| \u001b[39m\n    \u001b[90m655| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[82/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with null description when description is not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m672:35\u001b[22m\u001b[39m\n    \u001b[90m670| \u001b[39m\n    \u001b[90m671| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m672| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m673| \u001b[39m\n    \u001b[90m674| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[83/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with empty string description converted to null\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m692:35\u001b[22m\u001b[39m\n    \u001b[90m690| \u001b[39m\n    \u001b[90m691| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m692| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m693| \u001b[39m\n    \u001b[90m694| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[84/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22msets default status and priority correctly\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m789:35\u001b[22m\u001b[39m\n    \u001b[90m787| \u001b[39m\n    \u001b[90m788| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m789| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m790| \u001b[39m\n    \u001b[90m791| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[85/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles very long task descriptions\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m854:35\u001b[22m\u001b[39m\n    \u001b[90m852| \u001b[39m\n    \u001b[90m853| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m854| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m855| \u001b[39m\n    \u001b[90m856| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[86/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles special characters in task data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m877:35\u001b[22m\u001b[39m\n    \u001b[90m875| \u001b[39m\n    \u001b[90m876| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m877| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m878| \u001b[39m\n    \u001b[90m879| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[87/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles unicode characters in task data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m901:35\u001b[22m\u001b[39m\n    \u001b[90m899| \u001b[39m\n    \u001b[90m900| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m901| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m902| \u001b[39m\n    \u001b[90m903| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[88/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mGET /api/users\u001b[2m > \u001b[22mreturns users list for admin users\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m103:35\u001b[22m\u001b[39m\n    \u001b[90m101| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/users\n    \u001b[90m102| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m103| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m104| \u001b[39m\n    \u001b[90m105| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[89/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mGET /api/users\u001b[2m > \u001b[22mreturns users list for manager users\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m130:35\u001b[22m\u001b[39m\n    \u001b[90m128| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/users\n    \u001b[90m129| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m130| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m131| \u001b[39m\n    \u001b[90m132| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[90/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mPOST /api/users\u001b[2m > \u001b[22mcreates a new user successfully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m189:35\u001b[22m\u001b[39m\n    \u001b[90m187| \u001b[39m\n    \u001b[90m188| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m189| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m190| \u001b[39m\n    \u001b[90m191| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[91/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/components/ui/button/Button.test.tsx\u001b[2m > \u001b[22mButton Component\u001b[2m > \u001b[22mrenders with different sizes\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'inline-flex items-center justify-cent' to contain 'h-10'\u001b[39m\n\nExpected: \u001b[32m\"h-10\"\u001b[39m\nReceived: \u001b[31m\"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-11 rounded-md px-8 min-h-[44px] min-w-[44px]\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/components/ui/button/Button.test.tsx:\u001b[2m57:30\u001b[22m\u001b[39m\n    \u001b[90m 55| \u001b[39m    button \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39m\u001b[34mgetByRole\u001b[39m(\u001b[32m'button'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 56| \u001b[39m    \u001b[90m// The large size includes h-10 and px-6 classes\u001b[39m\n    \u001b[90m 57| \u001b[39m    \u001b[34mexpect\u001b[39m(button\u001b[33m.\u001b[39mclassName)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'h-10'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                             \u001b[31m^\u001b[39m\n    \u001b[90m 58| \u001b[39m    \u001b[34mexpect\u001b[39m(button\u001b[33m.\u001b[39mclassName)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'px-6'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 59| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[92/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22mSimplePerformanceMonitor\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould handle missing performance.memory gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 52428800 to be +0 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 0\u001b[39m\n\u001b[31m+ 52428800\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/performance/__tests__/simple-monitor.test.ts:\u001b[2m110:34\u001b[22m\u001b[39m\n    \u001b[90m108| \u001b[39m      simplePerformanceMonitor\u001b[33m.\u001b[39m\u001b[34mstartMonitoring\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m109| \u001b[39m      \u001b[35mconst\u001b[39m metrics \u001b[33m=\u001b[39m simplePerformanceMonitor\u001b[33m.\u001b[39m\u001b[34mgetMetrics\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m110| \u001b[39m      \u001b[34mexpect\u001b[39m(metrics\u001b[33m.\u001b[39mmemoryUsed)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m0\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m111| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m112| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[93/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when story does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m302:34\u001b[22m\u001b[39m\n    \u001b[90m300| \u001b[39m\n    \u001b[90m301| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m302| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m303| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n    \u001b[90m304| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[94/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when storyTypeId does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story type not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory type not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m339:34\u001b[22m\u001b[39m\n    \u001b[90m337| \u001b[39m\n    \u001b[90m338| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m339| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m340| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n    \u001b[90m341| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[95/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 400 when title is empty string\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m364:31\u001b[22m\u001b[39m\n    \u001b[90m362| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m363| \u001b[39m\n    \u001b[90m364| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m365| \u001b[39m      expect(data.error.message).toBe('Validation failed: title cannot\n    \u001b[90m366| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n\n\u001b[31m\u001b[2m[96/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 400 when title is only whitespace\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m390:31\u001b[22m\u001b[39m\n    \u001b[90m388| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m389| \u001b[39m\n    \u001b[90m390| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m391| \u001b[39m      expect(data.error.message).toBe('Validation failed: title cannot\n    \u001b[90m392| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n\n\u001b[31m\u001b[2m[97/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mDELETE /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when story does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m535:34\u001b[22m\u001b[39m\n    \u001b[90m533| \u001b[39m\n    \u001b[90m534| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m535| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m536| \u001b[39m      expect(mockStoryService.deleteStory).toHaveBeenCalledWith(storyI\n    \u001b[90m537| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[98/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mreturns attendance statistics for admin users\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m106:31\u001b[22m\u001b[39m\n    \u001b[90m104| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m105| \u001b[39m\n    \u001b[90m106| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m107| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m108| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveProperty\u001b[39m(\u001b[32m'today'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[99/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mcalculates correct today statistics\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m118:31\u001b[22m\u001b[39m\n    \u001b[90m116| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m117| \u001b[39m\n    \u001b[90m118| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m119| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m120| \u001b[39m      \n\n\u001b[31m\u001b[2m[100/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mcalculates average clock-in time correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m180:31\u001b[22m\u001b[39m\n    \u001b[90m178| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m179| \u001b[39m\n    \u001b[90m180| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m181| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m182| \u001b[39m      \n\n\u001b[31m\u001b[2m[101/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mhandles empty attendance records\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m195:31\u001b[22m\u001b[39m\n    \u001b[90m193| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m194| \u001b[39m\n    \u001b[90m195| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m196| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m197| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoday\u001b[33m.\u001b[39mtotalEmployeesPresent)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m0\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[102/113]\u001b[22m\u001b[39m\n\n",
      "critical": true
    },
    {
      "id": "accessibility-tests",
      "name": "Accessibility Tests",
      "success": true,
      "duration": 4895,
      "output": "\n> shabra-os@0.1.0 test:accessibility\n> vitest run src/components/__tests__/Accessibility.test.tsx\n\n\n\u001b[1m\u001b[46m RUN \u001b[49m\u001b[22m \u001b[36mv3.2.4 \u001b[39m\u001b[90mF:/shabra-os-v1\u001b[39m\n\n \u001b[32m\u001b[39m src/components/__tests__/Accessibility.test.tsx \u001b[2m(\u001b[22m\u001b[2m33 tests\u001b[22m\u001b[2m)\u001b[22m\u001b[33m 1177\u001b[2mms\u001b[22m\u001b[39m\n\n\u001b[2m Test Files \u001b[22m \u001b[1m\u001b[32m1 passed\u001b[39m\u001b[22m\u001b[90m (1)\u001b[39m\n\u001b[2m      Tests \u001b[22m \u001b[1m\u001b[32m33 passed\u001b[39m\u001b[22m\u001b[90m (33)\u001b[39m\n\u001b[2m   Start at \u001b[22m 13:50:37\n\u001b[2m   Duration \u001b[22m 3.71s\u001b[2m (transform 237ms, setup 215ms, collect 766ms, tests 1.18s, environment 579ms, prepare 123ms)\u001b[22m\n\n",
      "critical": false
    },
    {
      "id": "security-audit",
      "name": "Security Audit",
      "success": true,
      "duration": 589,
      "output": "\n> shabra-os@0.1.0 security:audit\n> node scripts/security-audit.js\n\n Starting security audit...\n\n Found 678 files to audit\n\n Auditing: src\\app\\(auth)\\auth\\error\\page.tsx...  Clean\n Auditing: src\\app\\(auth)\\layout.tsx...  Clean\n Auditing: src\\app\\(auth)\\login\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\action-center\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\actions\\task-actions.ts...  Clean\n Auditing: src\\app\\(main)\\admin\\announcements\\page.tsx...  2 issues found\n Auditing: src\\app\\(main)\\admin\\attendance\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\admin\\checklist-templates\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\admin\\holidays\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\admin\\leave-requests\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\admin\\users\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\analytics\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\announcements\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\attendance\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\calendar\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\content-calendar\\page.test.tsx...  2 issues found\n Auditing: src\\app\\(main)\\content-calendar\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\dashboard\\instapulse\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\layout.tsx...  Clean\n Auditing: src\\app\\(main)\\leave\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\login\\page.test.tsx...  4 issues found\n Auditing: src\\app\\(main)\\meetings\\new\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\meetings\\page.tsx...  3 issues found\n Auditing: src\\app\\(main)\\meetings\\[meetingId]\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\new-request\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\page.tsx...  2 issues found\n Auditing: src\\app\\(main)\\profile\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\profile\\[userId]\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\projects\\loading.tsx...  Clean\n Auditing: src\\app\\(main)\\projects\\mobile\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\projects\\page.test.tsx...  2 issues found\n Auditing: src\\app\\(main)\\projects\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\projects\\[projectId]\\board\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\projects\\[projectId]\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\requests\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\settings\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\storyboard\\loading.tsx...  Clean\n Auditing: src\\app\\(main)\\storyboard\\page.test.tsx...  2 issues found\n Auditing: src\\app\\(main)\\storyboard\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\tasks\\mobile\\page.tsx...  Clean\n Auditing: src\\app\\(main)\\tasks\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\team\\page.tsx...  2 issues found\n Auditing: src\\app\\(main)\\team-calendar\\page.tsx...  1 issues found\n Auditing: src\\app\\(main)\\wiki\\loading.tsx...  Clean\n Auditing: src\\app\\(main)\\wiki\\page.tsx...  Clean\n Auditing: src\\app\\admin\\storyboard\\page.tsx...  1 issues found\n Auditing: src\\app\\api\\admin\\action-center\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\action-center\\summary\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\action-center\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\announcements\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\announcements\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\attendance\\route.ts...  1 issues found\n Auditing: src\\app\\api\\admin\\attendance\\stats\\route.test.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\attendance\\stats\\route.ts...  1 issues found\n Auditing: src\\app\\api\\admin\\attendance\\[id]\\route.ts...  1 issues found\n Auditing: src\\app\\api\\admin\\checklist-templates\\route.ts...  3 issues found\n Auditing: src\\app\\api\\admin\\checklist-templates\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\documents\\route.ts...  3 issues found\n Auditing: src\\app\\api\\admin\\documents\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\employee-checklists\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\employee-checklists\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\holidays\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\holidays\\[id]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\leave-requests\\route.ts...  1 issues found\n Auditing: src\\app\\api\\admin\\leave-requests\\[id]\\route.ts...  1 issues found\n Auditing: src\\app\\api\\admin\\security\\audit-logs\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\security\\brute-force\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\security\\overview\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\tasks-at-risk\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\team-activity\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\team-activity-today\\route.ts...  3 issues found\n Auditing: src\\app\\api\\admin\\team-calendar\\route.ts...  3 issues found\n Auditing: src\\app\\api\\admin\\team-presence-stats\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\team-workload\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\urgent-tasks\\route.ts...  2 issues found\n Auditing: src\\app\\api\\admin\\work-schedules\\[userId]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\announcements\\recent\\route.ts...  1 issues found\n Auditing: src\\app\\api\\announcements\\route.ts...  1 issues found\n Auditing: src\\app\\api\\announcements\\[id]\\read\\route.ts...  1 issues found\n Auditing: src\\app\\api\\attendance\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\attendance\\route.ts...  1 issues found\n Auditing: src\\app\\api\\attendance\\stats\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\attendance\\stats\\route.ts...  Clean\n Auditing: src\\app\\api\\calendar\\next-event\\route.ts...  2 issues found\n Auditing: src\\app\\api\\content-slots\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\content-slots\\route.ts...  Clean\n Auditing: src\\app\\api\\content-slots\\[contentSlotId]\\route.ts...  Clean\n Auditing: src\\app\\api\\debug\\route.ts...  2 issues found\n Auditing: src\\app\\api\\errors\\report\\route.ts...  1 issues found\n Auditing: src\\app\\api\\health\\route.ts...  1 issues found\n Auditing: src\\app\\api\\instapulse\\pages\\route.ts...  1 issues found\n Auditing: src\\app\\api\\instapulse\\pages\\[id]\\route.ts...  Clean\n Auditing: src\\app\\api\\instapulse\\reels\\route.ts...  Clean\n Auditing: src\\app\\api\\instapulse\\save-result\\route.ts...  1 issues found\n Auditing: src\\app\\api\\leave-requests\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\leave-requests\\route.ts...  1 issues found\n Auditing: src\\app\\api\\logs\\route.ts...  1 issues found\n Auditing: src\\app\\api\\meetings\\action-items\\[actionItemId]\\create-task\\route.ts...  2 issues found\n Auditing: src\\app\\api\\meetings\\optimized\\route.ts...  3 issues found\n Auditing: src\\app\\api\\meetings\\route.ts...  4 issues found\n Auditing: src\\app\\api\\meetings\\[meetingId]\\action-items\\route.ts...  2 issues found\n Auditing: src\\app\\api\\meetings\\[meetingId]\\action-items\\[actionItemId]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\meetings\\[meetingId]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\meetings\\[meetingId]\\talking-points\\route.ts...  2 issues found\n Auditing: src\\app\\api\\meetings\\[meetingId]\\talking-points\\[talkingPointId]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\profiles\\route.ts...  3 issues found\n Auditing: src\\app\\api\\profiles\\[userId]\\route.ts...  2 issues found\n Auditing: src\\app\\api\\projects\\route.test.ts...  2 issues found\n Auditing: src\\app\\api\\projects\\route.ts...  1 issues found\n Auditing: src\\app\\api\\projects\\[projectId]\\route.ts...  1 issues found\n Auditing: src\\app\\api\\requests\\route.ts...  2 issues found\n Auditing: src\\app\\api\\seed\\route.ts...  3 issues found\n Auditing: src\\app\\api\\stories\\reorder\\route.ts...  Clean\n Auditing: src\\app\\api\\stories\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\stories\\route.ts...  1 issues found\n Auditing: src\\app\\api\\stories\\[storyId]\\route.test.ts...  1 issues found\n Auditing: src\\app\\api\\stories\\[storyId]\\route.ts...  1 issues found\n Auditing: src\\app\\api\\story-ideas\\route.ts...  Clean\n Auditing: src\\app\\api\\story-ideas\\[id]\\route.ts...  Clean\n Auditing: src\\app\\api\\story-types\\route.test.ts...  2 issues found\n Auditing: src\\app\\api\\story-types\\route.ts...  Clean\n Auditing: src\\app\\api\\story-types\\[id]\\route.ts...  Clean\n Auditing: src\\app\\api\\storyboard\\config\\route.ts...  Clean\n Auditing: src\\app\\api\\storyboard\\ids\\route.ts...  Clean\n Auditing: src\\app\\api\\storyboard\\refresh\\route.ts...  Clean\n Auditing: src\\app\\api\\tasks\\route.test.ts...  3 issues found\n Auditing: src\\app\\api\\tasks\\route.ts...  1 issues found\n Auditing: src\\app\\api\\tasks\\[taskId]\\route.ts...  1 issues found\n Auditing: src\\app\\api\\team-status\\whos-out\\route.ts...  2 issues found\n Auditing: src\\app\\api\\users\\assignable\\route.ts...  2 issues found\n Auditing: src\\app\\api\\users\\route.test.ts...  5 issues found\n Auditing: src\\app\\api\\users\\route.ts...  2 issues found\n Auditing: src\\app\\api\\wiki\\docs\\route.ts...  Clean\n Auditing: src\\app\\api\\wiki\\docs\\[slug]\\route.ts...  Clean\n Auditing: src\\app\\api\\wiki\\reorder\\route.ts...  1 issues found\n Auditing: src\\app\\api\\wiki\\route.test.ts...  4 issues found\n Auditing: src\\app\\api\\wiki\\route.ts...  3 issues found\n Auditing: src\\app\\api\\wiki\\upload\\route.ts...  1 issues found\n Auditing: src\\app\\api\\wiki\\[documentId]\\route.ts...  1 issues found\n Auditing: src\\app\\docs\\not-found.tsx...  Clean\n Auditing: src\\app\\docs\\page.tsx...  Clean\n Auditing: src\\app\\docs\\[slug]\\page.tsx...  1 issues found\n Auditing: src\\app\\layout.tsx...  Clean\n Auditing: src\\app\\pitch\\demo\\page.tsx...  Clean\n Auditing: src\\app\\pitch\\layout.tsx...  Clean\n Auditing: src\\app\\pitch\\page.tsx...  1 issues found\n Auditing: src\\app\\providers.test.tsx...  1 issues found\n Auditing: src\\app\\providers.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\about-section.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\animated-background.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\documentation-section.tsx...  1 issues found\n Auditing: src\\app\\showcase\\components\\ecosystem-section.tsx...  2 issues found\n Auditing: src\\app\\showcase\\components\\hero-section.tsx...  1 issues found\n Auditing: src\\app\\showcase\\components\\modal.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\philosophy-section.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\problem-section.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\roadmap-section.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\status-and-v1-roadmap-section.tsx...  Clean\n Auditing: src\\app\\showcase\\components\\tech-stack-section.tsx...  Clean\n Auditing: src\\app\\showcase\\page.tsx...  Clean\n Auditing: src\\app\\showcase\\utils\\i18n.ts...  Clean\n Auditing: src\\auth-local.ts...  2 issues found\n Auditing: src\\auth.integration.test.ts...  4 issues found\n Auditing: src\\auth.test.ts...  5 issues found\n Auditing: src\\auth.ts...  2 issues found\n Auditing: src\\components\\admin\\action-center\\ActionCenterDashboard.tsx...  2 issues found\n Auditing: src\\components\\admin\\announcements\\CreateAnnouncementModal.tsx...  1 issues found\n Auditing: src\\components\\admin\\announcements\\DeleteAnnouncementModal.tsx...  Clean\n Auditing: src\\components\\admin\\announcements\\EditAnnouncementModal.tsx...  1 issues found\n Auditing: src\\components\\admin\\attendance\\AdminAttendanceDashboard.tsx...  1 issues found\n Auditing: src\\components\\admin\\attendance\\AttendanceLogTable.tsx...  2 issues found\n Auditing: src\\components\\admin\\attendance\\DeleteAttendanceModal.tsx...  1 issues found\n Auditing: src\\components\\admin\\attendance\\EditAttendanceModal.tsx...  2 issues found\n Auditing: src\\components\\admin\\attendance\\WorkScheduleManagement.tsx...  2 issues found\n Auditing: src\\components\\admin\\checklist-templates\\ChecklistTemplateDetails.tsx...  2 issues found\n Auditing: src\\components\\admin\\checklist-templates\\ChecklistTemplateForm.tsx...  1 issues found\n Auditing: src\\components\\admin\\checklist-templates\\ChecklistTemplatesDashboard.tsx...  3 issues found\n Auditing: src\\components\\admin\\CreateUserForm.tsx...  3 issues found\n Auditing: src\\components\\admin\\dashboard\\CompanyStatsWidget.tsx...  1 issues found\n Auditing: src\\components\\admin\\dashboard\\DashboardLayout.tsx...  1 issues found\n Auditing: src\\components\\admin\\dashboard\\HeroHeader.tsx...  1 issues found\n Auditing: src\\components\\admin\\dashboard\\index.ts...  Clean\n Auditing: src\\components\\admin\\dashboard\\NavigationCardsWidget.tsx...  1 issues found\n Auditing: src\\components\\admin\\dashboard\\WidgetGrid.tsx...  1 issues found\n Auditing: src\\components\\admin\\holidays\\HolidayManagement.tsx...  2 issues found\n Auditing: src\\components\\admin\\leave\\AdminLeaveManagement.tsx...  2 issues found\n Auditing: src\\components\\admin\\leave\\ApproveLeaveModal.tsx...  2 issues found\n Auditing: src\\components\\admin\\leave\\RejectLeaveModal.tsx...  2 issues found\n Auditing: src\\components\\admin\\SecurityDashboard.tsx...  1 issues found\n Auditing: src\\components\\admin\\SimplePerformanceDashboard.tsx...  Clean\n Auditing: src\\components\\admin\\StoryIdeaManager.tsx...  1 issues found\n Auditing: src\\components\\admin\\StoryTypeManager.tsx...  1 issues found\n Auditing: src\\components\\admin\\team-calendar\\CapacityForecastWidget.tsx...  1 issues found\n Auditing: src\\components\\admin\\team-calendar\\TeamCalendarDashboard.tsx...  1 issues found\n Auditing: src\\components\\admin\\UsersTable.tsx...  2 issues found\n Auditing: src\\components\\admin\\UsersTableOptimized.tsx...  1 issues found\n Auditing: src\\components\\announcements\\AnnouncementCard.tsx...  1 issues found\n Auditing: src\\components\\announcements\\CreateAnnouncementModal.tsx...  1 issues found\n Auditing: src\\components\\attendance\\AttendanceHistory.tsx...  1 issues found\n Auditing: src\\components\\attendance\\DesktopAttendanceView.tsx...  1 issues found\n Auditing: src\\components\\calendar\\MobileContentCalendar.tsx...  Clean\n Auditing: src\\components\\dashboard\\ActivityChart.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\AnnouncementsWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\CompactTeamOverview.tsx...  Clean\n Auditing: src\\components\\dashboard\\index.ts...  1 issues found\n Auditing: src\\components\\dashboard\\MainActionButtons.tsx...  Clean\n Auditing: src\\components\\dashboard\\mobile\\MobileClockInCard.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\mobile\\MobileDashboard.tsx...  Clean\n Auditing: src\\components\\dashboard\\mobile\\MobileNotificationsWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\mobile\\MobileQuickStats.tsx...  Clean\n Auditing: src\\components\\dashboard\\mobile\\MobileTasksWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\MobileAttendanceHistory.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\MobileClockInCard.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\MobileDashboard.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\MyLatestTask.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\MyTasks.tsx...  Clean\n Auditing: src\\components\\dashboard\\PDDEmployeeDashboard.tsx...  Clean\n Auditing: src\\components\\dashboard\\PDDManagerDashboard.tsx...  Clean\n Auditing: src\\components\\dashboard\\QuickActionCard.tsx...  Clean\n Auditing: src\\components\\dashboard\\QuickActions.tsx...  Clean\n Auditing: src\\components\\dashboard\\RecentActivity.tsx...  Clean\n Auditing: src\\components\\dashboard\\StatCard.tsx...  Clean\n Auditing: src\\components\\dashboard\\SwipeableStatsCard.tsx...  Clean\n Auditing: src\\components\\dashboard\\TeamOverview.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\ActionableInbox.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\ActionCenterWidget.tsx...  3 issues found\n Auditing: src\\components\\dashboard\\widgets\\AnnouncementsWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\AttendanceClockWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\AttendanceDashboardWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\index.ts...  Clean\n Auditing: src\\components\\dashboard\\widgets\\InteractiveCalendarWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\KeyPerformanceIndicators.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\LiveAttendanceMap.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\MotivationWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\MyActiveProjectsWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\MyRequestsWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\MyTasksWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\NewUsersVsTasksChart.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\NextUpWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\PersonalInsightsWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\PersonalNotificationsWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\ProjectHealthOverview.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\ProjectHealthWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\ProjectStatusDonutChart.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\QuarterlyGoals.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\QuickActions.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\QuickActionsWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\QuickTaskWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\RecentActivityWidget.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\RecentTeamActivityFeed.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\SmartStatusCard.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\TaskBottlenecks.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\TasksAtRiskWidget.tsx...  2 issues found\n Auditing: src\\components\\dashboard\\widgets\\TeamActivityWidget.tsx...  2 issues found\n Auditing: src\\components\\dashboard\\widgets\\TeamPresenceWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\TeamWorkloadAnalysis.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\TeamWorkloadWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\TodaysFocusWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\TodaysSnapshot.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\WeeklyPerformanceChart.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\WeeklySalesChart.tsx...  Clean\n Auditing: src\\components\\dashboard\\widgets\\WhosOutWidget.tsx...  1 issues found\n Auditing: src\\components\\dashboard\\widgets\\WidgetCard.tsx...  Clean\n Auditing: src\\components\\data\\index.ts...  Clean\n Auditing: src\\components\\data\\MobileDataCard.tsx...  Clean\n Auditing: src\\components\\data\\MobileDataList.tsx...  Clean\n Auditing: src\\components\\data\\MobileInfiniteScroll.tsx...  Clean\n Auditing: src\\components\\error\\ErrorBoundary.tsx...  1 issues found\n Auditing: src\\components\\error\\ErrorDisplay.tsx...  Clean\n Auditing: src\\components\\error\\index.ts...  Clean\n Auditing: src\\components\\errors\\ErrorBoundary.test.tsx...  2 issues found\n Auditing: src\\components\\errors\\ErrorBoundary.tsx...  2 issues found\n Auditing: src\\components\\errors\\ErrorDisplay.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\layout\\ManagerDashboardLayout.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\ActionCenterWidget.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\QuickLinksWidget.tsx...  1 issues found\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\TasksAtRiskWidget.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\TeamActivityWidget.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\TeamAttendanceWidget.tsx...  Clean\n Auditing: src\\components\\features\\manager-dashboard\\widgets\\TeamWorkloadWidget.tsx...  Clean\n Auditing: src\\components\\forms\\index.ts...  Clean\n Auditing: src\\components\\forms\\MobileFormField.tsx...  Clean\n Auditing: src\\components\\forms\\MobileFormModal.tsx...  Clean\n Auditing: src\\components\\forms\\MobileInput.tsx...  Clean\n Auditing: src\\components\\forms\\MobileSelect.tsx...  Clean\n Auditing: src\\components\\forms\\MobileTextarea.tsx...  Clean\n Auditing: src\\components\\hr\\EmptyState.tsx...  Clean\n Auditing: src\\components\\hr\\LoadingState.tsx...  Clean\n Auditing: src\\components\\hr\\RoleBadge.tsx...  1 issues found\n Auditing: src\\components\\hr\\StatusBadge.tsx...  Clean\n Auditing: src\\components\\instapulse\\page-manager.tsx...  Clean\n Auditing: src\\components\\instapulse\\reel-card-skeleton.tsx...  Clean\n Auditing: src\\components\\instapulse\\reel-card.tsx...  1 issues found\n Auditing: src\\components\\instapulse\\reels-filters.tsx...  Clean\n Auditing: src\\components\\instapulse\\reels-grid-skeleton.tsx...  Clean\n Auditing: src\\components\\instapulse\\reels-grid.tsx...  Clean\n Auditing: src\\components\\kanban\\DraggableTask.tsx...  Clean\n Auditing: src\\components\\kanban\\DroppableColumn.tsx...  Clean\n Auditing: src\\components\\kanban\\KanbanBoard.tsx...  Clean\n Auditing: src\\components\\landing\\layout\\LandingHeader.tsx...  1 issues found\n Auditing: src\\components\\landing\\sections\\BenefitsSection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\CTASection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\FeaturesSection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\FooterSection.tsx...  1 issues found\n Auditing: src\\components\\landing\\sections\\HeroSection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\HowItWorksSection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\index.ts...  1 issues found\n Auditing: src\\components\\landing\\sections\\PricingSection.tsx...  Clean\n Auditing: src\\components\\landing\\sections\\TestimonialsSection.tsx...  1 issues found\n Auditing: src\\components\\landing\\ui\\AnimatedCounter.tsx...  Clean\n Auditing: src\\components\\landing\\ui\\DemoForm.tsx...  2 issues found\n Auditing: src\\components\\landing\\ui\\FeatureCard.tsx...  Clean\n Auditing: src\\components\\landing\\ui\\PricingCard.tsx...  Clean\n Auditing: src\\components\\landing\\ui\\ScrollIndicator.tsx...  Clean\n Auditing: src\\components\\landing\\ui\\TestimonialCard.tsx...  1 issues found\n Auditing: src\\components\\layout\\DashboardLayout.tsx...  Clean\n Auditing: src\\components\\layout\\EnhancedMobileBottomNavigation.tsx...  1 issues found\n Auditing: src\\components\\layout\\FloatingActionButton.tsx...  1 issues found\n Auditing: src\\components\\layout\\Header.tsx...  1 issues found\n Auditing: src\\components\\layout\\index.ts...  Clean\n Auditing: src\\components\\layout\\MainLayout.tsx...  Clean\n Auditing: src\\components\\layout\\NavigationItem.tsx...  Clean\n Auditing: src\\components\\layout\\NewMainLayout.tsx...  Clean\n Auditing: src\\components\\layout\\Sidebar.tsx...  2 issues found\n Auditing: src\\components\\lazy\\AdminComponents.tsx...  1 issues found\n Auditing: src\\components\\lazy\\ChartComponents.tsx...  Clean\n Auditing: src\\components\\lazy\\EditorComponents.tsx...  Clean\n Auditing: src\\components\\lazy\\index.ts...  1 issues found\n Auditing: src\\components\\lazy\\UtilityComponents.tsx...  Clean\n Auditing: src\\components\\leave\\MyLeaveRequestsTable.tsx...  1 issues found\n Auditing: src\\components\\leave\\NewLeaveRequestForm.tsx...  Clean\n Auditing: src\\components\\meetings\\CreateMeetingForm.tsx...  2 issues found\n Auditing: src\\components\\meetings\\CreateMeetingModal.tsx...  Clean\n Auditing: src\\components\\meetings\\EnhancedMeetingWorkspace.tsx...  Clean\n Auditing: src\\components\\meetings\\MeetingDetails.tsx...  2 issues found\n Auditing: src\\components\\meetings\\MeetingsErrorBoundary.tsx...  2 issues found\n Auditing: src\\components\\meetings\\MeetingWorkspace.tsx...  1 issues found\n Auditing: src\\components\\meetings\\SimpleMeetingCard.tsx...  1 issues found\n Auditing: src\\components\\meetings\\SimpleMeetingsList.tsx...  Clean\n Auditing: src\\components\\MobileDashboard.tsx...  1 issues found\n Auditing: src\\components\\profile\\ChecklistDetails.tsx...  2 issues found\n Auditing: src\\components\\profile\\ProfileChecklists.tsx...  2 issues found\n Auditing: src\\components\\profile\\ProfileDetails.tsx...  1 issues found\n Auditing: src\\components\\profile\\ProfileDocuments.tsx...  2 issues found\n Auditing: src\\components\\profile\\ProfileHRInfo.tsx...  1 issues found\n Auditing: src\\components\\profile\\ProfileOverview.tsx...  2 issues found\n Auditing: src\\components\\profile\\ProfileTasksProjects.tsx...  1 issues found\n Auditing: src\\components\\projects\\CreateProject.test.tsx...  2 issues found\n Auditing: src\\components\\projects\\CreateProject.tsx...  1 issues found\n Auditing: src\\components\\projects\\CreateProjectModal.tsx...  Clean\n Auditing: src\\components\\projects\\DeleteProject.tsx...  Clean\n Auditing: src\\components\\projects\\EditProject.tsx...  Clean\n Auditing: src\\components\\projects\\mobile\\MobileProjectsList.tsx...  Clean\n Auditing: src\\components\\projects\\MobileCreateProject.tsx...  1 issues found\n Auditing: src\\components\\projects\\MobileProjectsList.tsx...  2 issues found\n Auditing: src\\components\\providers\\ClientResponsiveWrapper.tsx...  Clean\n Auditing: src\\components\\providers\\ErrorProvider.tsx...  Clean\n Auditing: src\\components\\providers\\ResponsiveProvider.tsx...  Clean\n Auditing: src\\components\\requests\\NewRequestForm.tsx...  1 issues found\n Auditing: src\\components\\requests\\UserRequestsList.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\collaboration\\CollaborationPanel.tsx...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\ConflictsList.tsx...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\ConnectionStatus.tsx...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\index.ts...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\OfflineUsersList.tsx...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\OnlineUsersList.tsx...  Clean\n Auditing: src\\components\\storyboard\\collaboration\\PresenceIndicator.tsx...  Clean\n Auditing: src\\components\\storyboard\\CompleteEditStoryModal.tsx...  Clean\n Auditing: src\\components\\storyboard\\CreateStoryDialog.test.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\CreateStoryDialog.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\IdeaBank.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\management\\CompleteEditModal.tsx...  Clean\n Auditing: src\\components\\storyboard\\management\\CreateStoryDialog.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\management\\IdeaBank.tsx...  Clean\n Auditing: src\\components\\storyboard\\management\\index.ts...  1 issues found\n Auditing: src\\components\\storyboard\\management\\StoryCanvas.tsx...  Clean\n Auditing: src\\components\\storyboard\\management\\StoryTypePalette.tsx...  Clean\n Auditing: src\\components\\storyboard\\RealTimeCollaboration.tsx...  Clean\n Auditing: src\\components\\storyboard\\StoryboardCanvas.tsx...  Clean\n Auditing: src\\components\\storyboard\\StoryCanvas.tsx...  Clean\n Auditing: src\\components\\storyboard\\StoryCard.test.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\StoryCard.tsx...  Clean\n Auditing: src\\components\\storyboard\\StoryManagement.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\StorySlot.test.tsx...  1 issues found\n Auditing: src\\components\\storyboard\\StorySlot.tsx...  Clean\n Auditing: src\\components\\storyboard\\StoryTypeManager.test.tsx...  2 issues found\n Auditing: src\\components\\storyboard\\StoryTypeManager.tsx...  2 issues found\n Auditing: src\\components\\storyboard\\StoryTypePalette.tsx...  Clean\n Auditing: src\\components\\tasks\\CreateTask.tsx...  Clean\n Auditing: src\\components\\tasks\\CreateTaskModal.tsx...  Clean\n Auditing: src\\components\\tasks\\EditTaskModal.tsx...  Clean\n Auditing: src\\components\\tasks\\EmployeeTaskView.tsx...  Clean\n Auditing: src\\components\\tasks\\index.ts...  Clean\n Auditing: src\\components\\tasks\\ManagerTaskView.tsx...  Clean\n Auditing: src\\components\\tasks\\mobile\\MobileTaskCard.tsx...  Clean\n Auditing: src\\components\\tasks\\mobile\\MobileTasksList.tsx...  1 issues found\n Auditing: src\\components\\tasks\\MobileTaskCreationModal.tsx...  Clean\n Auditing: src\\components\\tasks\\MobileTaskDetail.tsx...  1 issues found\n Auditing: src\\components\\tasks\\MobileTaskList.tsx...  1 issues found\n Auditing: src\\components\\tasks\\TaskCard.tsx...  Clean\n Auditing: src\\components\\tasks\\TaskDetailView.tsx...  Clean\n Auditing: src\\components\\ui\\AccessibilityAnnouncer.tsx...  Clean\n Auditing: src\\components\\ui\\AccessibleCard.tsx...  Clean\n Auditing: src\\components\\ui\\AccessibleForm.tsx...  Clean\n Auditing: src\\components\\ui\\AccessibleFormField.tsx...  Clean\n Auditing: src\\components\\ui\\AccessibleNavigation.tsx...  Clean\n Auditing: src\\components\\ui\\alert-dialog.tsx...  Clean\n Auditing: src\\components\\ui\\alert.tsx...  Clean\n Auditing: src\\components\\ui\\animated-background.tsx...  Clean\n Auditing: src\\components\\ui\\AnimatedTableRow.tsx...  Clean\n Auditing: src\\components\\ui\\aspect-ratio.tsx...  Clean\n Auditing: src\\components\\ui\\avatar.tsx...  Clean\n Auditing: src\\components\\ui\\badge.tsx...  Clean\n Auditing: src\\components\\ui\\button\\Button.test.tsx...  1 issues found\n Auditing: src\\components\\ui\\Button.README.md...  2 issues found\n Auditing: src\\components\\ui\\button.tsx...  Clean\n Auditing: src\\components\\ui\\CacheStatusIndicator.tsx...  Clean\n Auditing: src\\components\\ui\\calendar.tsx...  1 issues found\n Auditing: src\\components\\ui\\card.tsx...  Clean\n Auditing: src\\components\\ui\\CardHeaderWithIcon.tsx...  Clean\n Auditing: src\\components\\ui\\checkbox.tsx...  Clean\n Auditing: src\\components\\ui\\ClientOnly.tsx...  Clean\n Auditing: src\\components\\ui\\DashboardGrid.tsx...  Clean\n Auditing: src\\components\\ui\\DataFreshnessIndicator.tsx...  Clean\n Auditing: src\\components\\ui\\date-range-picker.tsx...  Clean\n Auditing: src\\components\\ui\\dialog.tsx...  Clean\n Auditing: src\\components\\ui\\dropdown-menu.tsx...  Clean\n Auditing: src\\components\\ui\\DynamicLucideIcon.tsx...  Clean\n Auditing: src\\components\\ui\\EmptyStates.tsx...  Clean\n Auditing: src\\components\\ui\\EnhancedWidgetCard.tsx...  Clean\n Auditing: src\\components\\ui\\ErrorBoundary.tsx...  2 issues found\n Auditing: src\\components\\ui\\FloatingActionButton.tsx...  Clean\n Auditing: src\\components\\ui\\glassmorphism-panel.tsx...  Clean\n Auditing: src\\components\\ui\\icon-picker.tsx...  Clean\n Auditing: src\\components\\ui\\IconPicker.tsx...  Clean\n Auditing: src\\components\\ui\\index.ts...  Clean\n Auditing: src\\components\\ui\\input.tsx...  Clean\n Auditing: src\\components\\ui\\jalali-calendar.tsx...  Clean\n Auditing: src\\components\\ui\\jalali-datetime-picker.tsx...  Clean\n Auditing: src\\components\\ui\\label.tsx...  Clean\n Auditing: src\\components\\ui\\lazy-loading.tsx...  Clean\n Auditing: src\\components\\ui\\LoadingStates.tsx...  Clean\n Auditing: src\\components\\ui\\MobileFormModal.tsx...  Clean\n Auditing: src\\components\\ui\\Modal.tsx...  Clean\n Auditing: src\\components\\ui\\offline-indicator.tsx...  1 issues found\n Auditing: src\\components\\ui\\OptimizedDndContext.tsx...  Clean\n Auditing: src\\components\\ui\\OptimizedMotion.tsx...  Clean\n Auditing: src\\components\\ui\\page-transitions.tsx...  Clean\n Auditing: src\\components\\ui\\pagination.tsx...  Clean\n Auditing: src\\components\\ui\\PerfectWidget.tsx...  Clean\n Auditing: src\\components\\ui\\popover.tsx...  Clean\n Auditing: src\\components\\ui\\progress.tsx...  Clean\n Auditing: src\\components\\ui\\pull-to-refresh.tsx...  Clean\n Auditing: src\\components\\ui\\PWARegistration.tsx...  1 issues found\n Auditing: src\\components\\ui\\segmented-control.tsx...  Clean\n Auditing: src\\components\\ui\\select.tsx...  Clean\n Auditing: src\\components\\ui\\separator.tsx...  Clean\n Auditing: src\\components\\ui\\sheet.tsx...  Clean\n Auditing: src\\components\\ui\\skeleton-loaders.tsx...  Clean\n Auditing: src\\components\\ui\\skeleton.tsx...  Clean\n Auditing: src\\components\\ui\\SkipLinks.tsx...  Clean\n Auditing: src\\components\\ui\\SquircleCard.tsx...  Clean\n Auditing: src\\components\\ui\\StateManagementMonitor.tsx...  Clean\n Auditing: src\\components\\ui\\switch.tsx...  Clean\n Auditing: src\\components\\ui\\table.tsx...  Clean\n Auditing: src\\components\\ui\\tabs.tsx...  Clean\n Auditing: src\\components\\ui\\TaskCard.tsx...  Clean\n Auditing: src\\components\\ui\\textarea.tsx...  Clean\n Auditing: src\\components\\ui\\toast.tsx...  Clean\n Auditing: src\\components\\ui\\tooltip.tsx...  Clean\n Auditing: src\\components\\wiki\\CreateWikiItem.tsx...  1 issues found\n Auditing: src\\components\\wiki\\EditWikiItem.tsx...  Clean\n Auditing: src\\components\\wiki\\index.ts...  Clean\n Auditing: src\\components\\wiki\\MarkdownGuide.tsx...  1 issues found\n Auditing: src\\components\\wiki\\MarkdownRenderer.tsx...  Clean\n Auditing: src\\components\\wiki\\PDFViewer.tsx...  Clean\n Auditing: src\\components\\wiki\\SortableWikiItem.tsx...  Clean\n Auditing: src\\components\\wiki\\WikiContent.tsx...  1 issues found\n Auditing: src\\components\\wiki\\WikiFileUpload.tsx...  Clean\n Auditing: src\\components\\wiki\\WikiSidebar.tsx...  1 issues found\n Auditing: src\\components\\__tests__\\Accessibility.test.tsx...  1 issues found\n Auditing: src\\components\\__tests__\\LoginForm.test.tsx...  4 issues found\n Auditing: src\\components\\__tests__\\RealTimeCollaboration.test.tsx...  2 issues found\n Auditing: src\\components\\__tests__\\StoryManagement.test.tsx...  1 issues found\n Auditing: src\\contexts\\ErrorContext.test.tsx...  1 issues found\n Auditing: src\\contexts\\ErrorContext.tsx...  Clean\n Auditing: src\\e2e\\auth.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\content-creation.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\create-story.spec.ts...  1 issues found\n Auditing: src\\e2e\\meetings-flow.test.ts...  1 issues found\n Auditing: src\\e2e\\project-management.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\README.md...  4 issues found\n Auditing: src\\e2e\\run-e2e-tests.ts...  2 issues found\n Auditing: src\\e2e\\test-utils.ts...  3 issues found\n Auditing: src\\hooks\\use-debounce.ts...  Clean\n Auditing: src\\hooks\\use-instapulse-pages.ts...  Clean\n Auditing: src\\hooks\\use-instapulse-reels.ts...  Clean\n Auditing: src\\hooks\\useAccessibility.ts...  Clean\n Auditing: src\\hooks\\useAdminDashboard.ts...  1 issues found\n Auditing: src\\hooks\\useAnimationPerformance.ts...  1 issues found\n Auditing: src\\hooks\\useApiErrorHandler.ts...  Clean\n Auditing: src\\hooks\\useAuth.ts...  1 issues found\n Auditing: src\\hooks\\useCompanyStats.ts...  1 issues found\n Auditing: src\\hooks\\useDebounce.ts...  Clean\n Auditing: src\\hooks\\useErrorHandler.ts...  Clean\n Auditing: src\\hooks\\useErrorHandling.test.tsx...  1 issues found\n Auditing: src\\hooks\\useErrorHandling.ts...  1 issues found\n Auditing: src\\hooks\\useHapticFeedback.ts...  Clean\n Auditing: src\\hooks\\useHR.ts...  1 issues found\n Auditing: src\\hooks\\useMediaQuery.ts...  Clean\n Auditing: src\\hooks\\useMeetingsErrorHandler.ts...  2 issues found\n Auditing: src\\hooks\\useMemoryLeakPrevention.ts...  Clean\n Auditing: src\\hooks\\useOptimizedMeetings.ts...  Clean\n Auditing: src\\hooks\\usePullToRefresh.ts...  Clean\n Auditing: src\\hooks\\useRealtimeCollab.ts...  1 issues found\n Auditing: src\\hooks\\useReducedMotion.ts...  1 issues found\n Auditing: src\\hooks\\useResponsive.ts...  Clean\n Auditing: src\\hooks\\useSlotManagement.ts...  1 issues found\n Auditing: src\\hooks\\useSmartDataFetching.ts...  Clean\n Auditing: src\\hooks\\useStoryboardData.ts...  1 issues found\n Auditing: src\\hooks\\useStoryboardOperations.ts...  1 issues found\n Auditing: src\\hooks\\useStoryboardOperationsNew.ts...  1 issues found\n Auditing: src\\hooks\\useStoryboardState.ts...  Clean\n Auditing: src\\hooks\\useStoryIdeas.ts...  Clean\n Auditing: src\\hooks\\useStoryManagement.ts...  2 issues found\n Auditing: src\\hooks\\useStoryMutations.ts...  1 issues found\n Auditing: src\\hooks\\useTeamActivity.ts...  1 issues found\n Auditing: src\\hooks\\useUpdateTaskStatus.ts...  Clean\n Auditing: src\\hooks\\__tests__\\useAdminDashboard.test.ts...  3 issues found\n Auditing: src\\hooks\\__tests__\\useRealtimeCollab.test.ts...  1 issues found\n Auditing: src\\hooks\\__tests__\\useStoryManagement.test.ts...  2 issues found\n Auditing: src\\hooks\\__tests__\\useUpdateTaskStatus.test.ts...  2 issues found\n Auditing: src\\lib\\accessibility-utils.ts...  1 issues found\n Auditing: src\\lib\\advanced-security.test.ts...  1 issues found\n Auditing: src\\lib\\advanced-security.ts...  3 issues found\n Auditing: src\\lib\\api\\response-utils.ts...  Clean\n Auditing: src\\lib\\api-error-handler.ts...  Clean\n Auditing: src\\lib\\api-response.ts...  Clean\n Auditing: src\\lib\\attendance-utils.ts...  2 issues found\n Auditing: src\\lib\\auth\\authorization.ts...  1 issues found\n Auditing: src\\lib\\auth-utils.test.ts...  2 issues found\n Auditing: src\\lib\\auth-utils.ts...  1 issues found\n Auditing: src\\lib\\cache-manager.test.ts...  1 issues found\n Auditing: src\\lib\\cache-manager.ts...  Clean\n Auditing: src\\lib\\client-error-recovery.test.ts...  1 issues found\n Auditing: src\\lib\\client-error-recovery.ts...  1 issues found\n Auditing: src\\lib\\client-error-reporting.ts...  1 issues found\n Auditing: src\\lib\\cloudinary.ts...  2 issues found\n Auditing: src\\lib\\config\\constants.js...  4 issues found\n Auditing: src\\lib\\config\\constants.ts...  4 issues found\n Auditing: src\\lib\\config\\env.ts...  7 issues found\n Auditing: src\\lib\\config\\logging.ts...  2 issues found\n Auditing: src\\lib\\config\\smart-fetching.config.ts...  Clean\n Auditing: src\\lib\\database\\cache-manager.ts...  2 issues found\n Auditing: src\\lib\\database\\pagination.ts...  1 issues found\n Auditing: src\\lib\\database\\performance-monitor.ts...  Clean\n Auditing: src\\lib\\database\\query-optimizer.ts...  Clean\n Auditing: src\\lib\\database\\__tests__\\pagination.test.ts...  1 issues found\n Auditing: src\\lib\\database-utils.ts...  Clean\n Auditing: src\\lib\\date-fns-optimized.ts...  Clean\n Auditing: src\\lib\\date-utils.test.ts...  1 issues found\n Auditing: src\\lib\\date-utils.ts...  Clean\n Auditing: src\\lib\\dateUtils.ts...  Clean\n Auditing: src\\lib\\db-connection.js...  2 issues found\n Auditing: src\\lib\\design-system.ts...  Clean\n Auditing: src\\lib\\dnd-kit-optimized.ts...  Clean\n Auditing: src\\lib\\docs.ts...  Clean\n Auditing: src\\lib\\error-handler.ts...  1 issues found\n Auditing: src\\lib\\errors\\api-responses.ts...  Clean\n Auditing: src\\lib\\errors\\domain-errors.ts...  Clean\n Auditing: src\\lib\\errors\\error-handler.ts...  3 issues found\n Auditing: src\\lib\\errors\\error-handling.test.ts...  5 issues found\n Auditing: src\\lib\\errors\\error-middleware.ts...  1 issues found\n Auditing: src\\lib\\errors\\index.ts...  Clean\n Auditing: src\\lib\\framer-motion-optimized.ts...  Clean\n Auditing: src\\lib\\hooks\\useQueryWithErrorHandling.ts...  Clean\n Auditing: src\\lib\\icons-optimized.ts...  Clean\n Auditing: src\\lib\\jalali-localizer.ts...  2 issues found\n Auditing: src\\lib\\logger.config.ts...  2 issues found\n Auditing: src\\lib\\logger.ts...  2 issues found\n Auditing: src\\lib\\middleware\\auth-middleware.ts...  1 issues found\n Auditing: src\\lib\\middleware\\rate-limit-middleware.ts...  Clean\n Auditing: src\\lib\\middleware\\validation-middleware.ts...  Clean\n Auditing: src\\lib\\mock-data.ts...  1 issues found\n Auditing: src\\lib\\performance\\data-fetching-monitor.ts...  Clean\n Auditing: src\\lib\\performance\\memory-leak-prevention.ts...  Clean\n Auditing: src\\lib\\performance\\simple-monitor.ts...  1 issues found\n Auditing: src\\lib\\performance\\__tests__\\simple-monitor.test.ts...  1 issues found\n Auditing: src\\lib\\performance-utils.ts...  Clean\n Auditing: src\\lib\\persian-date-utils.ts...  1 issues found\n Auditing: src\\lib\\prisma-mock.ts...  Clean\n Auditing: src\\lib\\prisma.ts...  3 issues found\n Auditing: src\\lib\\production-fixes.ts...  1 issues found\n Auditing: src\\lib\\queries.test.ts...  1 issues found\n Auditing: src\\lib\\queries.ts...  Clean\n Auditing: src\\lib\\query-cache-integration.ts...  Clean\n Auditing: src\\lib\\security\\credential-generator.ts...  7 issues found\n Auditing: src\\lib\\security\\html-sanitizer.ts...  2 issues found\n Auditing: src\\lib\\security\\input-validator.ts...  2 issues found\n Auditing: src\\lib\\security\\InputSanitizer.ts...  1 issues found\n Auditing: src\\lib\\security\\RateLimiter.ts...  1 issues found\n Auditing: src\\lib\\security\\security-config.ts...  3 issues found\n Auditing: src\\lib\\security\\security-headers.ts...  1 issues found\n Auditing: src\\lib\\security.test.ts...  2 issues found\n Auditing: src\\lib\\security.ts...  3 issues found\n Auditing: src\\lib\\standard-localizer.ts...  2 issues found\n Auditing: src\\lib\\state\\index.ts...  1 issues found\n Auditing: src\\lib\\test-prisma.ts...  1 issues found\n Auditing: src\\lib\\utils\\auth-utils.ts...  1 issues found\n Auditing: src\\lib\\utils\\error-handler.ts...  Clean\n Auditing: src\\lib\\utils\\ProjectIdResolver.ts...  Clean\n Auditing: src\\lib\\utils.ts...  1 issues found\n Auditing: src\\lib\\validation\\component-props.ts...  2 issues found\n Auditing: src\\lib\\validation\\__tests__\\component-props.test.ts...  2 issues found\n Auditing: src\\lib\\validators\\project-validators.ts...  Clean\n Auditing: src\\lib\\validators\\story-validators.ts...  1 issues found\n Auditing: src\\lib\\work-schedule-utils.ts...  1 issues found\n Auditing: src\\middleware.advanced-security.test.ts...  1 issues found\n Auditing: src\\middleware.security.test.ts...  1 issues found\n Auditing: src\\middleware.test.ts...  2 issues found\n Auditing: src\\middleware.ts...  2 issues found\n Auditing: src\\scripts\\optimize-animations.ts...  Clean\n Auditing: src\\services\\action-center.service.ts...  1 issues found\n Auditing: src\\services\\dashboard.service.ts...  Clean\n Auditing: src\\services\\mobile.service.ts...  1 issues found\n Auditing: src\\services\\project.service.test.ts...  1 issues found\n Auditing: src\\services\\project.service.ts...  Clean\n Auditing: src\\services\\story.service.test.ts...  1 issues found\n Auditing: src\\services\\story.service.ts...  1 issues found\n Auditing: src\\stores\\app.store.ts...  1 issues found\n Auditing: src\\stores\\cache.store.ts...  Clean\n Auditing: src\\stores\\error.store.ts...  Clean\n Auditing: src\\stores\\index.ts...  Clean\n Auditing: src\\stores\\uiStore.ts...  Clean\n Auditing: src\\stores\\userStore.ts...  1 issues found\n Auditing: src\\stores\\wiki.store.ts...  1 issues found\n Auditing: src\\test\\mocks\\auth.ts...  5 issues found\n Auditing: src\\test\\mocks\\factory.ts...  6 issues found\n Auditing: src\\test\\mocks\\index.ts...  1 issues found\n Auditing: src\\test\\mocks\\prisma.ts...  2 issues found\n Auditing: src\\test\\mocks\\services.ts...  1 issues found\n Auditing: src\\test\\README.md...  2 issues found\n Auditing: src\\test\\setup.tsx...  1 issues found\n Auditing: src\\test\\utils\\test-helpers.ts...  2 issues found\n Auditing: src\\types\\admin-dashboard.ts...  1 issues found\n Auditing: src\\types\\api.ts...  Clean\n Auditing: src\\types\\base.ts...  Clean\n Auditing: src\\types\\collaboration.ts...  Clean\n Auditing: src\\types\\conventions.ts...  1 issues found\n Auditing: src\\types\\entities.ts...  3 issues found\n Auditing: src\\types\\error.ts...  Clean\n Auditing: src\\types\\hr.ts...  2 issues found\n Auditing: src\\types\\index.ts...  1 issues found\n Auditing: src\\types\\jest-dom.d.ts...  1 issues found\n Auditing: src\\types\\moment-jalaali.d.ts...  Clean\n Auditing: src\\types\\next-auth.d.ts...  Clean\n Auditing: src\\types\\profile.ts...  Clean\n Auditing: src\\types\\project.ts...  Clean\n Auditing: src\\types\\react-big-calendar.d.ts...  Clean\n Auditing: src\\types\\schemas.ts...  3 issues found\n Auditing: src\\types\\state.ts...  1 issues found\n Auditing: src\\types\\story-management.ts...  1 issues found\n Auditing: src\\types\\story.ts...  Clean\n Auditing: src\\types\\transformers.ts...  Clean\n Auditing: src\\types\\validation.ts...  1 issues found\n Auditing: src\\types\\__tests__\\type-system.test.ts...  6 issues found\n Auditing: prisma\\seed-robust.ts...  5 issues found\n Auditing: prisma\\seed-simple.ts...  5 issues found\n Auditing: prisma\\seed.ts...  6 issues found\n Auditing: prisma\\wiki-seed.js...  2 issues found\n Auditing: src\\e2e\\auth.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\content-creation.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\create-story.spec.ts...  1 issues found\n Auditing: src\\e2e\\meetings-flow.test.ts...  1 issues found\n Auditing: src\\e2e\\project-management.e2e.spec.ts...  4 issues found\n Auditing: src\\e2e\\README.md...  4 issues found\n Auditing: src\\e2e\\run-e2e-tests.ts...  2 issues found\n Auditing: src\\e2e\\test-utils.ts...  3 issues found\n\n Audit completed! Scanned 678 files.\n\n Security report saved to: F:\\shabra-os-v1\\SECURITY_AUDIT_REPORT.md\n\n Summary:\n   - Critical Issues: 80\n   - High Priority Issues: 394\n\n ACTION REQUIRED: Critical and high-priority security issues found!\n   Please review the security report and fix these issues immediately.\n\n Next steps:\n   1. Review the security audit report\n   2. Fix critical and high-priority issues\n   3. Generate secure credentials using the provided script\n   4. Update environment configuration\n   5. Re-run the audit to verify fixes\n",
      "critical": false
    },
    {
      "id": "console-verification",
      "name": "Console Statement Verification",
      "success": false,
      "duration": 18272,
      "error": "Command failed: npm run verify:no-console",
      "critical": false
    },
    {
      "id": "bundle-analysis",
      "name": "Bundle Analysis",
      "success": false,
      "duration": 433,
      "error": "Command failed: npm run build:analyze-bundle\n'ANALYZE' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n",
      "critical": false
    },
    {
      "id": "performance-monitor",
      "name": "Performance Monitoring",
      "success": true,
      "duration": 31770,
      "output": "\n> shabra-os@0.1.0 performance:monitor\n> node scripts/performance-monitor.js --report\n\n\u001b[36m [2025-10-09T10:21:01.468Z]  Starting Performance Monitoring...\u001b[0m\n\u001b[36m [2025-10-09T10:21:01.470Z] Report Generation: Enabled\u001b[0m\n\u001b[36m [2025-10-09T10:21:01.470Z] Verbose Output: Disabled\u001b[0m\n\u001b[36m [2025-10-09T10:21:01.470Z] Measuring bundle size...\u001b[0m\n\u001b[31m [2025-10-09T10:21:01.832Z] Bundle analysis failed: Command failed: npm run build:analyze-bundle\n'ANALYZE' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n\u001b[0m\n\u001b[36m [2025-10-09T10:21:01.833Z] Measuring test performance...\u001b[0m\n\u001b[31m [2025-10-09T10:21:32.837Z] Test execution failed: Command failed: npm run test:unit\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle token validation errors gracefully\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Token validation failed'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Token validation failed'\u001b[39m,\n      stack: \u001b[32m'Error: Token validation failed\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:337:38\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.239Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Token validation failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at middlewareHandler (F:\\\\shabra-os-v1\\\\src\\\\middleware.ts:238:25)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:16:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:339:7\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.247Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle token validation errors gracefully\n\u001b[22m\u001b[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function\n    at ErrorHandler.createErrorResponse \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:376:25\u001b[90m)\u001b[39m\n    at ErrorHandler.handleError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:99:27\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Function.logError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:194:7\u001b[90m)\u001b[39m\n    at middlewareHandler \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\middleware.ts:238:7\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:16:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\middleware.advanced-security.test.ts:339:7\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle session validation errors for page routes\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Session validation failed'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Session validation failed'\u001b[39m,\n      stack: \u001b[32m'Error: Session validation failed\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:352:38\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.266Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Session validation failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at middlewareHandler (F:\\\\shabra-os-v1\\\\src\\\\middleware.ts:341:23)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:16:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\middleware.advanced-security.test.ts:354:22\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.268Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22m\u001b[2mAdvanced Security Middleware\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle session validation errors for page routes\n\u001b[22m\u001b[39mFailed to log error: TypeError: __vite_ssr_import_0__.NextResponse.json is not a function\n    at ErrorHandler.createErrorResponse \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:376:25\u001b[90m)\u001b[39m\n    at ErrorHandler.handleError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handler.ts:99:27\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Function.logError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:194:7\u001b[90m)\u001b[39m\n    at middlewareHandler \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\middleware.ts:341:5\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:16:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\middleware.advanced-security.test.ts:354:22\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould handle error when handleError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.356Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.357Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould handle async error when handleAsyncError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'fn is not a function'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'fn is not a function'\u001b[39m,\n      stack: \u001b[32m'Error: fn is not a function\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:133:31\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:60:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.415Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: fn is not a function\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:133:31\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:60:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.416Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould clear error when clearError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.460Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.460Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 401 when user is not authenticated\n\u001b[22m\u001b[39mAPI route error: AuthenticationError: Authentication required\n    at getUsers \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:35:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:142:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m401\u001b[39m,\n  errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:21:07.474Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthenticationError'\u001b[39m,\n    message: \u001b[32m'Authentication required'\u001b[39m,\n    statusCode: \u001b[33m401\u001b[39m,\n    errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:21:07.474Z'\u001b[39m,\n    stack: \u001b[32m'AuthenticationError: Authentication required\\n'\u001b[39m +\n      \u001b[32m'    at getUsers (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:35:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:142:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHENTICATION'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.482Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould clear all errors when clearAllErrors is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.488Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.488Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.497Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.498Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 403 when user does not have required role\n\u001b[22m\u001b[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n    at getUsers \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:41:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:161:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m403\u001b[39m,\n  errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:21:07.500Z\u001b[39m\n}\nHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthorizationError'\u001b[39m,\n    message: \u001b[32m'Insufficient permissions. ADMIN or MANAGER role required.'\u001b[39m,\n    statusCode: \u001b[33m403\u001b[39m,\n    errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:21:07.500Z'\u001b[39m,\n    stack: \u001b[32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\\n'\u001b[39m +\n      \u001b[32m'    at getUsers (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:41:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:161:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHORIZATION'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.510Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould retry error when retryError is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.517Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.517Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mvalidates required fields\n\u001b[22m\u001b[39mAPI route error: Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\n    at validateCreateDTO \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\types\\validation.ts:110:13\u001b[90m)\u001b[39m\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:90:26\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:221:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m\"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\"\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m\"Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\"\u001b[39m,\n      stack: \u001b[32m\"Error: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\\n\"\u001b[39m +\n        \u001b[32m'    at validateCreateDTO (F:\\\\shabra-os-v1\\\\src\\\\types\\\\validation.ts:110:13)\\n'\u001b[39m +\n        \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:90:26)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:221:24\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.538Z'\u001b[39m,\n    stack: \u001b[32m\"InternalServerError: Create DTO validation failed: Name is required, Invalid email format, Password must be at least 8 characters, Invalid enum value. Expected 'ADMIN' | 'MANAGER' | 'EMPLOYEE', received 'INVALID_ROLE'\\n\"\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:33:33)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:221:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.539Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mprevents duplicate email addresses\n\u001b[22m\u001b[39mAPI route error: ConflictError: User with this email already exists\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:98:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:244:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m409\u001b[39m,\n  errorCode: \u001b[32m'RESOURCE_ALREADY_EXISTS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: { email: \u001b[32m'charlie@example.com'\u001b[39m },\n  timestamp: \u001b[35m2025-10-09T10:21:07.552Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'ConflictError'\u001b[39m,\n    message: \u001b[32m'User with this email already exists'\u001b[39m,\n    statusCode: \u001b[33m409\u001b[39m,\n    errorCode: \u001b[32m'RESOURCE_ALREADY_EXISTS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { email: \u001b[32m'charlie@example.com'\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:21:07.552Z'\u001b[39m,\n    stack: \u001b[32m'ConflictError: User with this email already exists\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:98:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:244:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'CONFLICT'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.553Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 401 when user is not authenticated\n\u001b[22m\u001b[39mAPI route error: AuthenticationError: Authentication required\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:79:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:264:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m401\u001b[39m,\n  errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:21:07.562Z\u001b[39m\n}\nMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthenticationError'\u001b[39m,\n    message: \u001b[32m'Authentication required'\u001b[39m,\n    statusCode: \u001b[33m401\u001b[39m,\n    errorCode: \u001b[32m'INVALID_CREDENTIALS'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:21:07.562Z'\u001b[39m,\n    stack: \u001b[32m'AuthenticationError: Authentication required\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:79:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:264:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHENTICATION'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.563Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/api/users/route.test.ts\u001b[2m > \u001b[22m\u001b[2mUsers API Route\u001b[2m > \u001b[22m\u001b[2mPOST /api/users\u001b[2m > \u001b[22m\u001b[2mreturns 403 when user does not have required role\n\u001b[22m\u001b[39mAPI route error: AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\n    at createUser \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.ts:85:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.<anonymous> \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:14\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\users\\route.test.ts:290:24\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m403\u001b[39m,\n  errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: \u001b[90mundefined\u001b[39m,\n  timestamp: \u001b[35m2025-10-09T10:21:07.568Z\u001b[39m\n}\nHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'AuthorizationError'\u001b[39m,\n    message: \u001b[32m'Insufficient permissions. ADMIN or MANAGER role required.'\u001b[39m,\n    statusCode: \u001b[33m403\u001b[39m,\n    errorCode: \u001b[32m'ACCESS_DENIED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: \u001b[90mundefined\u001b[39m,\n    timestamp: \u001b[32m'2025-10-09T10:21:07.568Z'\u001b[39m,\n    stack: \u001b[32m'AuthorizationError: Insufficient permissions. ADMIN or MANAGER role required.\\n'\u001b[39m +\n      \u001b[32m'    at createUser (F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.ts:85:11)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at Module.<anonymous> (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:14)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\app\\\\api\\\\users\\\\route.test.ts:290:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'AUTHORIZATION'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:07.570Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/app/(main)/login/page.test.tsx\u001b[2m > \u001b[22m\u001b[2mLoginPage\u001b[2m > \u001b[22m\u001b[2mrenders login form with all required elements\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould retry all errors when retryAllErrors is called\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:08.603Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:08.604Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:08.609Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:08.609Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould filter errors by type\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:09.646Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:09.647Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:09.657Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:09.659Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould filter errors by severity\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:09.704Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:09.704Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22m\u001b[2museErrorHandling\u001b[2m > \u001b[22m\u001b[2mshould identify retryable errors\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Test error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Test error'\u001b[39m,\n      stack: \u001b[32m'Error: Test error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:26\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n        \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n        \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n        \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n        \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:17016:9\\n'\u001b[39m +\n        \u001b[32m'    at batchedUpdates$1 (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:3262:40)\\n'\u001b[39m +\n        \u001b[32m'    at dispatchEventForPluginEventSystem (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16572:7)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:09.729Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Test error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at Function.logError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:194:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:174:17\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\contexts\\\\ErrorContext.tsx:303:5\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.ts:66:5\\n'\u001b[39m +\n      \u001b[32m'    at onClick (F:\\\\shabra-os-v1\\\\src\\\\hooks\\\\useErrorHandling.test.tsx:56:30)\\n'\u001b[39m +\n      \u001b[32m'    at executeDispatch (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16368:9)\\n'\u001b[39m +\n      \u001b[32m'    at runWithFiberInDEV (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:1522:13)\\n'\u001b[39m +\n      \u001b[32m'    at processDispatchQueue (F:\\\\shabra-os-v1\\\\node_modules\\\\react-dom\\\\cjs\\\\react-dom-client.development.js:16418:19)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:09.729Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22m\u001b[2mSimplePerformanceMonitor\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle PerformanceObserver errors gracefully\n\u001b[22m\u001b[39mLCP monitoring not supported\nFID monitoring not supported\nCLS monitoring not supported\nFCP monitoring not supported\n\n\u001b[90mstderr\u001b[2m | src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22m\u001b[2mSimplePerformanceMonitor\u001b[2m > \u001b[22m\u001b[2mError Handling\u001b[2m > \u001b[22m\u001b[2mshould handle missing performance.memory gracefully\n\u001b[22m\u001b[39mTTFB monitoring failed\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StorySlot.test.tsx\u001b[2m > \u001b[22m\u001b[2mStorySlot\u001b[2m > \u001b[22m\u001b[2mrenders story slot with story content when story exists\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/CreateStoryDialog.test.tsx\u001b[2m > \u001b[22m\u001b[2mCreateStoryDialog\u001b[2m > \u001b[22m\u001b[2mrenders the dialog when open\n\u001b[22m\u001b[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileInView` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whileinview` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `whileDrag` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiledrag` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReceived `false` for a non-boolean attribute `layout`.\n\nIf you want to write it to the DOM, pass a string instead: layout=\"false\" or layout={value.toString()}.\n\nIf you used to conditionally omit it with layout={condition && value}, pass layout={condition ? value : undefined} instead.\nReact does not recognize the `layoutId` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `layoutid` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragConstraints` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragconstraints` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragElastic` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragelastic` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragMomentum` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragmomentum` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragPropagation` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragpropagation` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragSnapToOrigin` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragsnaptoorigin` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nReact does not recognize the `dragTransition` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `dragtransition` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\nUnknown event handler property `onAnimationComplete`. It will be ignored.\nUnknown event handler property `onHoverStart`. It will be ignored.\nUnknown event handler property `onHoverEnd`. It will be ignored.\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould render error UI when child throws an error\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould show error details in development mode\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould hide error details in production mode\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould call onError callback when error occurs\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould retry when retry button is clicked\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\nError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould disable retry button when max retries reached\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould reset when resetKeys change\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould render custom fallback when provided\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mErrorBoundary\u001b[2m > \u001b[22m\u001b[2mshould report error when report button is clicked\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/errors/ErrorBoundary.test.tsx\u001b[2m > \u001b[22m\u001b[2mwithErrorBoundary HOC\u001b[2m > \u001b[22m\u001b[2mshould wrap component with error boundary\n\u001b[22m\u001b[39mError: Test error\n    at ThrowError \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\components\\errors\\ErrorBoundary.test.tsx:16:11\u001b[90m)\u001b[39m\n    at Object.react-stack-bottom-frame \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:23863:20\u001b[90m)\u001b[39m\n    at renderWithHooks \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:5529:22\u001b[90m)\u001b[39m\n    at updateFunctionComponent \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:8897:19\u001b[90m)\u001b[39m\n    at beginWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:10522:18\u001b[90m)\u001b[39m\n    at runWithFiberInDEV \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:1522:13\u001b[90m)\u001b[39m\n    at performUnitOfWork \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:15140:22\u001b[90m)\u001b[39m\n    at workLoopSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14956:41\u001b[90m)\u001b[39m\n    at renderRootSync \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14936:11\u001b[90m)\u001b[39m\n    at performWorkOnRoot \u001b[90m(F:\\shabra-os-v1\\\u001b[39mnode_modules\\\u001b[4mreact-dom\u001b[24m\\cjs\\react-dom-client.development.js:14462:44\u001b[90m)\u001b[39m {\n  [stack]: \u001b[36m[Getter/Setter]\u001b[39m,\n  [message]: \u001b[32m'Test error'\u001b[39m\n}\n\nThe above error occurred in the <ThrowError> component.\n\nReact will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould have proper ARIA attributes\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould trap focus when open\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/components/__tests__/Accessibility.test.tsx\u001b[2m > \u001b[22m\u001b[2mAccessibility Tests\u001b[2m > \u001b[22m\u001b[2mModal Component\u001b[2m > \u001b[22m\u001b[2mshould close on Escape key\n\u001b[22m\u001b[39m`DialogContent` requires a `DialogTitle` for the component to be accessible for screen reader users.\n\nIf you want to hide the `DialogTitle`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/dialog\nWarning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StoryCard.test.tsx\u001b[2m > \u001b[22m\u001b[2mStoryCard\u001b[2m > \u001b[22m\u001b[2mhandles delete with empty id gracefully\n\u001b[22m\u001b[39mError: Not implemented: window.confirm\n    at module.exports (F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\not-implemented.js:9:17)\n    at F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\Window.js:960:7\n    at handleDelete (F:\\shabra-os-v1\\src\\components\\storyboard\\StoryCard.tsx:43:9)\n    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n    at dispatchEvent (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11) \u001b[90mundefined\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/components/storyboard/StoryCard.test.tsx\u001b[2m > \u001b[22m\u001b[2mStoryCard\u001b[2m > \u001b[22m\u001b[2mhandles delete with whitespace id gracefully\n\u001b[22m\u001b[39mError: Not implemented: window.confirm\n    at module.exports (F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\not-implemented.js:9:17)\n    at F:\\shabra-os-v1\\node_modules\\jsdom\\lib\\jsdom\\browser\\Window.js:960:7\n    at handleDelete (F:\\shabra-os-v1\\src\\components\\storyboard\\StoryCard.tsx:43:9)\n    at executeDispatch (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n    at runWithFiberInDEV (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n    at processDispatchQueue (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n    at F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n    at batchedUpdates$1 (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n    at dispatchEventForPluginEventSystem (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n    at dispatchEvent (F:\\shabra-os-v1\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11) \u001b[90mundefined\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize generic Error\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Generic error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Generic error'\u001b[39m,\n      stack: \u001b[32m'Error: Generic error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:453:21\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n        \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:19.772Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Generic error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:454:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:19.774Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize Prisma errors\n\u001b[22m\u001b[39mMEDIUM SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'ConflictError'\u001b[39m,\n    message: \u001b[32m'Resource already exists'\u001b[39m,\n    statusCode: \u001b[33m409\u001b[39m,\n    errorCode: \u001b[32m'DUPLICATE_ENTRY'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { prismaCode: \u001b[32m'P2002'\u001b[39m, target: \u001b[36m[Array]\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:21:19.781Z'\u001b[39m,\n    stack: \u001b[32m'ConflictError: Resource already exists\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handlePrismaError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:218:16)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:165:19)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:469:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)'\u001b[39m\n  },\n  category: \u001b[32m'CONFLICT'\u001b[39m,\n  severity: \u001b[32m'MEDIUM'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:19.782Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Normalization\u001b[2m > \u001b[22m\u001b[2mshould normalize network errors\n\u001b[22m\u001b[39mCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'NetworkError'\u001b[39m,\n    message: \u001b[32m'Network request failed'\u001b[39m,\n    statusCode: \u001b[33m502\u001b[39m,\n    errorCode: \u001b[32m'NETWORK_ERROR'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: {\n      originalError: \u001b[32m'FetchError'\u001b[39m,\n      message: \u001b[32m'Network request failed'\u001b[39m,\n      stack: \u001b[90mundefined\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:19.786Z'\u001b[39m,\n    stack: \u001b[32m'NetworkError: Network request failed\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:185:14)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:482:43\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:19.786Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Handler\u001b[2m > \u001b[22m\u001b[2mError Response Creation\u001b[2m > \u001b[22m\u001b[2mshould add retry-after header for rate limit errors\n\u001b[22m\u001b[39mHIGH SEVERITY ERROR: {\n  error: {\n    name: \u001b[32m'RateLimitError'\u001b[39m,\n    message: \u001b[32m'Too many requests'\u001b[39m,\n    statusCode: \u001b[33m429\u001b[39m,\n    errorCode: \u001b[32m'RATE_LIMIT_EXCEEDED'\u001b[39m,\n    isOperational: \u001b[33mtrue\u001b[39m,\n    context: { retryAfter: \u001b[33m900\u001b[39m },\n    timestamp: \u001b[32m'2025-10-09T10:21:19.803Z'\u001b[39m,\n    stack: \u001b[32m'RateLimitError: Too many requests\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:527:21\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n      \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n      \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n      \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\\n'\u001b[39m +\n      \u001b[32m'    at runSuite (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)'\u001b[39m\n  },\n  category: \u001b[32m'RATE_LIMIT'\u001b[39m,\n  severity: \u001b[32m'HIGH'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:19.805Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mSuccess Responses\u001b[2m > \u001b[22m\u001b[2mshould create success response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:571:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mSuccess Responses\u001b[2m > \u001b[22m\u001b[2mshould create paginated response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:605:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create validation error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:627:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create authentication error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:643:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create authorization error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:658:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create not found error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:673:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create conflict error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:688:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create rate limit error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:704:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create internal server error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:719:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mAPI Responses\u001b[2m > \u001b[22m\u001b[2mError Responses\u001b[2m > \u001b[22m\u001b[2mshould create service unavailable error response\n\u001b[22m\u001b[39mPromise returned by `expect(actual).resolves.toMatchObject(expected)` was not awaited. Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. Please remember to await the assertion.\n    at F:/shabra-os-v1/src/lib/errors/error-handling.test.ts:734:29\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mAPI Error Handling\u001b[2m > \u001b[22m\u001b[2mshould handle API errors\n\u001b[22m\u001b[39mAPI route error: ValidationError: Invalid input\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:854:15\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:20\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:866:30\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m {\n  statusCode: \u001b[33m400\u001b[39m,\n  errorCode: \u001b[32m'VALIDATION_FAILED'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m,\n  context: { field: \u001b[90mundefined\u001b[39m },\n  timestamp: \u001b[35m2025-10-09T10:21:19.891Z\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mAPI Error Handling\u001b[2m > \u001b[22m\u001b[2mshould handle unknown errors\n\u001b[22m\u001b[39mAPI route error: Error: Unknown error\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:872:15\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:30:20\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:884:30\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\nCRITICAL ERROR: {\n  error: {\n    name: \u001b[32m'InternalServerError'\u001b[39m,\n    message: \u001b[32m'Unknown error'\u001b[39m,\n    statusCode: \u001b[33m500\u001b[39m,\n    errorCode: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,\n    isOperational: \u001b[33mfalse\u001b[39m,\n    context: {\n      originalError: \u001b[32m'Error'\u001b[39m,\n      message: \u001b[32m'Unknown error'\u001b[39m,\n      stack: \u001b[32m'Error: Unknown error\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:872:15\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:30:20\\n'\u001b[39m +\n        \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:884:30\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\\n'\u001b[39m +\n        \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\\n'\u001b[39m +\n        \u001b[32m'    at new Promise (<anonymous>)\\n'\u001b[39m +\n        \u001b[32m'    at runWithTimeout (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\\n'\u001b[39m +\n        \u001b[32m'    at runTest (file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\\n'\u001b[39m +\n        \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)'\u001b[39m\n    },\n    timestamp: \u001b[32m'2025-10-09T10:21:19.903Z'\u001b[39m,\n    stack: \u001b[32m'InternalServerError: Unknown error\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.normalizeError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:200:12)\\n'\u001b[39m +\n      \u001b[32m'    at ErrorHandler.handleError (F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handler.ts:76:26)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-middleware.ts:33:33\\n'\u001b[39m +\n      \u001b[32m'    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n'\u001b[39m +\n      \u001b[32m'    at F:\\\\shabra-os-v1\\\\src\\\\lib\\\\errors\\\\error-handling.test.ts:884:24\\n'\u001b[39m +\n      \u001b[32m'    at file:///F:/shabra-os-v1/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'\u001b[39m\n  },\n  category: \u001b[32m'INTERNAL'\u001b[39m,\n  severity: \u001b[32m'CRITICAL'\u001b[39m,\n  timestamp: \u001b[32m'2025-10-09T10:21:19.903Z'\u001b[39m,\n  requestId: \u001b[90mundefined\u001b[39m,\n  userId: \u001b[90mundefined\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/errors/error-handling.test.ts\u001b[2m > \u001b[22m\u001b[2mError Middleware\u001b[2m > \u001b[22m\u001b[2mError Recovery\u001b[2m > \u001b[22m\u001b[2mshould use fallback when primary operation fails\n\u001b[22m\u001b[39mPrimary operation failed, using fallback: Error: Primary failed\n    at primary \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:907:15\u001b[90m)\u001b[39m\n    at Function.withFallback \u001b[90m(F:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-middleware.ts:267:20\u001b[90m)\u001b[39m\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\lib\\errors\\error-handling.test.ts:911:42\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n    at runSuite \u001b[90m(file:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n\n\u001b[90mstderr\u001b[2m | src/app/api/wiki/route.test.ts\u001b[2m > \u001b[22m\u001b[2mWiki API Route\u001b[2m > \u001b[22m\u001b[2mGET /api/wiki\u001b[2m > \u001b[22m\u001b[2mhandles database errors gracefully\n\u001b[22m\u001b[39m[WIKI API] Database query failed: DatabaseError [AppError]: Database error\n    at \u001b[90mF:\\shabra-os-v1\\\u001b[39msrc\\app\\api\\wiki\\route.test.ts:338:9\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90mfile:///F:/shabra-os-v1/\u001b[39mnode_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  statusCode: \u001b[33m500\u001b[39m,\n  code: \u001b[32m'DATABASE_ERROR'\u001b[39m,\n  isOperational: \u001b[33mtrue\u001b[39m\n}\n\n\u001b[90mstderr\u001b[2m | src/lib/validation/__tests__/component-props.test.ts\u001b[2m > \u001b[22m\u001b[2mvalidateComponentProps\u001b[2m > \u001b[22m\u001b[2mshould throw error in development for invalid props\n\u001b[22m\u001b[39m[TestComponent] Invalid props: [ \u001b[32m'title: Title is required'\u001b[39m ]\n\n\n\u001b[31m\u001b[39m\u001b[1m\u001b[41m Failed Tests 113 \u001b[49m\u001b[22m\u001b[31m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould implement brute force protection for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { next: true, headers: Map{ (8) } } to deeply equal ObjectContaining {\"status\": 429}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 429,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"X-Frame-Options\" => \"DENY\",\u001b[39m\n\u001b[31m+     \"X-Content-Type-Options\" => \"nosniff\",\u001b[39m\n\u001b[31m+     \"Referrer-Policy\" => \"strict-origin-when-cross-origin\",\u001b[39m\n\u001b[31m+     \"X-XSS-Protection\" => \"1; mode=block\",\u001b[39m\n\u001b[31m+     \"X-DNS-Prefetch-Control\" => \"off\",\u001b[39m\n\u001b[31m+     \"Permissions-Policy\" => \"camera=(), microphone=(), geolocation=(), interest-cohort=()\",\u001b[39m\n\u001b[31m+     \"Strict-Transport-Security\" => \"max-age=31536000; includeSubDomains; preload\",\u001b[39m\n\u001b[31m+     \"Content-Security-Policy\" => \"default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"next\": true,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m168:22\u001b[22m\u001b[39m\n    \u001b[90m166| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m167| \u001b[39m\n    \u001b[90m168| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ status\u001b[33m:\u001b[39m \u001b[34m429\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m169| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39mheaders\u001b[33m.\u001b[39m\u001b[35mget\u001b[39m(\u001b[32m'Retry-After'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'900'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m170| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mAuditLogger\u001b[39m\u001b[33m.\u001b[39mlogSecurityEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n\n\u001b[31m\u001b[2m[1/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould block IP after excessive brute force attempts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1', (2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m190:45\u001b[22m\u001b[39m\n    \u001b[90m188| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m189| \u001b[39m\n    \u001b[90m190| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mIPManagement\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mblockIP)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m   | \u001b[39m                                            \u001b[31m^\u001b[39m\n    \u001b[90m191| \u001b[39m        \u001b[32m'127.0.0.1'\u001b[39m\u001b[33m,\u001b[39m\n    \u001b[90m192| \u001b[39m        \u001b[32m'Excessive brute force attempts'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[2/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould record failed attempts for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m203:65\u001b[22m\u001b[39m\n    \u001b[90m201| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m202| \u001b[39m\n    \u001b[90m203| \u001b[39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave\n    \u001b[90m   | \u001b[39m                                                                \u001b[31m^\u001b[39m\n    \u001b[90m204| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m205| \u001b[39m        \u001b[32m'LOGIN_FAILURE'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[3/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mBrute Force Protection\u001b[2m > \u001b[22mshould record successful attempts for auth endpoints\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m222:69\u001b[22m\u001b[39m\n    \u001b[90m220| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m221| \u001b[39m\n    \u001b[90m222| \u001b[39m      expect((BruteForceProtection as any).recordSuccessfulAttempt).to\n    \u001b[90m   | \u001b[39m                                                                    \u001b[31m^\u001b[39m\n    \u001b[90m223| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m224| \u001b[39m        \u001b[32m'LOGIN_SUCCESS'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[4/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mProgressive Delays\u001b[2m > \u001b[22mshould implement progressive delays for failed attempts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 0 to be greater than 1000\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m301:35\u001b[22m\u001b[39m\n    \u001b[90m299| \u001b[39m\n    \u001b[90m300| \u001b[39m      \u001b[90m// Should have some delay (allowing for test execution time)\u001b[39m\n    \u001b[90m301| \u001b[39m      \u001b[34mexpect\u001b[39m(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39m\u001b[34mtoBeGreaterThan\u001b[39m(\u001b[34m1000\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m302| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m303| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[5/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mLogin Page Protection\u001b[2m > \u001b[22mshould protect login page from brute force attacks\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { next: true, headers: Map{ (8) } } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"X-Frame-Options\" => \"DENY\",\u001b[39m\n\u001b[31m+     \"X-Content-Type-Options\" => \"nosniff\",\u001b[39m\n\u001b[31m+     \"Referrer-Policy\" => \"strict-origin-when-cross-origin\",\u001b[39m\n\u001b[31m+     \"X-XSS-Protection\" => \"1; mode=block\",\u001b[39m\n\u001b[31m+     \"X-DNS-Prefetch-Control\" => \"off\",\u001b[39m\n\u001b[31m+     \"Permissions-Policy\" => \"camera=(), microphone=(), geolocation=(), interest-cohort=()\",\u001b[39m\n\u001b[31m+     \"Strict-Transport-Security\" => \"max-age=31536000; includeSubDomains; preload\",\u001b[39m\n\u001b[31m+     \"Content-Security-Policy\" => \"default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"next\": true,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m316:22\u001b[22m\u001b[39m\n    \u001b[90m314| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m315| \u001b[39m\n    \u001b[90m316| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m317| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'error=Too many attempts'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m318| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[6/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mLogin Page Protection\u001b[2m > \u001b[22mshould redirect to login with error message for locked accounts\n\u001b[31m\u001b[1mAssertionError\u001b[22m: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m330:26\u001b[22m\u001b[39m\n    \u001b[90m328| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m329| \u001b[39m\n    \u001b[90m330| \u001b[39m      expect(result.url).toContain('error=Too many attempts. Please tr\n    \u001b[90m   | \u001b[39m                         \u001b[31m^\u001b[39m\n    \u001b[90m331| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m332| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[7/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Middleware\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould handle token validation errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '127.0.0.1' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/middleware.advanced-security.test.ts:\u001b[2m341:65\u001b[22m\u001b[39m\n    \u001b[90m339| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m340| \u001b[39m\n    \u001b[90m341| \u001b[39m      expect((BruteForceProtection as any).recordFailedAttempt).toHave\n    \u001b[90m   | \u001b[39m                                                                \u001b[31m^\u001b[39m\n    \u001b[90m342| \u001b[39m      \u001b[34mexpect\u001b[39m((\u001b[33mAuditLogger\u001b[39m \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mlogAuthEvent)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m(\n    \u001b[90m343| \u001b[39m        \u001b[32m'LOGIN_FAILURE'\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[8/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mredirects to login for protected pages when not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m247:22\u001b[22m\u001b[39m\n    \u001b[90m245| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m246| \u001b[39m\n    \u001b[90m247| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m248| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m249| \u001b[39m\n\n\u001b[31m\u001b[2m[9/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mallows access to protected pages when authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m260:22\u001b[22m\u001b[39m\n    \u001b[90m258| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m259| \u001b[39m\n    \u001b[90m260| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m261| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m262| \u001b[39m\n\n\u001b[31m\u001b[2m[10/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mreturns 401 for protected API routes when not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m269:22\u001b[22m\u001b[39m\n    \u001b[90m267| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m268| \u001b[39m\n    \u001b[90m269| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m270| \u001b[39m        expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m271| \u001b[39m          status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[11/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mallows access to protected API routes when authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m286:22\u001b[22m\u001b[39m\n    \u001b[90m284| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m285| \u001b[39m\n    \u001b[90m286| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m287| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m288| \u001b[39m\n\n\u001b[31m\u001b[2m[12/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mAuthentication and Authorization\u001b[2m > \u001b[22mvalidates session token format\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m301:20\u001b[22m\u001b[39m\n    \u001b[90m299| \u001b[39m    \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m300| \u001b[39m\n    \u001b[90m301| \u001b[39m    \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                   \u001b[31m^\u001b[39m\n    \u001b[90m302| \u001b[39m      expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m303| \u001b[39m        status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[13/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mallows requests from trusted origins\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m320:22\u001b[22m\u001b[39m\n    \u001b[90m318| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m319| \u001b[39m\n    \u001b[90m320| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m321| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m322| \u001b[39m\n\n\u001b[31m\u001b[2m[14/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mOpen Redirect Protection\u001b[2m > \u001b[22mvalidates callback URL origin to prevent open redirects\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m352:22\u001b[22m\u001b[39m\n    \u001b[90m350| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m351| \u001b[39m\n    \u001b[90m352| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m353| \u001b[39m      \u001b[90m// Should not include the malicious callback URL\u001b[39m\n    \u001b[90m354| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'malicious.com'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[15/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mOpen Redirect Protection\u001b[2m > \u001b[22mincludes valid callback URLs\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m365:22\u001b[22m\u001b[39m\n    \u001b[90m363| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m364| \u001b[39m\n    \u001b[90m365| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m366| \u001b[39m      \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39murl)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'callbackUrl='\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m367| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[16/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mhandles token validation errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"redirect\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"redirect\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m377:22\u001b[22m\u001b[39m\n    \u001b[90m375| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m376| \u001b[39m\n    \u001b[90m377| \u001b[39m      expect(result).toEqual(expect.objectContaining({ redirect: true \n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m378| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m379| \u001b[39m\n\n\u001b[31m\u001b[2m[17/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mhandles API token validation errors with 401\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"status\": 401}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"status\": 401,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m391:22\u001b[22m\u001b[39m\n    \u001b[90m389| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m390| \u001b[39m\n    \u001b[90m391| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m392| \u001b[39m        expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({\n    \u001b[90m393| \u001b[39m          status\u001b[33m:\u001b[39m \u001b[34m401\u001b[39m\u001b[33m,\u001b[39m\n\n\u001b[31m\u001b[2m[18/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to login page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m405:22\u001b[22m\u001b[39m\n    \u001b[90m403| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m404| \u001b[39m\n    \u001b[90m405| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m406| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m407| \u001b[39m\n\n\u001b[31m\u001b[2m[19/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to register page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m413:22\u001b[22m\u001b[39m\n    \u001b[90m411| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m412| \u001b[39m\n    \u001b[90m413| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m414| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m415| \u001b[39m\n\n\u001b[31m\u001b[2m[20/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to docs page without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 429, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {\u001b[39m\n\u001b[31m+     \"Retry-After\" => \"900\",\u001b[39m\n\u001b[31m+   },\u001b[39m\n\u001b[31m+   \"message\": \"Too Many Requests\",\u001b[39m\n\u001b[31m+   \"status\": 429,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m421:22\u001b[22m\u001b[39m\n    \u001b[90m419| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m420| \u001b[39m\n    \u001b[90m421| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m422| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m423| \u001b[39m\n\n\u001b[31m\u001b[2m[21/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/middleware.security.test.ts\u001b[2m > \u001b[22mSecurity Middleware\u001b[2m > \u001b[22mCORS and Origin Validation\u001b[2m > \u001b[22mPublic Routes\u001b[2m > \u001b[22mallows access to health check API without authentication\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected { status: 403, (2) } to deeply equal ObjectContaining {\"next\": true}\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- ObjectContaining {\u001b[39m\n\u001b[32m-   \"next\": true,\u001b[39m\n\u001b[31m+ {\u001b[39m\n\u001b[31m+   \"headers\": Map {},\u001b[39m\n\u001b[31m+   \"message\": \"Forbidden\",\u001b[39m\n\u001b[31m+   \"status\": 403,\u001b[39m\n\u001b[2m  }\u001b[22m\n\n\u001b[36m \u001b[2m\u001b[22m src/middleware.security.test.ts:\u001b[2m429:22\u001b[22m\u001b[39m\n    \u001b[90m427| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[34mmiddleware\u001b[39m(mockRequest)\u001b[33m;\u001b[39m\n    \u001b[90m428| \u001b[39m\n    \u001b[90m429| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(expect\u001b[33m.\u001b[39m\u001b[34mobjectContaining\u001b[39m({ next\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m }))\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m430| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m431| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[22/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/contexts/ErrorContext.test.tsx\u001b[2m > \u001b[22museErrorHandler hook\u001b[2m > \u001b[22mshould clear error when clearError is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  1\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/contexts/ErrorContext.test.tsx:\u001b[2m219:47\u001b[22m\u001b[39m\n    \u001b[90m217| \u001b[39m    \u001b[90m// Clear the error\u001b[39m\n    \u001b[90m218| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear Error'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m219| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m220| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m221| \u001b[39m\n\n\u001b[31m\u001b[2m[23/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould handle error when handleError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m131:39\u001b[22m\u001b[39m\n    \u001b[90m129| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m130| \u001b[39m\n    \u001b[90m131| \u001b[39m    \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mreportError)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                      \u001b[31m^\u001b[39m\n    \u001b[90m132| \u001b[39m    \u001b[34mexpect\u001b[39m(errorRecoveryManager\u001b[33m.\u001b[39mattemptRecovery)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m133| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[24/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould handle async error when handleAsyncError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m153:39\u001b[22m\u001b[39m\n    \u001b[90m151| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m152| \u001b[39m\n    \u001b[90m153| \u001b[39m    \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mreportError)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                      \u001b[31m^\u001b[39m\n    \u001b[90m154| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m155| \u001b[39m\n\n\u001b[31m\u001b[2m[25/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould clear error when clearError is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  1\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m169:47\u001b[22m\u001b[39m\n    \u001b[90m167| \u001b[39m    \u001b[90m// Clear the error\u001b[39m\n    \u001b[90m168| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear Error'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m169| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m170| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m171| \u001b[39m\n\n\u001b[31m\u001b[2m[26/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould clear all errors when clearAllErrors is called\n\u001b[31m\u001b[1mError\u001b[22m: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[31m\u001b[2m).toHaveTextContent()\u001b[22m\n\nExpected element to have text content:\n\u001b[32m  0\u001b[31m\nReceived:\n\u001b[31m  2\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m186:47\u001b[22m\u001b[39m\n    \u001b[90m184| \u001b[39m    \u001b[90m// Clear all errors\u001b[39m\n    \u001b[90m185| \u001b[39m    fireEvent\u001b[33m.\u001b[39m\u001b[34mclick\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'Clear All Errors'\u001b[39m))\u001b[33m;\u001b[39m\n    \u001b[90m186| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByTestId\u001b[39m(\u001b[32m'error-count'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoHaveTextContent\u001b[39m(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                              \u001b[31m^\u001b[39m\n    \u001b[90m187| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m188| \u001b[39m\n\n\u001b[31m\u001b[2m[27/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould retry error when retryError is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m1\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"is-online\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mtrue\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Async Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"network-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m1\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m206:40\u001b[22m\u001b[39m\n    \u001b[90m204| \u001b[39m\n    \u001b[90m205| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mwaitFor\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m206| \u001b[39m      \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mtrackRetry)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                       \u001b[31m^\u001b[39m\n    \u001b[90m207| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m208| \u001b[39m  })\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:\u001b[2m47:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m124:77\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m118:16\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m[28/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/hooks/useErrorHandling.test.tsx\u001b[2m > \u001b[22museErrorHandling\u001b[2m > \u001b[22mshould retry all errors when retryAllErrors is called\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[31m\n  \u001b[36m<head />\u001b[31m\n  \u001b[36m<body>\u001b[31m\n    \u001b[36m<div>\u001b[31m\n      \u001b[36m<div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m2\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-error-count\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"is-online\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mtrue\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"has-retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0mfalse\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mHandle Async Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mClear All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry Error\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<button>\u001b[31m\n          \u001b[0mRetry All Errors\u001b[0m\n        \u001b[36m</button>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"network-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m2\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"critical-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n        \u001b[36m<div\u001b[31m\n          \u001b[33mdata-testid\u001b[31m=\u001b[32m\"retryable-errors\"\u001b[31m\n        \u001b[36m>\u001b[31m\n          \u001b[0m0\u001b[0m\n        \u001b[36m</div>\u001b[31m\n      \u001b[36m</div>\u001b[31m\n    \u001b[36m</div>\u001b[31m\n  \u001b[36m</body>\u001b[31m\n\u001b[36m</html>\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/hooks/useErrorHandling.test.tsx:\u001b[2m228:40\u001b[22m\u001b[39m\n    \u001b[90m226| \u001b[39m\n    \u001b[90m227| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mwaitFor\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m228| \u001b[39m      \u001b[34mexpect\u001b[39m(errorReporter\u001b[33m.\u001b[39mtrackRetry)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                       \u001b[31m^\u001b[39m\n    \u001b[90m229| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m230| \u001b[39m  })\u001b[33m;\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:\u001b[2m47:12\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m124:77\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:\u001b[2m118:16\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m[29/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Features\u001b[2m > \u001b[22mAudit Logging\u001b[2m > \u001b[22mshould retrieve audit logs with filters\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected [] to deeply equal [ Array(2) ]\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- [\u001b[39m\n\u001b[32m-   {\u001b[39m\n\u001b[32m-     \"eventType\": \"LOGIN_SUCCESS\",\u001b[39m\n\u001b[32m-     \"id\": \"1\",\u001b[39m\n\u001b[32m-     \"riskLevel\": \"LOW\",\u001b[39m\n\u001b[32m-     \"timestamp\": 2025-10-09T10:21:10.339Z,\u001b[39m\n\u001b[32m-     \"userId\": \"user123\",\u001b[39m\n\u001b[32m-   },\u001b[39m\n\u001b[32m-   {\u001b[39m\n\u001b[32m-     \"eventType\": \"LOGIN_FAILURE\",\u001b[39m\n\u001b[32m-     \"id\": \"2\",\u001b[39m\n\u001b[32m-     \"riskLevel\": \"MEDIUM\",\u001b[39m\n\u001b[32m-     \"timestamp\": 2025-10-09T10:21:10.339Z,\u001b[39m\n\u001b[32m-     \"userId\": \"user456\",\u001b[39m\n\u001b[32m-   },\u001b[39m\n\u001b[32m- ]\u001b[39m\n\u001b[31m+ []\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/advanced-security.test.ts:\u001b[2m261:20\u001b[22m\u001b[39m\n    \u001b[90m259| \u001b[39m      })\u001b[33m;\u001b[39m\n    \u001b[90m260| \u001b[39m      \n    \u001b[90m261| \u001b[39m      \u001b[34mexpect\u001b[39m(logs)\u001b[33m.\u001b[39m\u001b[34mtoEqual\u001b[39m(mockLogs)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                   \u001b[31m^\u001b[39m\n    \u001b[90m262| \u001b[39m      \u001b[34mexpect\u001b[39m(prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n    \u001b[90m263| \u001b[39m        where\u001b[33m:\u001b[39m {\n\n\u001b[31m\u001b[2m[30/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/advanced-security.test.ts\u001b[2m > \u001b[22mAdvanced Security Features\u001b[2m > \u001b[22mIntegration Tests\u001b[2m > \u001b[22mshould handle complete brute force attack scenario\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected true to be false // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- false\u001b[39m\n\u001b[31m+ true\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/advanced-security.test.ts:\u001b[2m357:35\u001b[22m\u001b[39m\n    \u001b[90m355| \u001b[39m        \n    \u001b[90m356| \u001b[39m        \u001b[35mif\u001b[39m (i \u001b[33m<\u001b[39m \u001b[33mBRUTE_FORCE_CONFIG\u001b[39m\u001b[33m.\u001b[39mmaxAttempts) {\n    \u001b[90m357| \u001b[39m          \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39misLocked)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m358| \u001b[39m        } \u001b[35melse\u001b[39m {\n    \u001b[90m359| \u001b[39m          \u001b[34mexpect\u001b[39m(result\u001b[33m.\u001b[39misLocked)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[31/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoriesByDay\u001b[2m > \u001b[22mshould return stories for a valid date\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoriesByDay\u001b[2m > \u001b[22mshould throw error for invalid date format\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoryById\u001b[2m > \u001b[22mshould return story with related data for valid ID\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mgetStoryById\u001b[2m > \u001b[22mshould throw error when story not found\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mcreateStory\u001b[2m > \u001b[22mshould create story with valid data\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mcreateStory\u001b[2m > \u001b[22mshould handle old project ID conversion\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mupdateStory\u001b[2m > \u001b[22mshould update story with valid data\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mupdateStory\u001b[2m > \u001b[22mshould throw error when story not found for update\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mdeleteStory\u001b[2m > \u001b[22mshould delete story with valid ID\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mdeleteStory\u001b[2m > \u001b[22mshould throw error when story not found for deletion\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mreorderStories\u001b[2m > \u001b[22mshould reorder stories successfully\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/services/story.service.test.ts\u001b[2m > \u001b[22mStoryService\u001b[2m > \u001b[22mreorderStories\u001b[2m > \u001b[22mshould throw error when some stories not found\n\u001b[31m\u001b[1mTypeError\u001b[22m: mockProjectIdResolver.resolve.mockResolvedValue is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/services/story.service.test.ts:\u001b[2m64:35\u001b[22m\u001b[39m\n    \u001b[90m 62| \u001b[39m    vi\u001b[33m.\u001b[39m\u001b[34mclearAllMocks\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m 63| \u001b[39m    \u001b[90m// Set up default mock for ProjectIdResolver\u001b[39m\n    \u001b[90m 64| \u001b[39m    mockProjectIdResolver.resolve.mockResolvedValue('cmf5o9m110001u35c\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m 65| \u001b[39m  })\u001b[33m;\u001b[39m\n    \u001b[90m 66| \u001b[39m\n\n\u001b[31m\u001b[2m[32/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/(main)/login/page.test.tsx\u001b[2m > \u001b[22mLoginPage\u001b[2m > \u001b[22mrenders login form with all required elements\n\u001b[31m\u001b[1mTestingLibraryElementError\u001b[22m\u001b[39m: Unable to find an element with the text:    OS. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\nIgnored nodes: comments, script, style\n\u001b[36m<body>\u001b[39m\n  \u001b[36m<div>\u001b[39m\n    \u001b[36m<div\u001b[39m\n      \u001b[33manimate\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n      \u001b[33mclass\u001b[39m=\u001b[32m\"w-full max-w-md p-4\"\u001b[39m\n      \u001b[33minitial\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n      \u001b[33mstyle\u001b[39m=\u001b[32m\"will-change: transform, opacity;\"\u001b[39m\n      \u001b[33mtransition\u001b[39m=\u001b[32m\"[object Object]\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<div\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white/10 backdrop-blur-2xl border border-white/20 shadow-lg text-card-foreground flex flex-col gap-6 rounded-xl py-6 w-full max-w-md\"\u001b[39m\n        \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card\"\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"background: rgba(255, 255, 255, 0.95); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15),\n              0 8px 25px rgba(255, 10, 84, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.8);\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start rtl:items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-6 text-center\"\u001b[39m\n          \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-header\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"text-3xl font-bold text-foreground mb-3\"\u001b[39m\n            \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-title\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0m    \u001b[0m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<p\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"text-muted-foreground\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0m      \u001b[0m\n          \u001b[36m</p>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"px-6 space-y-6\"\u001b[39m\n          \u001b[33mdata-slot\u001b[39m=\u001b[32m\"card-content\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-4\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<label\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground\"\u001b[39m\n                \u001b[33mfor\u001b[39m=\u001b[32m\"email\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m\u001b[0m\n              \u001b[36m</label>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"email\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"example@email.com\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"email\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<label\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-semibold text-foreground\"\u001b[39m\n                \u001b[33mfor\u001b[39m=\u001b[32m\"password\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m \u001b[0m\n              \u001b[36m</label>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex h-10 w-full rounded-md border px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px] border-border/50 focus:border-[#ff0a54]/50 focus:ring-[#ff0a54]/20 bg-white/80 backdrop-blur-sm\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"     \"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"password\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-busy\u001b[39m=\u001b[32m\"false\"\u001b[39m\n              \u001b[33maria-disabled\u001b[39m=\u001b[32m\"false\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 h-10 px-4 py-2 w-full bg-[#ff0a54] hover:bg-[#ff0a54]/90 text-white shadow-lg hover:shadow-xl transition-all duration-200 min-h-[44px] min-w-[44px]\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"box-shadow: 0 8px 25px rgba(255, 10, 84, 0.3),\n                    inset 0 1px 0 rgba(255, 255, 255, 0.6);\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</form>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</div>\u001b[39m\n\u001b[36m</body>\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:\u001b[2m37:19\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m76:38\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m52:17\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m\u001b[22m node_modules/@testing-library/dom/dist/query-helpers.js:\u001b[2m95:19\u001b[22m\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/(main)/login/page.test.tsx:\u001b[2m52:19\u001b[22m\u001b[39m\n    \u001b[90m 50| \u001b[39m\n    \u001b[90m 51| \u001b[39m    \u001b[90m// Check for main title and description\u001b[39m\n    \u001b[90m 52| \u001b[39m    \u001b[34mexpect\u001b[39m(screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'   OS'\u001b[39m))\u001b[33m.\u001b[39m\u001b[34mtoBeInTheDocument\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                  \u001b[31m^\u001b[39m\n    \u001b[90m 53| \u001b[39m    \u001b[34mexpect\u001b[39m(\n    \u001b[90m 54| \u001b[39m      screen\u001b[33m.\u001b[39m\u001b[34mgetByText\u001b[39m(\u001b[32m'      '\u001b[39m)\n\n\u001b[31m\u001b[2m[33/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mreturns leave requests for authenticated user\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m79:31\u001b[22m\u001b[39m\n    \u001b[90m 77| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m 78| \u001b[39m\n    \u001b[90m 79| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m 80| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 81| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveLength\u001b[39m(\u001b[34m1\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[34/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mreturns 401 when user is not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mUnauthoriz\u001b[27med\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mAuthentication requir\u001b[27med\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m95:34\u001b[22m\u001b[39m\n    \u001b[90m 93| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m401\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 94| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 95| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Unauthorized'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m 96| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m 97| \u001b[39m\n\n\u001b[31m\u001b[2m[35/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mGET /api/leave-requests\u001b[2m > \u001b[22mhandles database errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'An internal server error occurred' to be 'DB Error' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"DB Error\"\u001b[39m\nReceived: \u001b[31m\"An internal server error occurred\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m109:34\u001b[22m\u001b[39m\n    \u001b[90m107| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m108| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m109| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'DB Error'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m110| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m111| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[36/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mcreates a new leave request for authenticated user\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m133:31\u001b[22m\u001b[39m\n    \u001b[90m131| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m132| \u001b[39m\n    \u001b[90m133| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m134| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m135| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'leave-123'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[37/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mreturns 401 when user is not authenticated\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Authentication required' to be 'Unauthorized' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mUnauthoriz\u001b[27med\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mAuthentication requir\u001b[27med\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m162:34\u001b[22m\u001b[39m\n    \u001b[90m160| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m401\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m161| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m162| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Unauthorized'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m163| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m164| \u001b[39m\n\n\u001b[31m\u001b[2m[38/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/leave-requests/route.test.ts\u001b[2m > \u001b[22mLeave Requests API Route\u001b[2m > \u001b[22mPOST /api/leave-requests\u001b[2m > \u001b[22mprevents overlapping leave requests\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 409 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 409\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/leave-requests/route.test.ts:\u001b[2m211:31\u001b[22m\u001b[39m\n    \u001b[90m209| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m210| \u001b[39m\n    \u001b[90m211| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m409\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m212| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m213| \u001b[39m      expect(data.error.message).toContain('pending or approved leave \n\n\u001b[31m\u001b[2m[39/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mreturns projects with pagination when no query parameters\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m231:35\u001b[22m\u001b[39m\n    \u001b[90m229| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/proje\n    \u001b[90m230| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m231| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m232| \u001b[39m\n    \u001b[90m233| \u001b[39m\n\n\u001b[31m\u001b[2m[40/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mreturns projects with custom page parameter\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m260:35\u001b[22m\u001b[39m\n    \u001b[90m258| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m259| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m260| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m261| \u001b[39m\n    \u001b[90m262| \u001b[39m      \u001b[90m// Response received\u001b[39m\n\n\u001b[31m\u001b[2m[41/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mcalculates pagination correctly for multiple pages\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m323:35\u001b[22m\u001b[39m\n    \u001b[90m321| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m322| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m323| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m324| \u001b[39m\n    \u001b[90m325| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[42/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mGET /api/projects\u001b[2m > \u001b[22mhandles empty projects gracefully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m344:35\u001b[22m\u001b[39m\n    \u001b[90m342| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/proje\n    \u001b[90m343| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m344| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m345| \u001b[39m\n    \u001b[90m346| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[43/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project successfully with valid data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m393:35\u001b[22m\u001b[39m\n    \u001b[90m391| \u001b[39m\n    \u001b[90m392| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m393| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m394| \u001b[39m\n    \u001b[90m395| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[44/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with empty description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m413:35\u001b[22m\u001b[39m\n    \u001b[90m411| \u001b[39m\n    \u001b[90m412| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m413| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m414| \u001b[39m\n    \u001b[90m415| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[45/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with null description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m431:35\u001b[22m\u001b[39m\n    \u001b[90m429| \u001b[39m\n    \u001b[90m430| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m431| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m432| \u001b[39m\n    \u001b[90m433| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[46/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mcreates project with undefined description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m449:35\u001b[22m\u001b[39m\n    \u001b[90m447| \u001b[39m\n    \u001b[90m448| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m449| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m450| \u001b[39m\n    \u001b[90m451| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[47/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mtrims whitespace from name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m467:35\u001b[22m\u001b[39m\n    \u001b[90m465| \u001b[39m\n    \u001b[90m466| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m467| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m468| \u001b[39m\n    \u001b[90m469| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[48/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mPOST /api/projects\u001b[2m > \u001b[22mhandles JSON parsing errors gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m603:31\u001b[22m\u001b[39m\n    \u001b[90m601| \u001b[39m\n    \u001b[90m602| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m603| \u001b[39m      expect(response.status).toBe(500); // API doesn't handle JSON pa\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m604| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m605| \u001b[39m\n\n\u001b[31m\u001b[2m[49/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles very long project names\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m650:35\u001b[22m\u001b[39m\n    \u001b[90m648| \u001b[39m\n    \u001b[90m649| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m650| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m651| \u001b[39m\n    \u001b[90m652| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[50/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles very long project descriptions\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m666:35\u001b[22m\u001b[39m\n    \u001b[90m664| \u001b[39m\n    \u001b[90m665| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m666| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m667| \u001b[39m\n    \u001b[90m668| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[51/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles special characters in project name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m687:35\u001b[22m\u001b[39m\n    \u001b[90m685| \u001b[39m\n    \u001b[90m686| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m687| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m688| \u001b[39m\n    \u001b[90m689| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[52/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/projects/route.test.ts\u001b[2m > \u001b[22mProjects API Route\u001b[2m > \u001b[22mEdge Cases\u001b[2m > \u001b[22mhandles unicode characters in project name and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/projects/route.test.ts:\u001b[2m709:35\u001b[22m\u001b[39m\n    \u001b[90m707| \u001b[39m\n    \u001b[90m708| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m709| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m710| \u001b[39m\n    \u001b[90m711| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[53/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mfetches stories for a specific day successfully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m112:31\u001b[22m\u001b[39m\n    \u001b[90m110| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m111| \u001b[39m\n    \u001b[90m112| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m113| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m114| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveLength\u001b[39m(\u001b[34m3\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[54/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns 400 when day parameter is missing\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m124:35\u001b[22m\u001b[39m\n    \u001b[90m122| \u001b[39m\n    \u001b[90m123| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m124| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m125| \u001b[39m\n    \u001b[90m126| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m400\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[55/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns 400 when day parameter has invalid format\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m138:35\u001b[22m\u001b[39m\n    \u001b[90m136| \u001b[39m\n    \u001b[90m137| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m138| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m139| \u001b[39m\n    \u001b[90m140| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m400\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[56/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mreturns empty array when no stories exist for the day\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m154:35\u001b[22m\u001b[39m\n    \u001b[90m152| \u001b[39m\n    \u001b[90m153| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m154| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m155| \u001b[39m\n    \u001b[90m156| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[57/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mGET /api/stories\u001b[2m > \u001b[22mhandles edge case dates correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected undefined to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected:\u001b[39m \n200\n\n\u001b[31m+ Received:\u001b[39m \nundefined\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m187:31\u001b[22m\u001b[39m\n    \u001b[90m185| \u001b[39m\n    \u001b[90m186| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m187| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m188| \u001b[39m\n    \u001b[90m189| \u001b[39m      expect(StoryService.getStoriesByDay).toHaveBeenCalledWith('2024-\n\n\u001b[31m\u001b[2m[58/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates a story successfully with all fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m235:31\u001b[22m\u001b[39m\n    \u001b[90m233| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m234| \u001b[39m\n    \u001b[90m235| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m236| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m237| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[59/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates a story with minimal required fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m293:31\u001b[22m\u001b[39m\n    \u001b[90m291| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m292| \u001b[39m\n    \u001b[90m293| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m294| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m295| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[60/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcalculates order automatically when not provided\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m347:31\u001b[22m\u001b[39m\n    \u001b[90m345| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m346| \u001b[39m\n    \u001b[90m347| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m348| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m349| \u001b[39m      expect(data.data.order).toBe(0); // API defaults to 0 when order\n\n\u001b[31m\u001b[2m[61/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with non-existent projectId (API allows it)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m484:31\u001b[22m\u001b[39m\n    \u001b[90m482| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m483| \u001b[39m\n    \u001b[90m484| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m485| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m486| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[62/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with non-existent storyTypeId (API allows it)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m518:31\u001b[22m\u001b[39m\n    \u001b[90m516| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m517| \u001b[39m\n    \u001b[90m518| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m519| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m520| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[63/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story with order (API allows duplicate orders)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m552:31\u001b[22m\u001b[39m\n    \u001b[90m550| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m551| \u001b[39m\n    \u001b[90m552| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m553| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m554| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[64/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mtrims whitespace from text fields\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m593:31\u001b[22m\u001b[39m\n    \u001b[90m591| \u001b[39m\n    \u001b[90m592| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m593| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m594| \u001b[39m\n    \u001b[90m595| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mStoryService\u001b[39m\u001b[33m.\u001b[39mcreateStory)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n\n\u001b[31m\u001b[2m[65/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mcreates story successfully (no database errors)\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m635:31\u001b[22m\u001b[39m\n    \u001b[90m633| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m634| \u001b[39m\n    \u001b[90m635| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m636| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m637| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(mockCreatedStory\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[66/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/route.test.ts\u001b[2m > \u001b[22mStories API Route\u001b[2m > \u001b[22mPOST /api/stories\u001b[2m > \u001b[22mhandles edge case dates correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 201 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 201\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/route.test.ts:\u001b[2m673:31\u001b[22m\u001b[39m\n    \u001b[90m671| \u001b[39m\n    \u001b[90m672| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m673| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m674| \u001b[39m\n    \u001b[90m675| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[33mStoryService\u001b[39m\u001b[33m.\u001b[39mcreateStory)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalledWith\u001b[39m({\n\n\u001b[31m\u001b[2m[67/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mreturns all tasks when no query parameters\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m177:35\u001b[22m\u001b[39m\n    \u001b[90m175| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m176| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m177| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m178| \u001b[39m\n    \u001b[90m179| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[68/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by projectId\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m195:35\u001b[22m\u001b[39m\n    \u001b[90m193| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m194| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m195| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m196| \u001b[39m\n    \u001b[90m197| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[69/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by assignedTo user ID\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m220:35\u001b[22m\u001b[39m\n    \u001b[90m218| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m219| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m220| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m221| \u001b[39m\n    \u001b[90m222| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[70/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mfilters tasks by assignedTo=me for current user\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m242:35\u001b[22m\u001b[39m\n    \u001b[90m240| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m241| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m242| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m243| \u001b[39m\n    \u001b[90m244| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[71/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mcombines multiple filters correctly\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m264:35\u001b[22m\u001b[39m\n    \u001b[90m262| \u001b[39m      )\u001b[33m;\u001b[39m\n    \u001b[90m263| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m264| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m265| \u001b[39m\n    \u001b[90m266| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[72/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mhandles empty results gracefully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m333:35\u001b[22m\u001b[39m\n    \u001b[90m331| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m332| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m333| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m334| \u001b[39m\n    \u001b[90m335| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[73/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mGET /api/tasks\u001b[2m > \u001b[22mincludes correct project and user data in response\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m359:35\u001b[22m\u001b[39m\n    \u001b[90m357| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/tasks\n    \u001b[90m358| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m359| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m360| \u001b[39m\n    \u001b[90m361| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mdata[\u001b[34m0\u001b[39m]\u001b[33m.\u001b[39mproject)\u001b[33m.\u001b[39m\u001b[34mtoBeDefined\u001b[39m()\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[74/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task successfully with valid data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m403:35\u001b[22m\u001b[39m\n    \u001b[90m401| \u001b[39m\n    \u001b[90m402| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m403| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m404| \u001b[39m\n    \u001b[90m405| \u001b[39m      console\u001b[33m.\u001b[39m\u001b[34mlog\u001b[39m(\u001b[32m'Response status:'\u001b[39m\u001b[33m,\u001b[39m response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[75/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with minimal required data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m430:35\u001b[22m\u001b[39m\n    \u001b[90m428| \u001b[39m\n    \u001b[90m429| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m430| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m431| \u001b[39m\n    \u001b[90m432| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[76/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mtrims whitespace from title and description\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m453:35\u001b[22m\u001b[39m\n    \u001b[90m451| \u001b[39m\n    \u001b[90m452| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m453| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m454| \u001b[39m\n    \u001b[90m455| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[77/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task without projectId when not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m568:35\u001b[22m\u001b[39m\n    \u001b[90m566| \u001b[39m\n    \u001b[90m567| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m568| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m569| \u001b[39m\n    \u001b[90m570| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[78/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with non-string projectId (converts to string)\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m589:35\u001b[22m\u001b[39m\n    \u001b[90m587| \u001b[39m\n    \u001b[90m588| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m589| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m590| \u001b[39m\n    \u001b[90m591| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[79/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with null projectId\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m609:35\u001b[22m\u001b[39m\n    \u001b[90m607| \u001b[39m\n    \u001b[90m608| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m609| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m610| \u001b[39m\n    \u001b[90m611| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[80/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mreturns 404 when project does not exist\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m633:35\u001b[22m\u001b[39m\n    \u001b[90m631| \u001b[39m\n    \u001b[90m632| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m633| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m634| \u001b[39m\n    \u001b[90m635| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[81/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task without assignee when assigneeId is not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m653:35\u001b[22m\u001b[39m\n    \u001b[90m651| \u001b[39m\n    \u001b[90m652| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m653| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m654| \u001b[39m\n    \u001b[90m655| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[82/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with null description when description is not provided\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m672:35\u001b[22m\u001b[39m\n    \u001b[90m670| \u001b[39m\n    \u001b[90m671| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m672| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m673| \u001b[39m\n    \u001b[90m674| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[83/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22mcreates task with empty string description converted to null\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m692:35\u001b[22m\u001b[39m\n    \u001b[90m690| \u001b[39m\n    \u001b[90m691| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m692| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m693| \u001b[39m\n    \u001b[90m694| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[84/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mPOST /api/tasks\u001b[2m > \u001b[22msets default status and priority correctly\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m789:35\u001b[22m\u001b[39m\n    \u001b[90m787| \u001b[39m\n    \u001b[90m788| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m789| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m790| \u001b[39m\n    \u001b[90m791| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[85/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles very long task descriptions\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m854:35\u001b[22m\u001b[39m\n    \u001b[90m852| \u001b[39m\n    \u001b[90m853| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m854| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m855| \u001b[39m\n    \u001b[90m856| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[86/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles special characters in task data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m877:35\u001b[22m\u001b[39m\n    \u001b[90m875| \u001b[39m\n    \u001b[90m876| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m877| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m878| \u001b[39m\n    \u001b[90m879| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[87/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/tasks/route.test.ts\u001b[2m > \u001b[22mTasks API Route\u001b[2m > \u001b[22mEdge Cases and Validation\u001b[2m > \u001b[22mhandles unicode characters in task data\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/tasks/route.test.ts:\u001b[2m901:35\u001b[22m\u001b[39m\n    \u001b[90m899| \u001b[39m\n    \u001b[90m900| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m901| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m902| \u001b[39m\n    \u001b[90m903| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[88/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mGET /api/users\u001b[2m > \u001b[22mreturns users list for admin users\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m103:35\u001b[22m\u001b[39m\n    \u001b[90m101| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/users\n    \u001b[90m102| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m103| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m104| \u001b[39m\n    \u001b[90m105| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[89/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mGET /api/users\u001b[2m > \u001b[22mreturns users list for manager users\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m130:35\u001b[22m\u001b[39m\n    \u001b[90m128| \u001b[39m      const request = new NextRequest('http://localhost:3000/api/users\n    \u001b[90m129| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mGET\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m130| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m131| \u001b[39m\n    \u001b[90m132| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[90/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/users/route.test.ts\u001b[2m > \u001b[22mUsers API Route\u001b[2m > \u001b[22mPOST /api/users\u001b[2m > \u001b[22mcreates a new user successfully\n\u001b[31m\u001b[1mTypeError\u001b[22m: response.json is not a function\u001b[39m\n\u001b[36m \u001b[2m\u001b[22m src/app/api/users/route.test.ts:\u001b[2m189:35\u001b[22m\u001b[39m\n    \u001b[90m187| \u001b[39m\n    \u001b[90m188| \u001b[39m      \u001b[35mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m \u001b[33mPOST\u001b[39m(request)\u001b[33m;\u001b[39m\n    \u001b[90m189| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                  \u001b[31m^\u001b[39m\n    \u001b[90m190| \u001b[39m\n    \u001b[90m191| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m201\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[91/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/components/ui/button/Button.test.tsx\u001b[2m > \u001b[22mButton Component\u001b[2m > \u001b[22mrenders with different sizes\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'inline-flex items-center justify-cent' to contain 'h-10'\u001b[39m\n\nExpected: \u001b[32m\"h-10\"\u001b[39m\nReceived: \u001b[31m\"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-11 rounded-md px-8 min-h-[44px] min-w-[44px]\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/components/ui/button/Button.test.tsx:\u001b[2m57:30\u001b[22m\u001b[39m\n    \u001b[90m 55| \u001b[39m    button \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39m\u001b[34mgetByRole\u001b[39m(\u001b[32m'button'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 56| \u001b[39m    \u001b[90m// The large size includes h-10 and px-6 classes\u001b[39m\n    \u001b[90m 57| \u001b[39m    \u001b[34mexpect\u001b[39m(button\u001b[33m.\u001b[39mclassName)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'h-10'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                             \u001b[31m^\u001b[39m\n    \u001b[90m 58| \u001b[39m    \u001b[34mexpect\u001b[39m(button\u001b[33m.\u001b[39mclassName)\u001b[33m.\u001b[39m\u001b[34mtoContain\u001b[39m(\u001b[32m'px-6'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m 59| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[92/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/lib/performance/__tests__/simple-monitor.test.ts\u001b[2m > \u001b[22mSimplePerformanceMonitor\u001b[2m > \u001b[22mError Handling\u001b[2m > \u001b[22mshould handle missing performance.memory gracefully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 52428800 to be +0 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 0\u001b[39m\n\u001b[31m+ 52428800\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/lib/performance/__tests__/simple-monitor.test.ts:\u001b[2m110:34\u001b[22m\u001b[39m\n    \u001b[90m108| \u001b[39m      simplePerformanceMonitor\u001b[33m.\u001b[39m\u001b[34mstartMonitoring\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m109| \u001b[39m      \u001b[35mconst\u001b[39m metrics \u001b[33m=\u001b[39m simplePerformanceMonitor\u001b[33m.\u001b[39m\u001b[34mgetMetrics\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m110| \u001b[39m      \u001b[34mexpect\u001b[39m(metrics\u001b[33m.\u001b[39mmemoryUsed)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m0\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m111| \u001b[39m    })\u001b[33m;\u001b[39m\n    \u001b[90m112| \u001b[39m  })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[93/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when story does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m302:34\u001b[22m\u001b[39m\n    \u001b[90m300| \u001b[39m\n    \u001b[90m301| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m302| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m303| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n    \u001b[90m304| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[94/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when storyTypeId does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story type not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory type not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m339:34\u001b[22m\u001b[39m\n    \u001b[90m337| \u001b[39m\n    \u001b[90m338| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m339| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m340| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n    \u001b[90m341| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[95/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 400 when title is empty string\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m364:31\u001b[22m\u001b[39m\n    \u001b[90m362| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m363| \u001b[39m\n    \u001b[90m364| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m365| \u001b[39m      expect(data.error.message).toBe('Validation failed: title cannot\n    \u001b[90m366| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n\n\u001b[31m\u001b[2m[96/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mPATCH /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 400 when title is only whitespace\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 400 to be 500 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 500\u001b[39m\n\u001b[31m+ 400\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m390:31\u001b[22m\u001b[39m\n    \u001b[90m388| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m389| \u001b[39m\n    \u001b[90m390| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m500\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m391| \u001b[39m      expect(data.error.message).toBe('Validation failed: title cannot\n    \u001b[90m392| \u001b[39m      expect(mockStoryService.updateStory).toHaveBeenCalledWith(storyI\n\n\u001b[31m\u001b[2m[97/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/stories/[storyId]/route.test.ts\u001b[2m > \u001b[22mIndividual Story API Route\u001b[2m > \u001b[22mDELETE /api/stories/[storyId]\u001b[2m > \u001b[22mreturns 404 when story does not exist\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 'Story not found not found' to be 'Resource not found' // Object.is equality\u001b[39m\n\nExpected: \u001b[32m\"\u001b[7mResource\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mStory not found\u001b[27m not found\"\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/stories/[storyId]/route.test.ts:\u001b[2m535:34\u001b[22m\u001b[39m\n    \u001b[90m533| \u001b[39m\n    \u001b[90m534| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m404\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m535| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39merror\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                                 \u001b[31m^\u001b[39m\n    \u001b[90m536| \u001b[39m      expect(mockStoryService.deleteStory).toHaveBeenCalledWith(storyI\n    \u001b[90m537| \u001b[39m    })\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[98/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mreturns attendance statistics for admin users\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m106:31\u001b[22m\u001b[39m\n    \u001b[90m104| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m105| \u001b[39m\n    \u001b[90m106| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m107| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m108| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39m\u001b[34mtoHaveProperty\u001b[39m(\u001b[32m'today'\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[99/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mcalculates correct today statistics\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m118:31\u001b[22m\u001b[39m\n    \u001b[90m116| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m117| \u001b[39m\n    \u001b[90m118| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m119| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m120| \u001b[39m      \n\n\u001b[31m\u001b[2m[100/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mcalculates average clock-in time correctly\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m180:31\u001b[22m\u001b[39m\n    \u001b[90m178| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m179| \u001b[39m\n    \u001b[90m180| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m181| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m182| \u001b[39m      \n\n\u001b[31m\u001b[2m[101/113]\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/app/api/admin/attendance/stats/route.test.ts\u001b[2m > \u001b[22mAdmin Attendance Stats API Route\u001b[2m > \u001b[22mGET /api/admin/attendance/stats\u001b[2m > \u001b[22mhandles empty attendance records\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected 500 to be 200 // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- 200\u001b[39m\n\u001b[31m+ 500\u001b[39m\n\n\u001b[36m \u001b[2m\u001b[22m src/app/api/admin/attendance/stats/route.test.ts:\u001b[2m195:31\u001b[22m\u001b[39m\n    \u001b[90m193| \u001b[39m      \u001b[35mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m response\u001b[33m.\u001b[39m\u001b[34mjson\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[90m194| \u001b[39m\n    \u001b[90m195| \u001b[39m      \u001b[34mexpect\u001b[39m(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m   | \u001b[39m                              \u001b[31m^\u001b[39m\n    \u001b[90m196| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[90m197| \u001b[39m      \u001b[34mexpect\u001b[39m(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoday\u001b[33m.\u001b[39mtotalEmployeesPresent)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[34m0\u001b[39m)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m[102/113]\u001b[22m\u001b[39m\n\n\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.839Z] Measuring memory usage...\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.840Z] Memory usage: 5.42 MB\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.842Z] JSON report saved: F:\\shabra-os-v1\\performance-reports\\performance-report-2025-10-09T10-21-01-467Z.json\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] HTML report saved: F:\\shabra-os-v1\\performance-reports\\performance-report-2025-10-09T10-21-01-467Z.html\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] \n================================================================================\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z]  PERFORMANCE MONITORING SUMMARY\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] ================================================================================\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] Bundle Size: N/A\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] Build Time: 0ms\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] Test Time: 0ms\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] Memory Usage: 5.42 MB\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] Total Duration: 31s\u001b[0m\n\u001b[32m [2025-10-09T10:21:32.843Z] \n No performance issues detected\u001b[0m\n\u001b[36m [2025-10-09T10:21:32.843Z] ================================================================================\u001b[0m\n",
      "critical": false
    }
  ],
  "config": {
    "fixMode": false,
    "verbose": false
  }
}